var AS=Object.create;var Tu=Object.defineProperty,MS=Object.defineProperties,RS=Object.getOwnPropertyDescriptor,PS=Object.getOwnPropertyDescriptors,NS=Object.getOwnPropertyNames,wu=Object.getOwnPropertySymbols,OS=Object.getPrototypeOf,Ad=Object.prototype.hasOwnProperty,Cv=Object.prototype.propertyIsEnumerable;var Tv=(r,e,t)=>e in r?Tu(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,S=(r,e)=>{for(var t in e||={})Ad.call(e,t)&&Tv(r,t,e[t]);if(wu)for(var t of wu(e))Cv.call(e,t)&&Tv(r,t,e[t]);return r},fe=(r,e)=>MS(r,PS(e));var Cu=(r,e)=>{var t={};for(var n in r)Ad.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&wu)for(var n of wu(r))e.indexOf(n)<0&&Cv.call(r,n)&&(t[n]=r[n]);return t};var ee=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),FS=(r,e)=>{for(var t in e)Tu(r,t,{get:e[t],enumerable:!0})},LS=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of NS(e))!Ad.call(r,i)&&i!==t&&Tu(r,i,{get:()=>e[i],enumerable:!(n=RS(e,i))||n.enumerable});return r};var Md=(r,e,t)=>(t=r!=null?AS(OS(r)):{},LS(e||!r||!r.__esModule?Tu(t,"default",{value:r,enumerable:!0}):t,r));var I=(r,e,t)=>new Promise((n,i)=>{var o=l=>{try{a(t.next(l))}catch(u){i(u)}},s=l=>{try{a(t.throw(l))}catch(u){i(u)}},a=l=>l.done?n(l.value):Promise.resolve(l.value).then(o,s);a((t=t.apply(r,e)).next())});var Rb=ee((h4,Jm)=>{"use strict";var DO=Object.prototype.hasOwnProperty,It="~";function Ja(){}Object.create&&(Ja.prototype=Object.create(null),new Ja().__proto__||(It=!1));function SO(r,e,t){this.fn=r,this.context=e,this.once=t||!1}function Mb(r,e,t,n,i){if(typeof t!="function")throw new TypeError("The listener must be a function");var o=new SO(t,n||r,i),s=It?It+e:e;return r._events[s]?r._events[s].fn?r._events[s]=[r._events[s],o]:r._events[s].push(o):(r._events[s]=o,r._eventsCount++),r}function ah(r,e){--r._eventsCount===0?r._events=new Ja:delete r._events[e]}function _t(){this._events=new Ja,this._eventsCount=0}_t.prototype.eventNames=function(){var e=[],t,n;if(this._eventsCount===0)return e;for(n in t=this._events)DO.call(t,n)&&e.push(It?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e};_t.prototype.listeners=function(e){var t=It?It+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,s=new Array(o);i<o;i++)s[i]=n[i].fn;return s};_t.prototype.listenerCount=function(e){var t=It?It+e:e,n=this._events[t];return n?n.fn?1:n.length:0};_t.prototype.emit=function(e,t,n,i,o,s){var a=It?It+e:e;if(!this._events[a])return!1;var l=this._events[a],u=arguments.length,c,h;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),u){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,i),!0;case 5:return l.fn.call(l.context,t,n,i,o),!0;case 6:return l.fn.call(l.context,t,n,i,o,s),!0}for(h=1,c=new Array(u-1);h<u;h++)c[h-1]=arguments[h];l.fn.apply(l.context,c)}else{var d=l.length,f;for(h=0;h<d;h++)switch(l[h].once&&this.removeListener(e,l[h].fn,void 0,!0),u){case 1:l[h].fn.call(l[h].context);break;case 2:l[h].fn.call(l[h].context,t);break;case 3:l[h].fn.call(l[h].context,t,n);break;case 4:l[h].fn.call(l[h].context,t,n,i);break;default:if(!c)for(f=1,c=new Array(u-1);f<u;f++)c[f-1]=arguments[f];l[h].fn.apply(l[h].context,c)}}return!0};_t.prototype.on=function(e,t,n){return Mb(this,e,t,n,!1)};_t.prototype.once=function(e,t,n){return Mb(this,e,t,n,!0)};_t.prototype.removeListener=function(e,t,n,i){var o=It?It+e:e;if(!this._events[o])return this;if(!t)return ah(this,o),this;var s=this._events[o];if(s.fn)s.fn===t&&(!i||s.once)&&(!n||s.context===n)&&ah(this,o);else{for(var a=0,l=[],u=s.length;a<u;a++)(s[a].fn!==t||i&&!s[a].once||n&&s[a].context!==n)&&l.push(s[a]);l.length?this._events[o]=l.length===1?l[0]:l:ah(this,o)}return this};_t.prototype.removeAllListeners=function(e){var t;return e?(t=It?It+e:e,this._events[t]&&ah(this,t)):(this._events=new Ja,this._eventsCount=0),this};_t.prototype.off=_t.prototype.removeListener;_t.prototype.addListener=_t.prototype.on;_t.prefixed=It;_t.EventEmitter=_t;typeof Jm<"u"&&(Jm.exports=_t)});var Lb=ee((d4,ng)=>{"use strict";ng.exports=ch;ng.exports.default=ch;function ch(r,e,t){t=t||2;var n=e&&e.length,i=n?e[0]*t:r.length,o=Nb(r,0,i,t,!0),s=[];if(!o||o.next===o.prev)return s;var a,l,u,c,h,d,f;if(n&&(o=PO(r,e,o,t)),r.length>80*t){a=u=r[0],l=c=r[1];for(var p=t;p<i;p+=t)h=r[p],d=r[p+1],h<a&&(a=h),d<l&&(l=d),h>u&&(u=h),d>c&&(c=d);f=Math.max(u-a,c-l),f=f!==0?32767/f:0}return el(o,s,t,a,l,f,0),s}function Nb(r,e,t,n,i){var o,s;if(i===rg(r,e,t,n)>0)for(o=e;o<t;o+=n)s=Pb(o,r[o],r[o+1],s);else for(o=t-n;o>=e;o-=n)s=Pb(o,r[o],r[o+1],s);return s&&hh(s,s.next)&&(rl(s),s=s.next),s}function Li(r,e){if(!r)return r;e||(e=r);var t=r,n;do if(n=!1,!t.steiner&&(hh(t,t.next)||Fe(t.prev,t,t.next)===0)){if(rl(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function el(r,e,t,n,i,o,s){if(r){!s&&o&&kO(r,n,i,o);for(var a=r,l,u;r.prev!==r.next;){if(l=r.prev,u=r.next,o?AO(r,n,i,o):IO(r)){e.push(l.i/t|0),e.push(r.i/t|0),e.push(u.i/t|0),rl(r),r=u.next,a=u.next;continue}if(r=u,r===a){s?s===1?(r=MO(Li(r),e,t),el(r,e,t,n,i,o,2)):s===2&&RO(r,e,t,n,i,o):el(Li(r),e,t,n,i,o,1);break}}}}function IO(r){var e=r.prev,t=r,n=r.next;if(Fe(e,t,n)>=0)return!1;for(var i=e.x,o=t.x,s=n.x,a=e.y,l=t.y,u=n.y,c=i<o?i<s?i:s:o<s?o:s,h=a<l?a<u?a:u:l<u?l:u,d=i>o?i>s?i:s:o>s?o:s,f=a>l?a>u?a:u:l>u?l:u,p=n.next;p!==e;){if(p.x>=c&&p.x<=d&&p.y>=h&&p.y<=f&&Ko(i,a,o,l,s,u,p.x,p.y)&&Fe(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function AO(r,e,t,n){var i=r.prev,o=r,s=r.next;if(Fe(i,o,s)>=0)return!1;for(var a=i.x,l=o.x,u=s.x,c=i.y,h=o.y,d=s.y,f=a<l?a<u?a:u:l<u?l:u,p=c<h?c<d?c:d:h<d?h:d,m=a>l?a>u?a:u:l>u?l:u,y=c>h?c>d?c:d:h>d?h:d,v=eg(f,p,e,t,n),x=eg(m,y,e,t,n),g=r.prevZ,_=r.nextZ;g&&g.z>=v&&_&&_.z<=x;){if(g.x>=f&&g.x<=m&&g.y>=p&&g.y<=y&&g!==i&&g!==s&&Ko(a,c,l,h,u,d,g.x,g.y)&&Fe(g.prev,g,g.next)>=0||(g=g.prevZ,_.x>=f&&_.x<=m&&_.y>=p&&_.y<=y&&_!==i&&_!==s&&Ko(a,c,l,h,u,d,_.x,_.y)&&Fe(_.prev,_,_.next)>=0))return!1;_=_.nextZ}for(;g&&g.z>=v;){if(g.x>=f&&g.x<=m&&g.y>=p&&g.y<=y&&g!==i&&g!==s&&Ko(a,c,l,h,u,d,g.x,g.y)&&Fe(g.prev,g,g.next)>=0)return!1;g=g.prevZ}for(;_&&_.z<=x;){if(_.x>=f&&_.x<=m&&_.y>=p&&_.y<=y&&_!==i&&_!==s&&Ko(a,c,l,h,u,d,_.x,_.y)&&Fe(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function MO(r,e,t){var n=r;do{var i=n.prev,o=n.next.next;!hh(i,o)&&Ob(i,n,n.next,o)&&tl(i,o)&&tl(o,i)&&(e.push(i.i/t|0),e.push(n.i/t|0),e.push(o.i/t|0),rl(n),rl(n.next),n=r=o),n=n.next}while(n!==r);return Li(n)}function RO(r,e,t,n,i,o){var s=r;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&jO(s,a)){var l=Fb(s,a);s=Li(s,s.next),l=Li(l,l.next),el(s,e,t,n,i,o,0),el(l,e,t,n,i,o,0);return}a=a.next}s=s.next}while(s!==r)}function PO(r,e,t,n){var i=[],o,s,a,l,u;for(o=0,s=e.length;o<s;o++)a=e[o]*n,l=o<s-1?e[o+1]*n:r.length,u=Nb(r,a,l,n,!1),u===u.next&&(u.steiner=!0),i.push(UO(u));for(i.sort(NO),o=0;o<i.length;o++)t=OO(i[o],t);return t}function NO(r,e){return r.x-e.x}function OO(r,e){var t=FO(r,e);if(!t)return e;var n=Fb(t,r);return Li(n,n.next),Li(t,t.next)}function FO(r,e){var t=e,n=r.x,i=r.y,o=-1/0,s;do{if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){var a=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(a<=n&&a>o&&(o=a,s=t.x<t.next.x?t:t.next,a===n))return s}t=t.next}while(t!==e);if(!s)return null;var l=s,u=s.x,c=s.y,h=1/0,d;t=s;do n>=t.x&&t.x>=u&&n!==t.x&&Ko(i<c?n:o,i,u,c,i<c?o:n,i,t.x,t.y)&&(d=Math.abs(i-t.y)/(n-t.x),tl(t,r)&&(d<h||d===h&&(t.x>s.x||t.x===s.x&&LO(s,t)))&&(s=t,h=d)),t=t.next;while(t!==l);return s}function LO(r,e){return Fe(r.prev,r,e.prev)<0&&Fe(e.next,r,r.next)<0}function kO(r,e,t,n){var i=r;do i.z===0&&(i.z=eg(i.x,i.y,e,t,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==r);i.prevZ.nextZ=null,i.prevZ=null,BO(i)}function BO(r){var e,t,n,i,o,s,a,l,u=1;do{for(t=r,r=null,o=null,s=0;t;){for(s++,n=t,a=0,e=0;e<u&&(a++,n=n.nextZ,!!n);e++);for(l=u;a>0||l>0&&n;)a!==0&&(l===0||!n||t.z<=n.z)?(i=t,t=t.nextZ,a--):(i=n,n=n.nextZ,l--),o?o.nextZ=i:r=i,i.prevZ=o,o=i;t=n}o.nextZ=null,u*=2}while(s>1);return r}function eg(r,e,t,n,i){return r=(r-t)*i|0,e=(e-n)*i|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function UO(r){var e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function Ko(r,e,t,n,i,o,s,a){return(i-s)*(e-a)>=(r-s)*(o-a)&&(r-s)*(n-a)>=(t-s)*(e-a)&&(t-s)*(o-a)>=(i-s)*(n-a)}function jO(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!HO(r,e)&&(tl(r,e)&&tl(e,r)&&VO(r,e)&&(Fe(r.prev,r,e.prev)||Fe(r,e.prev,e))||hh(r,e)&&Fe(r.prev,r,r.next)>0&&Fe(e.prev,e,e.next)>0)}function Fe(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function hh(r,e){return r.x===e.x&&r.y===e.y}function Ob(r,e,t,n){var i=uh(Fe(r,e,t)),o=uh(Fe(r,e,n)),s=uh(Fe(t,n,r)),a=uh(Fe(t,n,e));return!!(i!==o&&s!==a||i===0&&lh(r,t,e)||o===0&&lh(r,n,e)||s===0&&lh(t,r,n)||a===0&&lh(t,e,n))}function lh(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function uh(r){return r>0?1:r<0?-1:0}function HO(r,e){var t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&Ob(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function tl(r,e){return Fe(r.prev,r,r.next)<0?Fe(r,e,r.next)>=0&&Fe(r,r.prev,e)>=0:Fe(r,e,r.prev)<0||Fe(r,r.next,e)<0}function VO(r,e){var t=r,n=!1,i=(r.x+e.x)/2,o=(r.y+e.y)/2;do t.y>o!=t.next.y>o&&t.next.y!==t.y&&i<(t.next.x-t.x)*(o-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==r);return n}function Fb(r,e){var t=new tg(r.i,r.x,r.y),n=new tg(e.i,e.x,e.y),i=r.next,o=e.prev;return r.next=e,e.prev=r,t.next=i,i.prev=t,n.next=t,t.prev=n,o.next=n,n.prev=o,n}function Pb(r,e,t,n){var i=new tg(r,e,t);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function rl(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function tg(r,e,t){this.i=r,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}ch.deviation=function(r,e,t,n){var i=e&&e.length,o=i?e[0]*t:r.length,s=Math.abs(rg(r,0,o,t));if(i)for(var a=0,l=e.length;a<l;a++){var u=e[a]*t,c=a<l-1?e[a+1]*t:r.length;s-=Math.abs(rg(r,u,c,t))}var h=0;for(a=0;a<n.length;a+=3){var d=n[a]*t,f=n[a+1]*t,p=n[a+2]*t;h+=Math.abs((r[d]-r[p])*(r[f+1]-r[d+1])-(r[d]-r[f])*(r[p+1]-r[d+1]))}return s===0&&h===0?0:Math.abs((h-s)/s)};function rg(r,e,t,n){for(var i=0,o=e,s=t-n;o<t;o+=n)i+=(r[s]-r[o])*(r[o+1]+r[s+1]),s=o;return i}ch.flatten=function(r){for(var e=r[0][0].length,t={vertices:[],holes:[],dimensions:e},n=0,i=0;i<r.length;i++){for(var o=0;o<r[i].length;o++)for(var s=0;s<e;s++)t.vertices.push(r[i][o][s]);i>0&&(n+=r[i-1].length,t.holes.push(n))}return t}});var kb=ee((Qo,Jo)=>{"use strict";(function(r){var e=typeof Qo=="object"&&Qo&&!Qo.nodeType&&Qo,t=typeof Jo=="object"&&Jo&&!Jo.nodeType&&Jo,n=typeof global=="object"&&global;(n.global===n||n.window===n||n.self===n)&&(r=n);var i,o=2147483647,s=36,a=1,l=26,u=38,c=700,h=72,d=128,f="-",p=/^xn--/,m=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,v={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=s-a,g=Math.floor,_=String.fromCharCode,D;function N(O){throw new RangeError(v[O])}function P(O,V){for(var U=O.length,be=[];U--;)be[U]=V(O[U]);return be}function R(O,V){var U=O.split("@"),be="";U.length>1&&(be=U[0]+"@",O=U[1]),O=O.replace(y,".");var Me=O.split("."),$e=P(Me,V).join(".");return be+$e}function k(O){for(var V=[],U=0,be=O.length,Me,$e;U<be;)Me=O.charCodeAt(U++),Me>=55296&&Me<=56319&&U<be?($e=O.charCodeAt(U++),($e&64512)==56320?V.push(((Me&1023)<<10)+($e&1023)+65536):(V.push(Me),U--)):V.push(Me);return V}function $(O){return P(O,function(V){var U="";return V>65535&&(V-=65536,U+=_(V>>>10&1023|55296),V=56320|V&1023),U+=_(V),U}).join("")}function F(O){return O-48<10?O-22:O-65<26?O-65:O-97<26?O-97:s}function L(O,V){return O+22+75*(O<26)-((V!=0)<<5)}function T(O,V,U){var be=0;for(O=U?g(O/c):O>>1,O+=g(O/V);O>x*l>>1;be+=s)O=g(O/x);return g(be+(x+1)*O/(O+u))}function C(O){var V=[],U=O.length,be,Me=0,$e=d,Ne=h,gt,Rt,wt,Pt,We,Ge,qe,yt,Tt;for(gt=O.lastIndexOf(f),gt<0&&(gt=0),Rt=0;Rt<gt;++Rt)O.charCodeAt(Rt)>=128&&N("not-basic"),V.push(O.charCodeAt(Rt));for(wt=gt>0?gt+1:0;wt<U;){for(Pt=Me,We=1,Ge=s;wt>=U&&N("invalid-input"),qe=F(O.charCodeAt(wt++)),(qe>=s||qe>g((o-Me)/We))&&N("overflow"),Me+=qe*We,yt=Ge<=Ne?a:Ge>=Ne+l?l:Ge-Ne,!(qe<yt);Ge+=s)Tt=s-yt,We>g(o/Tt)&&N("overflow"),We*=Tt;be=V.length+1,Ne=T(Me-Pt,be,Pt==0),g(Me/be)>o-$e&&N("overflow"),$e+=g(Me/be),Me%=be,V.splice(Me++,0,$e)}return $(V)}function K(O){var V,U,be,Me,$e,Ne,gt,Rt,wt,Pt,We,Ge=[],qe,yt,Tt,Ys;for(O=k(O),qe=O.length,V=d,U=0,$e=h,Ne=0;Ne<qe;++Ne)We=O[Ne],We<128&&Ge.push(_(We));for(be=Me=Ge.length,Me&&Ge.push(f);be<qe;){for(gt=o,Ne=0;Ne<qe;++Ne)We=O[Ne],We>=V&&We<gt&&(gt=We);for(yt=be+1,gt-V>g((o-U)/yt)&&N("overflow"),U+=(gt-V)*yt,V=gt,Ne=0;Ne<qe;++Ne)if(We=O[Ne],We<V&&++U>o&&N("overflow"),We==V){for(Rt=U,wt=s;Pt=wt<=$e?a:wt>=$e+l?l:wt-$e,!(Rt<Pt);wt+=s)Ys=Rt-Pt,Tt=s-Pt,Ge.push(_(L(Pt+Ys%Tt,0))),Rt=g(Ys/Tt);Ge.push(_(L(Rt,0))),$e=T(U,yt,be==Me),U=0,++be}++U,++V}return Ge.join("")}function ue(O){return R(O,function(V){return p.test(V)?C(V.slice(4).toLowerCase()):V})}function j(O){return R(O,function(V){return m.test(V)?"xn--"+K(V):V})}if(i={version:"1.4.1",ucs2:{decode:k,encode:$},decode:C,encode:K,toASCII:j,toUnicode:ue},typeof define=="function"&&typeof define.amd=="object"&&define.amd)define("punycode",function(){return i});else if(e&&t)if(Jo.exports==e)t.exports=i;else for(D in i)i.hasOwnProperty(D)&&(e[D]=i[D]);else r.punycode=i})(Qo)});var ki=ee((f4,Bb)=>{"use strict";Bb.exports=TypeError});var Ub=ee(()=>{"use strict"});var al=ee((g4,ow)=>{"use strict";var fg=typeof Map=="function"&&Map.prototype,ig=Object.getOwnPropertyDescriptor&&fg?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,fh=fg&&ig&&typeof ig.get=="function"?ig.get:null,jb=fg&&Map.prototype.forEach,pg=typeof Set=="function"&&Set.prototype,og=Object.getOwnPropertyDescriptor&&pg?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,ph=pg&&og&&typeof og.get=="function"?og.get:null,Hb=pg&&Set.prototype.forEach,$O=typeof WeakMap=="function"&&WeakMap.prototype,il=$O?WeakMap.prototype.has:null,GO=typeof WeakSet=="function"&&WeakSet.prototype,ol=GO?WeakSet.prototype.has:null,zO=typeof WeakRef=="function"&&WeakRef.prototype,Vb=zO?WeakRef.prototype.deref:null,WO=Boolean.prototype.valueOf,qO=Object.prototype.toString,XO=Function.prototype.toString,YO=String.prototype.match,mg=String.prototype.slice,Wn=String.prototype.replace,ZO=String.prototype.toUpperCase,$b=String.prototype.toLowerCase,Qb=RegExp.prototype.test,Gb=Array.prototype.concat,Xr=Array.prototype.join,KO=Array.prototype.slice,zb=Math.floor,lg=typeof BigInt=="function"?BigInt.prototype.valueOf:null,sg=Object.getOwnPropertySymbols,ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,es=typeof Symbol=="function"&&typeof Symbol.iterator=="object",sl=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===es||!0)?Symbol.toStringTag:null,Jb=Object.prototype.propertyIsEnumerable,Wb=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(r){return r.__proto__}:null);function qb(r,e){if(r===1/0||r===-1/0||r!==r||r&&r>-1e3&&r<1e3||Qb.call(/e/,e))return e;var t=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof r=="number"){var n=r<0?-zb(-r):zb(r);if(n!==r){var i=String(n),o=mg.call(e,i.length+1);return Wn.call(i,t,"$&_")+"."+Wn.call(Wn.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Wn.call(e,t,"$&_")}var cg=Ub(),Xb=cg.custom,Yb=rw(Xb)?Xb:null,ew={__proto__:null,double:'"',single:"'"},QO={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};ow.exports=function r(e,t,n,i){var o=t||{};if(En(o,"quoteStyle")&&!En(ew,o.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(En(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=En(o,"customInspect")?o.customInspect:!0;if(typeof s!="boolean"&&s!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(En(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(En(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=o.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return iw(e,o);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return a?qb(e,l):l}if(typeof e=="bigint"){var u=String(e)+"n";return a?qb(e,u):u}var c=typeof o.depth>"u"?5:o.depth;if(typeof n>"u"&&(n=0),n>=c&&c>0&&typeof e=="object")return hg(e)?"[Array]":"[Object]";var h=gF(o,n);if(typeof i>"u")i=[];else if(nw(i,e)>=0)return"[Circular]";function d(T,C,K){if(C&&(i=KO.call(i),i.push(C)),K){var ue={depth:o.depth};return En(o,"quoteStyle")&&(ue.quoteStyle=o.quoteStyle),r(T,ue,n+1,i)}return r(T,o,n+1,i)}if(typeof e=="function"&&!Zb(e)){var f=aF(e),p=dh(e,d);return"[Function"+(f?": "+f:" (anonymous)")+"]"+(p.length>0?" { "+Xr.call(p,", ")+" }":"")}if(rw(e)){var m=es?Wn.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):ug.call(e);return typeof e=="object"&&!es?nl(m):m}if(fF(e)){for(var y="<"+$b.call(String(e.nodeName)),v=e.attributes||[],x=0;x<v.length;x++)y+=" "+v[x].name+"="+tw(JO(v[x].value),"double",o);return y+=">",e.childNodes&&e.childNodes.length&&(y+="..."),y+="</"+$b.call(String(e.nodeName))+">",y}if(hg(e)){if(e.length===0)return"[]";var g=dh(e,d);return h&&!mF(g)?"["+dg(g,h)+"]":"[ "+Xr.call(g,", ")+" ]"}if(tF(e)){var _=dh(e,d);return!("cause"in Error.prototype)&&"cause"in e&&!Jb.call(e,"cause")?"{ ["+String(e)+"] "+Xr.call(Gb.call("[cause]: "+d(e.cause),_),", ")+" }":_.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Xr.call(_,", ")+" }"}if(typeof e=="object"&&s){if(Yb&&typeof e[Yb]=="function"&&cg)return cg(e,{depth:c-n});if(s!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(lF(e)){var D=[];return jb&&jb.call(e,function(T,C){D.push(d(C,e,!0)+" => "+d(T,e))}),Kb("Map",fh.call(e),D,h)}if(hF(e)){var N=[];return Hb&&Hb.call(e,function(T){N.push(d(T,e))}),Kb("Set",ph.call(e),N,h)}if(uF(e))return ag("WeakMap");if(dF(e))return ag("WeakSet");if(cF(e))return ag("WeakRef");if(nF(e))return nl(d(Number(e)));if(oF(e))return nl(d(lg.call(e)));if(iF(e))return nl(WO.call(e));if(rF(e))return nl(d(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof global<"u"&&e===global)return"{ [object globalThis] }";if(!eF(e)&&!Zb(e)){var P=dh(e,d),R=Wb?Wb(e)===Object.prototype:e instanceof Object||e.constructor===Object,k=e instanceof Object?"":"null prototype",$=!R&&sl&&Object(e)===e&&sl in e?mg.call(qn(e),8,-1):k?"Object":"",F=R||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",L=F+($||k?"["+Xr.call(Gb.call([],$||[],k||[]),": ")+"] ":"");return P.length===0?L+"{}":h?L+"{"+dg(P,h)+"}":L+"{ "+Xr.call(P,", ")+" }"}return String(e)};function tw(r,e,t){var n=t.quoteStyle||e,i=ew[n];return i+r+i}function JO(r){return Wn.call(String(r),/"/g,"&quot;")}function Bi(r){return!sl||!(typeof r=="object"&&(sl in r||typeof r[sl]<"u"))}function hg(r){return qn(r)==="[object Array]"&&Bi(r)}function eF(r){return qn(r)==="[object Date]"&&Bi(r)}function Zb(r){return qn(r)==="[object RegExp]"&&Bi(r)}function tF(r){return qn(r)==="[object Error]"&&Bi(r)}function rF(r){return qn(r)==="[object String]"&&Bi(r)}function nF(r){return qn(r)==="[object Number]"&&Bi(r)}function iF(r){return qn(r)==="[object Boolean]"&&Bi(r)}function rw(r){if(es)return r&&typeof r=="object"&&r instanceof Symbol;if(typeof r=="symbol")return!0;if(!r||typeof r!="object"||!ug)return!1;try{return ug.call(r),!0}catch{}return!1}function oF(r){if(!r||typeof r!="object"||!lg)return!1;try{return lg.call(r),!0}catch{}return!1}var sF=Object.prototype.hasOwnProperty||function(r){return r in this};function En(r,e){return sF.call(r,e)}function qn(r){return qO.call(r)}function aF(r){if(r.name)return r.name;var e=YO.call(XO.call(r),/^function\s*([\w$]+)/);return e?e[1]:null}function nw(r,e){if(r.indexOf)return r.indexOf(e);for(var t=0,n=r.length;t<n;t++)if(r[t]===e)return t;return-1}function lF(r){if(!fh||!r||typeof r!="object")return!1;try{fh.call(r);try{ph.call(r)}catch{return!0}return r instanceof Map}catch{}return!1}function uF(r){if(!il||!r||typeof r!="object")return!1;try{il.call(r,il);try{ol.call(r,ol)}catch{return!0}return r instanceof WeakMap}catch{}return!1}function cF(r){if(!Vb||!r||typeof r!="object")return!1;try{return Vb.call(r),!0}catch{}return!1}function hF(r){if(!ph||!r||typeof r!="object")return!1;try{ph.call(r);try{fh.call(r)}catch{return!0}return r instanceof Set}catch{}return!1}function dF(r){if(!ol||!r||typeof r!="object")return!1;try{ol.call(r,ol);try{il.call(r,il)}catch{return!0}return r instanceof WeakSet}catch{}return!1}function fF(r){return!r||typeof r!="object"?!1:typeof HTMLElement<"u"&&r instanceof HTMLElement?!0:typeof r.nodeName=="string"&&typeof r.getAttribute=="function"}function iw(r,e){if(r.length>e.maxStringLength){var t=r.length-e.maxStringLength,n="... "+t+" more character"+(t>1?"s":"");return iw(mg.call(r,0,e.maxStringLength),e)+n}var i=QO[e.quoteStyle||"single"];i.lastIndex=0;var o=Wn.call(Wn.call(r,i,"\\$1"),/[\x00-\x1f]/g,pF);return tw(o,"single",e)}function pF(r){var e=r.charCodeAt(0),t={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return t?"\\"+t:"\\x"+(e<16?"0":"")+ZO.call(e.toString(16))}function nl(r){return"Object("+r+")"}function ag(r){return r+" { ? }"}function Kb(r,e,t,n){var i=n?dg(t,n):Xr.call(t,", ");return r+" ("+e+") {"+i+"}"}function mF(r){for(var e=0;e<r.length;e++)if(nw(r[e],`
`)>=0)return!1;return!0}function gF(r,e){var t;if(r.indent==="	")t="	";else if(typeof r.indent=="number"&&r.indent>0)t=Xr.call(Array(r.indent+1)," ");else return null;return{base:t,prev:Xr.call(Array(e+1),t)}}function dg(r,e){if(r.length===0)return"";var t=`
`+e.prev+e.base;return t+Xr.call(r,","+t)+`
`+e.prev}function dh(r,e){var t=hg(r),n=[];if(t){n.length=r.length;for(var i=0;i<r.length;i++)n[i]=En(r,i)?e(r[i],r):""}var o=typeof sg=="function"?sg(r):[],s;if(es){s={};for(var a=0;a<o.length;a++)s["$"+o[a]]=o[a]}for(var l in r)En(r,l)&&(t&&String(Number(l))===l&&l<r.length||es&&s["$"+l]instanceof Symbol||(Qb.call(/[^\w$]/,l)?n.push(e(l,r)+": "+e(r[l],r)):n.push(l+": "+e(r[l],r))));if(typeof sg=="function")for(var u=0;u<o.length;u++)Jb.call(r,o[u])&&n.push("["+e(o[u])+"]: "+e(r[o[u]],r));return n}});var aw=ee((y4,sw)=>{"use strict";var yF=al(),vF=ki(),mh=function(r,e,t){for(var n=r,i;(i=n.next)!=null;n=i)if(i.key===e)return n.next=i.next,t||(i.next=r.next,r.next=i),i},_F=function(r,e){if(r){var t=mh(r,e);return t&&t.value}},xF=function(r,e,t){var n=mh(r,e);n?n.value=t:r.next={key:e,next:r.next,value:t}},EF=function(r,e){return r?!!mh(r,e):!1},bF=function(r,e){if(r)return mh(r,e,!0)};sw.exports=function(){var e,t={assert:function(n){if(!t.has(n))throw new vF("Side channel does not contain "+yF(n))},delete:function(n){var i=e&&e.next,o=bF(e,n);return o&&i&&i===o&&(e=void 0),!!o},get:function(n){return _F(e,n)},has:function(n){return EF(e,n)},set:function(n,i){e||(e={next:void 0}),xF(e,n,i)}};return t}});var gg=ee((v4,lw)=>{"use strict";lw.exports=Object});var cw=ee((_4,uw)=>{"use strict";uw.exports=Error});var dw=ee((x4,hw)=>{"use strict";hw.exports=EvalError});var pw=ee((E4,fw)=>{"use strict";fw.exports=RangeError});var gw=ee((b4,mw)=>{"use strict";mw.exports=ReferenceError});var vw=ee((w4,yw)=>{"use strict";yw.exports=SyntaxError});var xw=ee((T4,_w)=>{"use strict";_w.exports=URIError});var bw=ee((C4,Ew)=>{"use strict";Ew.exports=Math.abs});var Tw=ee((D4,ww)=>{"use strict";ww.exports=Math.floor});var Dw=ee((S4,Cw)=>{"use strict";Cw.exports=Math.max});var Iw=ee((I4,Sw)=>{"use strict";Sw.exports=Math.min});var Mw=ee((A4,Aw)=>{"use strict";Aw.exports=Math.pow});var Pw=ee((M4,Rw)=>{"use strict";Rw.exports=Math.round});var Ow=ee((R4,Nw)=>{"use strict";Nw.exports=Number.isNaN||function(e){return e!==e}});var Lw=ee((P4,Fw)=>{"use strict";var wF=Ow();Fw.exports=function(e){return wF(e)||e===0?e:e<0?-1:1}});var Bw=ee((N4,kw)=>{"use strict";kw.exports=Object.getOwnPropertyDescriptor});var yg=ee((O4,Uw)=>{"use strict";var gh=Bw();if(gh)try{gh([],"length")}catch{gh=null}Uw.exports=gh});var Hw=ee((F4,jw)=>{"use strict";var yh=Object.defineProperty||!1;if(yh)try{yh({},"a",{value:1})}catch{yh=!1}jw.exports=yh});var $w=ee((L4,Vw)=>{"use strict";Vw.exports=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(var o in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,t);if(a.value!==i||a.enumerable!==!0)return!1}return!0}});var Ww=ee((k4,zw)=>{"use strict";var Gw=typeof Symbol<"u"&&Symbol,TF=$w();zw.exports=function(){return typeof Gw!="function"||typeof Symbol!="function"||typeof Gw("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:TF()}});var vg=ee((B4,qw)=>{"use strict";qw.exports=typeof Reflect<"u"&&Reflect.getPrototypeOf||null});var _g=ee((U4,Xw)=>{"use strict";var CF=gg();Xw.exports=CF.getPrototypeOf||null});var Kw=ee((j4,Zw)=>{"use strict";var DF="Function.prototype.bind called on incompatible ",SF=Object.prototype.toString,IF=Math.max,AF="[object Function]",Yw=function(e,t){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var o=0;o<t.length;o+=1)n[o+e.length]=t[o];return n},MF=function(e,t){for(var n=[],i=t||0,o=0;i<e.length;i+=1,o+=1)n[o]=e[i];return n},RF=function(r,e){for(var t="",n=0;n<r.length;n+=1)t+=r[n],n+1<r.length&&(t+=e);return t};Zw.exports=function(e){var t=this;if(typeof t!="function"||SF.apply(t)!==AF)throw new TypeError(DF+t);for(var n=MF(arguments,1),i,o=function(){if(this instanceof i){var c=t.apply(this,Yw(n,arguments));return Object(c)===c?c:this}return t.apply(e,Yw(n,arguments))},s=IF(0,t.length-n.length),a=[],l=0;l<s;l++)a[l]="$"+l;if(i=Function("binder","return function ("+RF(a,",")+"){ return binder.apply(this,arguments); }")(o),t.prototype){var u=function(){};u.prototype=t.prototype,i.prototype=new u,u.prototype=null}return i}});var ll=ee((H4,Qw)=>{"use strict";var PF=Kw();Qw.exports=Function.prototype.bind||PF});var vh=ee((V4,Jw)=>{"use strict";Jw.exports=Function.prototype.call});var xg=ee(($4,eT)=>{"use strict";eT.exports=Function.prototype.apply});var rT=ee((G4,tT)=>{"use strict";tT.exports=typeof Reflect<"u"&&Reflect&&Reflect.apply});var iT=ee((z4,nT)=>{"use strict";var NF=ll(),OF=xg(),FF=vh(),LF=rT();nT.exports=LF||NF.call(FF,OF)});var Eg=ee((W4,oT)=>{"use strict";var kF=ll(),BF=ki(),UF=vh(),jF=iT();oT.exports=function(e){if(e.length<1||typeof e[0]!="function")throw new BF("a function is required");return jF(kF,UF,e)}});var hT=ee((q4,cT)=>{"use strict";var HF=Eg(),sT=yg(),lT;try{lT=[].__proto__===Array.prototype}catch(r){if(!r||typeof r!="object"||!("code"in r)||r.code!=="ERR_PROTO_ACCESS")throw r}var bg=!!lT&&sT&&sT(Object.prototype,"__proto__"),uT=Object,aT=uT.getPrototypeOf;cT.exports=bg&&typeof bg.get=="function"?HF([bg.get]):typeof aT=="function"?function(e){return aT(e==null?e:uT(e))}:!1});var gT=ee((X4,mT)=>{"use strict";var dT=vg(),fT=_g(),pT=hT();mT.exports=dT?function(e){return dT(e)}:fT?function(e){if(!e||typeof e!="object"&&typeof e!="function")throw new TypeError("getProto: not an object");return fT(e)}:pT?function(e){return pT(e)}:null});var vT=ee((Y4,yT)=>{"use strict";var VF=Function.prototype.call,$F=Object.prototype.hasOwnProperty,GF=ll();yT.exports=GF.call(VF,$F)});var Eh=ee((Z4,TT)=>{"use strict";var de,zF=gg(),WF=cw(),qF=dw(),XF=pw(),YF=gw(),is=vw(),ns=ki(),ZF=xw(),KF=bw(),QF=Tw(),JF=Dw(),eL=Iw(),tL=Mw(),rL=Pw(),nL=Lw(),bT=Function,wg=function(r){try{return bT('"use strict"; return ('+r+").constructor;")()}catch{}},ul=yg(),iL=Hw(),Tg=function(){throw new ns},oL=ul?function(){try{return arguments.callee,Tg}catch{try{return ul(arguments,"callee").get}catch{return Tg}}}():Tg,ts=Ww()(),nt=gT(),sL=_g(),aL=vg(),wT=xg(),cl=vh(),rs={},lL=typeof Uint8Array>"u"||!nt?de:nt(Uint8Array),Ui={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?de:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?de:ArrayBuffer,"%ArrayIteratorPrototype%":ts&&nt?nt([][Symbol.iterator]()):de,"%AsyncFromSyncIteratorPrototype%":de,"%AsyncFunction%":rs,"%AsyncGenerator%":rs,"%AsyncGeneratorFunction%":rs,"%AsyncIteratorPrototype%":rs,"%Atomics%":typeof Atomics>"u"?de:Atomics,"%BigInt%":typeof BigInt>"u"?de:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?de:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?de:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?de:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":WF,"%eval%":eval,"%EvalError%":qF,"%Float16Array%":typeof Float16Array>"u"?de:Float16Array,"%Float32Array%":typeof Float32Array>"u"?de:Float32Array,"%Float64Array%":typeof Float64Array>"u"?de:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?de:FinalizationRegistry,"%Function%":bT,"%GeneratorFunction%":rs,"%Int8Array%":typeof Int8Array>"u"?de:Int8Array,"%Int16Array%":typeof Int16Array>"u"?de:Int16Array,"%Int32Array%":typeof Int32Array>"u"?de:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ts&&nt?nt(nt([][Symbol.iterator]())):de,"%JSON%":typeof JSON=="object"?JSON:de,"%Map%":typeof Map>"u"?de:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ts||!nt?de:nt(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":zF,"%Object.getOwnPropertyDescriptor%":ul,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?de:Promise,"%Proxy%":typeof Proxy>"u"?de:Proxy,"%RangeError%":XF,"%ReferenceError%":YF,"%Reflect%":typeof Reflect>"u"?de:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?de:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ts||!nt?de:nt(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?de:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ts&&nt?nt(""[Symbol.iterator]()):de,"%Symbol%":ts?Symbol:de,"%SyntaxError%":is,"%ThrowTypeError%":oL,"%TypedArray%":lL,"%TypeError%":ns,"%Uint8Array%":typeof Uint8Array>"u"?de:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?de:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?de:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?de:Uint32Array,"%URIError%":ZF,"%WeakMap%":typeof WeakMap>"u"?de:WeakMap,"%WeakRef%":typeof WeakRef>"u"?de:WeakRef,"%WeakSet%":typeof WeakSet>"u"?de:WeakSet,"%Function.prototype.call%":cl,"%Function.prototype.apply%":wT,"%Object.defineProperty%":iL,"%Object.getPrototypeOf%":sL,"%Math.abs%":KF,"%Math.floor%":QF,"%Math.max%":JF,"%Math.min%":eL,"%Math.pow%":tL,"%Math.round%":rL,"%Math.sign%":nL,"%Reflect.getPrototypeOf%":aL};if(nt)try{null.error}catch(r){_T=nt(nt(r)),Ui["%Error.prototype%"]=_T}var _T,uL=function r(e){var t;if(e==="%AsyncFunction%")t=wg("async function () {}");else if(e==="%GeneratorFunction%")t=wg("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=wg("async function* () {}");else if(e==="%AsyncGenerator%"){var n=r("%AsyncGeneratorFunction%");n&&(t=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=r("%AsyncGenerator%");i&&nt&&(t=nt(i.prototype))}return Ui[e]=t,t},xT={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},hl=ll(),_h=vT(),cL=hl.call(cl,Array.prototype.concat),hL=hl.call(wT,Array.prototype.splice),ET=hl.call(cl,String.prototype.replace),xh=hl.call(cl,String.prototype.slice),dL=hl.call(cl,RegExp.prototype.exec),fL=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,pL=/\\(\\)?/g,mL=function(e){var t=xh(e,0,1),n=xh(e,-1);if(t==="%"&&n!=="%")throw new is("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&t!=="%")throw new is("invalid intrinsic syntax, expected opening `%`");var i=[];return ET(e,fL,function(o,s,a,l){i[i.length]=a?ET(l,pL,"$1"):s||o}),i},gL=function(e,t){var n=e,i;if(_h(xT,n)&&(i=xT[n],n="%"+i[0]+"%"),_h(Ui,n)){var o=Ui[n];if(o===rs&&(o=uL(n)),typeof o>"u"&&!t)throw new ns("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new is("intrinsic "+e+" does not exist!")};TT.exports=function(e,t){if(typeof e!="string"||e.length===0)throw new ns("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new ns('"allowMissing" argument must be a boolean');if(dL(/^%?[^%]*%?$/,e)===null)throw new is("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=mL(e),i=n.length>0?n[0]:"",o=gL("%"+i+"%",t),s=o.name,a=o.value,l=!1,u=o.alias;u&&(i=u[0],hL(n,cL([0,1],u)));for(var c=1,h=!0;c<n.length;c+=1){var d=n[c],f=xh(d,0,1),p=xh(d,-1);if((f==='"'||f==="'"||f==="`"||p==='"'||p==="'"||p==="`")&&f!==p)throw new is("property names with quotes must have matching quotes");if((d==="constructor"||!h)&&(l=!0),i+="."+d,s="%"+i+"%",_h(Ui,s))a=Ui[s];else if(a!=null){if(!(d in a)){if(!t)throw new ns("base intrinsic for "+e+" exists, but the property is not available.");return}if(ul&&c+1>=n.length){var m=ul(a,d);h=!!m,h&&"get"in m&&!("originalValue"in m.get)?a=m.get:a=a[d]}else h=_h(a,d),a=a[d];h&&!l&&(Ui[s]=a)}}return a}});var Cg=ee((K4,ST)=>{"use strict";var CT=Eh(),DT=Eg(),yL=DT([CT("%String.prototype.indexOf%")]);ST.exports=function(e,t){var n=CT(e,!!t);return typeof n=="function"&&yL(e,".prototype.")>-1?DT([n]):n}});var Dg=ee((Q4,AT)=>{"use strict";var vL=Eh(),dl=Cg(),_L=al(),xL=ki(),IT=vL("%Map%",!0),EL=dl("Map.prototype.get",!0),bL=dl("Map.prototype.set",!0),wL=dl("Map.prototype.has",!0),TL=dl("Map.prototype.delete",!0),CL=dl("Map.prototype.size",!0);AT.exports=!!IT&&function(){var e,t={assert:function(n){if(!t.has(n))throw new xL("Side channel does not contain "+_L(n))},delete:function(n){if(e){var i=TL(e,n);return CL(e)===0&&(e=void 0),i}return!1},get:function(n){if(e)return EL(e,n)},has:function(n){return e?wL(e,n):!1},set:function(n,i){e||(e=new IT),bL(e,n,i)}};return t}});var RT=ee((J4,MT)=>{"use strict";var DL=Eh(),wh=Cg(),SL=al(),bh=Dg(),IL=ki(),os=DL("%WeakMap%",!0),AL=wh("WeakMap.prototype.get",!0),ML=wh("WeakMap.prototype.set",!0),RL=wh("WeakMap.prototype.has",!0),PL=wh("WeakMap.prototype.delete",!0);MT.exports=os?function(){var e,t,n={assert:function(i){if(!n.has(i))throw new IL("Side channel does not contain "+SL(i))},delete:function(i){if(os&&i&&(typeof i=="object"||typeof i=="function")){if(e)return PL(e,i)}else if(bh&&t)return t.delete(i);return!1},get:function(i){return os&&i&&(typeof i=="object"||typeof i=="function")&&e?AL(e,i):t&&t.get(i)},has:function(i){return os&&i&&(typeof i=="object"||typeof i=="function")&&e?RL(e,i):!!t&&t.has(i)},set:function(i,o){os&&i&&(typeof i=="object"||typeof i=="function")?(e||(e=new os),ML(e,i,o)):bh&&(t||(t=bh()),t.set(i,o))}};return n}:bh});var NT=ee((e8,PT)=>{"use strict";var NL=ki(),OL=al(),FL=aw(),LL=Dg(),kL=RT(),BL=kL||LL||FL;PT.exports=function(){var e,t={assert:function(n){if(!t.has(n))throw new NL("Side channel does not contain "+OL(n))},delete:function(n){return!!e&&e.delete(n)},get:function(n){return e&&e.get(n)},has:function(n){return!!e&&e.has(n)},set:function(n,i){e||(e=BL()),e.set(n,i)}};return t}});var Th=ee((t8,OT)=>{"use strict";var UL=String.prototype.replace,jL=/%20/g,Sg={RFC1738:"RFC1738",RFC3986:"RFC3986"};OT.exports={default:Sg.RFC3986,formatters:{RFC1738:function(r){return UL.call(r,jL,"+")},RFC3986:function(r){return String(r)}},RFC1738:Sg.RFC1738,RFC3986:Sg.RFC3986}});var Mg=ee((r8,LT)=>{"use strict";var HL=Th(),Ig=Object.prototype.hasOwnProperty,ji=Array.isArray,Yr=function(){for(var r=[],e=0;e<256;++e)r.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return r}(),VL=function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(ji(n)){for(var i=[],o=0;o<n.length;++o)typeof n[o]<"u"&&i.push(n[o]);t.obj[t.prop]=i}}},FT=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},i=0;i<e.length;++i)typeof e[i]<"u"&&(n[i]=e[i]);return n},$L=function r(e,t,n){if(!t)return e;if(typeof t!="object"){if(ji(e))e.push(t);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!Ig.call(Object.prototype,t))&&(e[t]=!0);else return[e,t];return e}if(!e||typeof e!="object")return[e].concat(t);var i=e;return ji(e)&&!ji(t)&&(i=FT(e,n)),ji(e)&&ji(t)?(t.forEach(function(o,s){if(Ig.call(e,s)){var a=e[s];a&&typeof a=="object"&&o&&typeof o=="object"?e[s]=r(a,o,n):e.push(o)}else e[s]=o}),e):Object.keys(t).reduce(function(o,s){var a=t[s];return Ig.call(o,s)?o[s]=r(o[s],a,n):o[s]=a,o},i)},GL=function(e,t){return Object.keys(t).reduce(function(n,i){return n[i]=t[i],n},e)},zL=function(r,e,t){var n=r.replace(/\+/g," ");if(t==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},Ag=1024,WL=function(e,t,n,i,o){if(e.length===0)return e;var s=e;if(typeof e=="symbol"?s=Symbol.prototype.toString.call(e):typeof e!="string"&&(s=String(e)),n==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(f){return"%26%23"+parseInt(f.slice(2),16)+"%3B"});for(var a="",l=0;l<s.length;l+=Ag){for(var u=s.length>=Ag?s.slice(l,l+Ag):s,c=[],h=0;h<u.length;++h){var d=u.charCodeAt(h);if(d===45||d===46||d===95||d===126||d>=48&&d<=57||d>=65&&d<=90||d>=97&&d<=122||o===HL.RFC1738&&(d===40||d===41)){c[c.length]=u.charAt(h);continue}if(d<128){c[c.length]=Yr[d];continue}if(d<2048){c[c.length]=Yr[192|d>>6]+Yr[128|d&63];continue}if(d<55296||d>=57344){c[c.length]=Yr[224|d>>12]+Yr[128|d>>6&63]+Yr[128|d&63];continue}h+=1,d=65536+((d&1023)<<10|u.charCodeAt(h)&1023),c[c.length]=Yr[240|d>>18]+Yr[128|d>>12&63]+Yr[128|d>>6&63]+Yr[128|d&63]}a+=c.join("")}return a},qL=function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],i=0;i<t.length;++i)for(var o=t[i],s=o.obj[o.prop],a=Object.keys(s),l=0;l<a.length;++l){var u=a[l],c=s[u];typeof c=="object"&&c!==null&&n.indexOf(c)===-1&&(t.push({obj:s,prop:u}),n.push(c))}return VL(t),e},XL=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},YL=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},ZL=function(e,t){return[].concat(e,t)},KL=function(e,t){if(ji(e)){for(var n=[],i=0;i<e.length;i+=1)n.push(t(e[i]));return n}return t(e)};LT.exports={arrayToObject:FT,assign:GL,combine:ZL,compact:qL,decode:zL,encode:WL,isBuffer:YL,isRegExp:XL,maybeMap:KL,merge:$L}});var VT=ee((n8,HT)=>{"use strict";var BT=NT(),Ch=Mg(),fl=Th(),QL=Object.prototype.hasOwnProperty,UT={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},Zr=Array.isArray,JL=Array.prototype.push,jT=function(r,e){JL.apply(r,Zr(e)?e:[e])},ek=Date.prototype.toISOString,kT=fl.default,Qe={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:Ch.encode,encodeValuesOnly:!1,format:kT,formatter:fl.formatters[kT],indices:!1,serializeDate:function(e){return ek.call(e)},skipNulls:!1,strictNullHandling:!1},tk=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},Rg={},rk=function r(e,t,n,i,o,s,a,l,u,c,h,d,f,p,m,y,v,x){for(var g=e,_=x,D=0,N=!1;(_=_.get(Rg))!==void 0&&!N;){var P=_.get(e);if(D+=1,typeof P<"u"){if(P===D)throw new RangeError("Cyclic object value");N=!0}typeof _.get(Rg)>"u"&&(D=0)}if(typeof c=="function"?g=c(t,g):g instanceof Date?g=f(g):n==="comma"&&Zr(g)&&(g=Ch.maybeMap(g,function(U){return U instanceof Date?f(U):U})),g===null){if(s)return u&&!y?u(t,Qe.encoder,v,"key",p):t;g=""}if(tk(g)||Ch.isBuffer(g)){if(u){var R=y?t:u(t,Qe.encoder,v,"key",p);return[m(R)+"="+m(u(g,Qe.encoder,v,"value",p))]}return[m(t)+"="+m(String(g))]}var k=[];if(typeof g>"u")return k;var $;if(n==="comma"&&Zr(g))y&&u&&(g=Ch.maybeMap(g,u)),$=[{value:g.length>0?g.join(",")||null:void 0}];else if(Zr(c))$=c;else{var F=Object.keys(g);$=h?F.sort(h):F}var L=l?t.replace(/\./g,"%2E"):t,T=i&&Zr(g)&&g.length===1?L+"[]":L;if(o&&Zr(g)&&g.length===0)return T+"[]";for(var C=0;C<$.length;++C){var K=$[C],ue=typeof K=="object"&&typeof K.value<"u"?K.value:g[K];if(!(a&&ue===null)){var j=d&&l?K.replace(/\./g,"%2E"):K,O=Zr(g)?typeof n=="function"?n(T,j):T:T+(d?"."+j:"["+j+"]");x.set(e,D);var V=BT();V.set(Rg,x),jT(k,r(ue,O,n,i,o,s,a,l,n==="comma"&&y&&Zr(g)?null:u,c,h,d,f,p,m,y,v,V))}}return k},nk=function(e){if(!e)return Qe;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.encodeDotInKeys<"u"&&typeof e.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var t=e.charset||Qe.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=fl.default;if(typeof e.format<"u"){if(!QL.call(fl.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var i=fl.formatters[n],o=Qe.filter;(typeof e.filter=="function"||Zr(e.filter))&&(o=e.filter);var s;if(e.arrayFormat in UT?s=e.arrayFormat:"indices"in e?s=e.indices?"indices":"repeat":s=Qe.arrayFormat,"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var a=typeof e.allowDots>"u"?e.encodeDotInKeys===!0?!0:Qe.allowDots:!!e.allowDots;return{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Qe.addQueryPrefix,allowDots:a,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Qe.allowEmptyArrays,arrayFormat:s,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Qe.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:typeof e.delimiter>"u"?Qe.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Qe.encode,encodeDotInKeys:typeof e.encodeDotInKeys=="boolean"?e.encodeDotInKeys:Qe.encodeDotInKeys,encoder:typeof e.encoder=="function"?e.encoder:Qe.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Qe.encodeValuesOnly,filter:o,format:n,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Qe.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Qe.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Qe.strictNullHandling}};HT.exports=function(r,e){var t=r,n=nk(e),i,o;typeof n.filter=="function"?(o=n.filter,t=o("",t)):Zr(n.filter)&&(o=n.filter,i=o);var s=[];if(typeof t!="object"||t===null)return"";var a=UT[n.arrayFormat],l=a==="comma"&&n.commaRoundTrip;i||(i=Object.keys(t)),n.sort&&i.sort(n.sort);for(var u=BT(),c=0;c<i.length;++c){var h=i[c];n.skipNulls&&t[h]===null||jT(s,rk(t[h],h,a,l,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,u))}var d=s.join(n.delimiter),f=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?f+="utf8=%26%2310003%3B&":f+="utf8=%E2%9C%93&"),d.length>0?f+d:""}});var zT=ee((i8,GT)=>{"use strict";var ss=Mg(),Pg=Object.prototype.hasOwnProperty,ik=Array.isArray,Ue={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:ss.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},ok=function(r){return r.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},$T=function(r,e){return r&&typeof r=="string"&&e.comma&&r.indexOf(",")>-1?r.split(","):r},sk="utf8=%26%2310003%3B",ak="utf8=%E2%9C%93",lk=function(e,t){var n={__proto__:null},i=t.ignoreQueryPrefix?e.replace(/^\?/,""):e;i=i.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var o=t.parameterLimit===1/0?void 0:t.parameterLimit,s=i.split(t.delimiter,o),a=-1,l,u=t.charset;if(t.charsetSentinel)for(l=0;l<s.length;++l)s[l].indexOf("utf8=")===0&&(s[l]===ak?u="utf-8":s[l]===sk&&(u="iso-8859-1"),a=l,l=s.length);for(l=0;l<s.length;++l)if(l!==a){var c=s[l],h=c.indexOf("]="),d=h===-1?c.indexOf("="):h+1,f,p;d===-1?(f=t.decoder(c,Ue.decoder,u,"key"),p=t.strictNullHandling?null:""):(f=t.decoder(c.slice(0,d),Ue.decoder,u,"key"),p=ss.maybeMap($T(c.slice(d+1),t),function(y){return t.decoder(y,Ue.decoder,u,"value")})),p&&t.interpretNumericEntities&&u==="iso-8859-1"&&(p=ok(p)),c.indexOf("[]=")>-1&&(p=ik(p)?[p]:p);var m=Pg.call(n,f);m&&t.duplicates==="combine"?n[f]=ss.combine(n[f],p):(!m||t.duplicates==="last")&&(n[f]=p)}return n},uk=function(r,e,t,n){for(var i=n?e:$T(e,t),o=r.length-1;o>=0;--o){var s,a=r[o];if(a==="[]"&&t.parseArrays)s=t.allowEmptyArrays&&(i===""||t.strictNullHandling&&i===null)?[]:[].concat(i);else{s=t.plainObjects?Object.create(null):{};var l=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,u=t.decodeDotInKeys?l.replace(/%2E/g,"."):l,c=parseInt(u,10);!t.parseArrays&&u===""?s={0:i}:!isNaN(c)&&a!==u&&String(c)===u&&c>=0&&t.parseArrays&&c<=t.arrayLimit?(s=[],s[c]=i):u!=="__proto__"&&(s[u]=i)}i=s}return i},ck=function(e,t,n,i){if(e){var o=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,s=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,l=n.depth>0&&s.exec(o),u=l?o.slice(0,l.index):o,c=[];if(u){if(!n.plainObjects&&Pg.call(Object.prototype,u)&&!n.allowPrototypes)return;c.push(u)}for(var h=0;n.depth>0&&(l=a.exec(o))!==null&&h<n.depth;){if(h+=1,!n.plainObjects&&Pg.call(Object.prototype,l[1].slice(1,-1))&&!n.allowPrototypes)return;c.push(l[1])}if(l){if(n.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+n.depth+" and strictDepth is true");c.push("["+o.slice(l.index)+"]")}return uk(c,t,n,i)}},hk=function(e){if(!e)return Ue;if(typeof e.allowEmptyArrays<"u"&&typeof e.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof e.decodeDotInKeys<"u"&&typeof e.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(e.decoder!==null&&typeof e.decoder<"u"&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=typeof e.charset>"u"?Ue.charset:e.charset,n=typeof e.duplicates>"u"?Ue.duplicates:e.duplicates;if(n!=="combine"&&n!=="first"&&n!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var i=typeof e.allowDots>"u"?e.decodeDotInKeys===!0?!0:Ue.allowDots:!!e.allowDots;return{allowDots:i,allowEmptyArrays:typeof e.allowEmptyArrays=="boolean"?!!e.allowEmptyArrays:Ue.allowEmptyArrays,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:Ue.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:Ue.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:Ue.arrayLimit,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Ue.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:Ue.comma,decodeDotInKeys:typeof e.decodeDotInKeys=="boolean"?e.decodeDotInKeys:Ue.decodeDotInKeys,decoder:typeof e.decoder=="function"?e.decoder:Ue.decoder,delimiter:typeof e.delimiter=="string"||ss.isRegExp(e.delimiter)?e.delimiter:Ue.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:Ue.depth,duplicates:n,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:Ue.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:Ue.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:Ue.plainObjects,strictDepth:typeof e.strictDepth=="boolean"?!!e.strictDepth:Ue.strictDepth,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Ue.strictNullHandling}};GT.exports=function(r,e){var t=hk(e);if(r===""||r===null||typeof r>"u")return t.plainObjects?Object.create(null):{};for(var n=typeof r=="string"?lk(r,t):r,i=t.plainObjects?Object.create(null):{},o=Object.keys(n),s=0;s<o.length;++s){var a=o[s],l=ck(a,n[a],t,typeof r=="string");i=ss.merge(i,l,t)}return t.allowSparse===!0?i:ss.compact(i)}});var qT=ee((o8,WT)=>{"use strict";var dk=VT(),fk=zT(),pk=Th();WT.exports={formats:pk,parse:fk,stringify:dk}});var KT=ee(ls=>{"use strict";var mk=kb();function hr(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var gk=/^([a-z0-9.+-]+:)/i,yk=/:[0-9]*$/,vk=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,_k=["<",">",'"',"`"," ","\r",`
`,"	"],xk=["{","}","|","\\","^","`"].concat(_k),Ng=["'"].concat(xk),XT=["%","/","?",";","#"].concat(Ng),YT=["/","?","#"],Ek=255,ZT=/^[+a-z0-9A-Z_-]{0,63}$/,bk=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,wk={javascript:!0,"javascript:":!0},Og={javascript:!0,"javascript:":!0},as={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Fg=qT();function pl(r,e,t){if(r&&typeof r=="object"&&r instanceof hr)return r;var n=new hr;return n.parse(r,e,t),n}hr.prototype.parse=function(r,e,t){if(typeof r!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var n=r.indexOf("?"),i=n!==-1&&n<r.indexOf("#")?"?":"#",o=r.split(i),s=/\\/g;o[0]=o[0].replace(s,"/"),r=o.join(i);var a=r;if(a=a.trim(),!t&&r.split("#").length===1){var l=vk.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],e?this.query=Fg.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var u=gk.exec(a);if(u){u=u[0];var c=u.toLowerCase();this.protocol=c,a=a.substr(u.length)}if(t||u||a.match(/^\/\/[^@/]+@[^@/]+/)){var h=a.substr(0,2)==="//";h&&!(u&&Og[u])&&(a=a.substr(2),this.slashes=!0)}if(!Og[u]&&(h||u&&!as[u])){for(var d=-1,f=0;f<YT.length;f++){var p=a.indexOf(YT[f]);p!==-1&&(d===-1||p<d)&&(d=p)}var m,y;d===-1?y=a.lastIndexOf("@"):y=a.lastIndexOf("@",d),y!==-1&&(m=a.slice(0,y),a=a.slice(y+1),this.auth=decodeURIComponent(m)),d=-1;for(var f=0;f<XT.length;f++){var p=a.indexOf(XT[f]);p!==-1&&(d===-1||p<d)&&(d=p)}d===-1&&(d=a.length),this.host=a.slice(0,d),a=a.slice(d),this.parseHost(),this.hostname=this.hostname||"";var v=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!v)for(var x=this.hostname.split(/\./),f=0,g=x.length;f<g;f++){var _=x[f];if(_&&!_.match(ZT)){for(var D="",N=0,P=_.length;N<P;N++)_.charCodeAt(N)>127?D+="x":D+=_[N];if(!D.match(ZT)){var R=x.slice(0,f),k=x.slice(f+1),$=_.match(bk);$&&(R.push($[1]),k.unshift($[2])),k.length&&(a="/"+k.join(".")+a),this.hostname=R.join(".");break}}}this.hostname.length>Ek?this.hostname="":this.hostname=this.hostname.toLowerCase(),v||(this.hostname=mk.toASCII(this.hostname));var F=this.port?":"+this.port:"",L=this.hostname||"";this.host=L+F,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!wk[c])for(var f=0,g=Ng.length;f<g;f++){var T=Ng[f];if(a.indexOf(T)!==-1){var C=encodeURIComponent(T);C===T&&(C=escape(T)),a=a.split(T).join(C)}}var K=a.indexOf("#");K!==-1&&(this.hash=a.substr(K),a=a.slice(0,K));var ue=a.indexOf("?");if(ue!==-1?(this.search=a.substr(ue),this.query=a.substr(ue+1),e&&(this.query=Fg.parse(this.query)),a=a.slice(0,ue)):e&&(this.search="",this.query={}),a&&(this.pathname=a),as[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var F=this.pathname||"",j=this.search||"";this.path=F+j}return this.href=this.format(),this};function Tk(r){return typeof r=="string"&&(r=pl(r)),r instanceof hr?r.format():hr.prototype.format.call(r)}hr.prototype.format=function(){var r=this.auth||"";r&&(r=encodeURIComponent(r),r=r.replace(/%3A/i,":"),r+="@");var e=this.protocol||"",t=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=r+this.host:this.hostname&&(i=r+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(o=Fg.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var s=this.search||o&&"?"+o||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||as[e])&&i!==!1?(i="//"+(i||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):i||(i=""),n&&n.charAt(0)!=="#"&&(n="#"+n),s&&s.charAt(0)!=="?"&&(s="?"+s),t=t.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),s=s.replace("#","%23"),e+i+t+s+n};function Ck(r,e){return pl(r,!1,!0).resolve(e)}hr.prototype.resolve=function(r){return this.resolveObject(pl(r,!1,!0)).format()};function Dk(r,e){return r?pl(r,!1,!0).resolveObject(e):e}hr.prototype.resolveObject=function(r){if(typeof r=="string"){var e=new hr;e.parse(r,!1,!0),r=e}for(var t=new hr,n=Object.keys(this),i=0;i<n.length;i++){var o=n[i];t[o]=this[o]}if(t.hash=r.hash,r.href==="")return t.href=t.format(),t;if(r.slashes&&!r.protocol){for(var s=Object.keys(r),a=0;a<s.length;a++){var l=s[a];l!=="protocol"&&(t[l]=r[l])}return as[t.protocol]&&t.hostname&&!t.pathname&&(t.pathname="/",t.path=t.pathname),t.href=t.format(),t}if(r.protocol&&r.protocol!==t.protocol){if(!as[r.protocol]){for(var u=Object.keys(r),c=0;c<u.length;c++){var h=u[c];t[h]=r[h]}return t.href=t.format(),t}if(t.protocol=r.protocol,!r.host&&!Og[r.protocol]){for(var g=(r.pathname||"").split("/");g.length&&!(r.host=g.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),g[0]!==""&&g.unshift(""),g.length<2&&g.unshift(""),t.pathname=g.join("/")}else t.pathname=r.pathname;if(t.search=r.search,t.query=r.query,t.host=r.host||"",t.auth=r.auth,t.hostname=r.hostname||r.host,t.port=r.port,t.pathname||t.search){var d=t.pathname||"",f=t.search||"";t.path=d+f}return t.slashes=t.slashes||r.slashes,t.href=t.format(),t}var p=t.pathname&&t.pathname.charAt(0)==="/",m=r.host||r.pathname&&r.pathname.charAt(0)==="/",y=m||p||t.host&&r.pathname,v=y,x=t.pathname&&t.pathname.split("/")||[],g=r.pathname&&r.pathname.split("/")||[],_=t.protocol&&!as[t.protocol];if(_&&(t.hostname="",t.port=null,t.host&&(x[0]===""?x[0]=t.host:x.unshift(t.host)),t.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(g[0]===""?g[0]=r.host:g.unshift(r.host)),r.host=null),y=y&&(g[0]===""||x[0]==="")),m)t.host=r.host||r.host===""?r.host:t.host,t.hostname=r.hostname||r.hostname===""?r.hostname:t.hostname,t.search=r.search,t.query=r.query,x=g;else if(g.length)x||(x=[]),x.pop(),x=x.concat(g),t.search=r.search,t.query=r.query;else if(r.search!=null){if(_){t.host=x.shift(),t.hostname=t.host;var D=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;D&&(t.auth=D.shift(),t.hostname=D.shift(),t.host=t.hostname)}return t.search=r.search,t.query=r.query,(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t}if(!x.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var N=x.slice(-1)[0],P=(t.host||r.host||x.length>1)&&(N==="."||N==="..")||N==="",R=0,k=x.length;k>=0;k--)N=x[k],N==="."?x.splice(k,1):N===".."?(x.splice(k,1),R++):R&&(x.splice(k,1),R--);if(!y&&!v)for(;R--;R)x.unshift("..");y&&x[0]!==""&&(!x[0]||x[0].charAt(0)!=="/")&&x.unshift(""),P&&x.join("/").substr(-1)!=="/"&&x.push("");var $=x[0]===""||x[0]&&x[0].charAt(0)==="/";if(_){t.hostname=$?"":x.length?x.shift():"",t.host=t.hostname;var D=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;D&&(t.auth=D.shift(),t.hostname=D.shift(),t.host=t.hostname)}return y=y||t.host&&x.length,y&&!$&&x.unshift(""),x.length>0?t.pathname=x.join("/"):(t.pathname=null,t.path=null),(t.pathname!==null||t.search!==null)&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=r.auth||t.auth,t.slashes=t.slashes||r.slashes,t.href=t.format(),t};hr.prototype.parseHost=function(){var r=this.host,e=yk.exec(r);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),r=r.substr(0,r.length-e.length)),r&&(this.hostname=r)};ls.parse=pl;ls.resolve=Ck;ls.resolveObject=Dk;ls.format=Tk;ls.Url=hr});function Dv(r,e){return Object.is(r,e)}var tt=null,Zs=!1,Du=1,cn=Symbol("SIGNAL");function _e(r){let e=tt;return tt=r,e}function kS(){return Zs}var Qs={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Od(r){if(Zs)throw new Error("");if(tt===null)return;tt.consumerOnSignalRead(r);let e=tt.nextProducerIndex++;if(lo(tt),e<tt.producerNode.length&&tt.producerNode[e]!==r&&Ks(tt)){let t=tt.producerNode[e];Ru(t,tt.producerIndexOfThis[e])}tt.producerNode[e]!==r&&(tt.producerNode[e]=r,tt.producerIndexOfThis[e]=Ks(tt)?Rv(r,tt,e):0),tt.producerLastReadVersion[e]=r.version}function BS(){Du++}function Sv(r){if(!(Ks(r)&&!r.dirty)&&!(!r.dirty&&r.lastCleanEpoch===Du)){if(!r.producerMustRecompute(r)&&!Mu(r)){r.dirty=!1,r.lastCleanEpoch=Du;return}r.producerRecomputeValue(r),r.dirty=!1,r.lastCleanEpoch=Du}}function Iv(r){if(r.liveConsumerNode===void 0)return;let e=Zs;Zs=!0;try{for(let t of r.liveConsumerNode)t.dirty||Mv(t)}finally{Zs=e}}function Av(){return tt?.consumerAllowSignalWrites!==!1}function Mv(r){r.dirty=!0,Iv(r),r.consumerMarkedDirty?.(r)}function Iu(r){return r&&(r.nextProducerIndex=0),_e(r)}function Au(r,e){if(_e(e),!(!r||r.producerNode===void 0||r.producerIndexOfThis===void 0||r.producerLastReadVersion===void 0)){if(Ks(r))for(let t=r.nextProducerIndex;t<r.producerNode.length;t++)Ru(r.producerNode[t],r.producerIndexOfThis[t]);for(;r.producerNode.length>r.nextProducerIndex;)r.producerNode.pop(),r.producerLastReadVersion.pop(),r.producerIndexOfThis.pop()}}function Mu(r){lo(r);for(let e=0;e<r.producerNode.length;e++){let t=r.producerNode[e],n=r.producerLastReadVersion[e];if(n!==t.version||(Sv(t),n!==t.version))return!0}return!1}function Fd(r){if(lo(r),Ks(r))for(let e=0;e<r.producerNode.length;e++)Ru(r.producerNode[e],r.producerIndexOfThis[e]);r.producerNode.length=r.producerLastReadVersion.length=r.producerIndexOfThis.length=0,r.liveConsumerNode&&(r.liveConsumerNode.length=r.liveConsumerIndexOfThis.length=0)}function Rv(r,e,t){if(Pv(r),lo(r),r.liveConsumerNode.length===0)for(let n=0;n<r.producerNode.length;n++)r.producerIndexOfThis[n]=Rv(r.producerNode[n],r,n);return r.liveConsumerIndexOfThis.push(t),r.liveConsumerNode.push(e)-1}function Ru(r,e){if(Pv(r),lo(r),r.liveConsumerNode.length===1)for(let n=0;n<r.producerNode.length;n++)Ru(r.producerNode[n],r.producerIndexOfThis[n]);let t=r.liveConsumerNode.length-1;if(r.liveConsumerNode[e]=r.liveConsumerNode[t],r.liveConsumerIndexOfThis[e]=r.liveConsumerIndexOfThis[t],r.liveConsumerNode.length--,r.liveConsumerIndexOfThis.length--,e<r.liveConsumerNode.length){let n=r.liveConsumerIndexOfThis[e],i=r.liveConsumerNode[e];lo(i),i.producerIndexOfThis[n]=e}}function Ks(r){return r.consumerIsAlwaysLive||(r?.liveConsumerNode?.length??0)>0}function lo(r){r.producerNode??=[],r.producerIndexOfThis??=[],r.producerLastReadVersion??=[]}function Pv(r){r.liveConsumerNode??=[],r.liveConsumerIndexOfThis??=[]}function Nv(r){let e=Object.create(US);e.computation=r;let t=()=>{if(Sv(e),Od(e),e.value===Su)throw e.error;return e.value};return t[cn]=e,t}var Rd=Symbol("UNSET"),Pd=Symbol("COMPUTING"),Su=Symbol("ERRORED"),US=fe(S({},Qs),{value:Rd,dirty:!0,error:null,equal:Dv,producerMustRecompute(r){return r.value===Rd||r.value===Pd},producerRecomputeValue(r){if(r.value===Pd)throw new Error("Detected cycle in computations.");let e=r.value;r.value=Pd;let t=Iu(r),n;try{n=r.computation()}catch(i){n=Su,r.error=i}finally{Au(r,t)}if(e!==Rd&&e!==Su&&n!==Su&&r.equal(e,n)){r.value=e;return}r.value=n,r.version++}});function jS(){throw new Error}var Ov=jS;function Fv(){Ov()}function Lv(r){Ov=r}var HS=null;function kv(r){let e=Object.create(Uv);e.value=r;let t=()=>(Od(e),e.value);return t[cn]=e,t}function Ld(r,e){Av()||Fv(),r.equal(r.value,e)||(r.value=e,VS(r))}function Bv(r,e){Av()||Fv(),Ld(r,e(r.value))}var Uv=fe(S({},Qs),{equal:Dv,value:void 0});function VS(r){r.version++,BS(),Iv(r),HS?.()}function jv(r,e,t){let n=Object.create($S);t&&(n.consumerAllowSignalWrites=!0),n.fn=r,n.schedule=e;let i=l=>{n.cleanupFn=l};function o(l){return l.fn===null&&l.schedule===null}function s(l){o(l)||(Fd(l),l.cleanupFn(),l.fn=null,l.schedule=null,l.cleanupFn=Nd)}let a=()=>{if(n.fn===null)return;if(kS())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(n.dirty=!1,n.hasRun&&!Mu(n))return;n.hasRun=!0;let l=Iu(n);try{n.cleanupFn(),n.cleanupFn=Nd,n.fn(i)}finally{Au(n,l)}};return n.ref={notify:()=>Mv(n),run:a,cleanup:()=>n.cleanupFn(),destroy:()=>s(n),[cn]:n},n.ref}var Nd=()=>{},$S=fe(S({},Qs),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:r=>{r.schedule!==null&&r.schedule(r.ref)},hasRun:!1,cleanupFn:Nd});function oe(r){return typeof r=="function"}function uo(r){let t=r(n=>{Error.call(n),n.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Pu=uo(r=>function(t){r(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((n,i)=>`${i+1}) ${n.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Js(r,e){if(r){let t=r.indexOf(e);0<=t&&r.splice(t,1)}}var Xe=class r{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:n}=this;if(oe(n))try{n()}catch(o){e=o instanceof Pu?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Hv(o)}catch(s){e=e??[],s instanceof Pu?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Pu(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Hv(e);else{if(e instanceof r){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Js(t,e)}remove(e){let{_finalizers:t}=this;t&&Js(t,e),e instanceof r&&e._removeParent(this)}};Xe.EMPTY=(()=>{let r=new Xe;return r.closed=!0,r})();var kd=Xe.EMPTY;function Nu(r){return r instanceof Xe||r&&"closed"in r&&oe(r.remove)&&oe(r.add)&&oe(r.unsubscribe)}function Hv(r){oe(r)?r():r.unsubscribe()}var vr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var co={setTimeout(r,e,...t){let{delegate:n}=co;return n?.setTimeout?n.setTimeout(r,e,...t):setTimeout(r,e,...t)},clearTimeout(r){let{delegate:e}=co;return(e?.clearTimeout||clearTimeout)(r)},delegate:void 0};function Ou(r){co.setTimeout(()=>{let{onUnhandledError:e}=vr;if(e)e(r);else throw r})}function ea(){}var Vv=Bd("C",void 0,void 0);function $v(r){return Bd("E",void 0,r)}function Gv(r){return Bd("N",r,void 0)}function Bd(r,e,t){return{kind:r,value:e,error:t}}var di=null;function ho(r){if(vr.useDeprecatedSynchronousErrorHandling){let e=!di;if(e&&(di={errorThrown:!1,error:null}),r(),e){let{errorThrown:t,error:n}=di;if(di=null,t)throw n}}else r()}function zv(r){vr.useDeprecatedSynchronousErrorHandling&&di&&(di.errorThrown=!0,di.error=r)}var fi=class extends Xe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Nu(e)&&e.add(this)):this.destination=WS}static create(e,t,n){return new fo(e,t,n)}next(e){this.isStopped?jd(Gv(e),this):this._next(e)}error(e){this.isStopped?jd($v(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?jd(Vv,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},GS=Function.prototype.bind;function Ud(r,e){return GS.call(r,e)}var Hd=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(n){Fu(n)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(n){Fu(n)}else Fu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Fu(t)}}},fo=class extends fi{constructor(e,t,n){super();let i;if(oe(e)||!e)i={next:e??void 0,error:t??void 0,complete:n??void 0};else{let o;this&&vr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Ud(e.next,o),error:e.error&&Ud(e.error,o),complete:e.complete&&Ud(e.complete,o)}):i=e}this.destination=new Hd(i)}};function Fu(r){vr.useDeprecatedSynchronousErrorHandling?zv(r):Ou(r)}function zS(r){throw r}function jd(r,e){let{onStoppedNotification:t}=vr;t&&co.setTimeout(()=>t(r,e))}var WS={closed:!0,next:ea,error:zS,complete:ea};var po=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Vt(r){return r}function Vd(...r){return $d(r)}function $d(r){return r.length===0?Vt:r.length===1?r[0]:function(t){return r.reduce((n,i)=>i(n),t)}}var Te=(()=>{class r{constructor(t){t&&(this._subscribe=t)}lift(t){let n=new r;return n.source=this,n.operator=t,n}subscribe(t,n,i){let o=XS(t)?t:new fo(t,n,i);return ho(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(n){t.error(n)}}forEach(t,n){return n=Wv(n),new n((i,o)=>{let s=new fo({next:a=>{try{t(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)}[po](){return this}pipe(...t){return $d(t)(this)}toPromise(t){return t=Wv(t),new t((n,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>n(o))})}}return r.create=e=>new r(e),r})();function Wv(r){var e;return(e=r??vr.Promise)!==null&&e!==void 0?e:Promise}function qS(r){return r&&oe(r.next)&&oe(r.error)&&oe(r.complete)}function XS(r){return r&&r instanceof fi||qS(r)&&Nu(r)}function Gd(r){return oe(r?.lift)}function ge(r){return e=>{if(Gd(e))return e.lift(function(t){try{return r(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function ye(r,e,t,n,i){return new zd(r,e,t,n,i)}var zd=class extends fi{constructor(e,t,n,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function mo(){return ge((r,e)=>{let t=null;r._refCount++;let n=ye(e,void 0,void 0,void 0,()=>{if(!r||r._refCount<=0||0<--r._refCount){t=null;return}let i=r._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});r.subscribe(n),n.closed||(t=r.connect())})}var go=class extends Te{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Gd(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Xe;let t=this.getSubject();e.add(this.source.subscribe(ye(t,void 0,()=>{this._teardown(),t.complete()},n=>{this._teardown(),t.error(n)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Xe.EMPTY)}return e}refCount(){return mo()(this)}};var qv=uo(r=>function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ct=(()=>{class r extends Te{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let n=new Lu(this,this);return n.operator=t,n}_throwIfClosed(){if(this.closed)throw new qv}next(t){ho(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let n of this.currentObservers)n.next(t)}})}error(t){ho(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:n}=this;for(;n.length;)n.shift().error(t)}})}complete(){ho(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:n,isStopped:i,observers:o}=this;return n||i?kd:(this.currentObservers=null,o.push(t),new Xe(()=>{this.currentObservers=null,Js(o,t)}))}_checkFinalizedStatuses(t){let{hasError:n,thrownError:i,isStopped:o}=this;n?t.error(i):o&&t.complete()}asObservable(){let t=new Te;return t.source=this,t}}return r.create=(e,t)=>new Lu(e,t),r})(),Lu=class extends Ct{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.next)===null||n===void 0||n.call(t,e)}error(e){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.error)===null||n===void 0||n.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,n;return(n=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&n!==void 0?n:kd}};var lt=class extends Ct{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:n}=this;if(e)throw t;return this._throwIfClosed(),n}next(e){super.next(this._value=e)}};var $t=new Te(r=>r.complete());function Xv(r){return r&&oe(r.schedule)}function Yv(r){return r[r.length-1]}function Zv(r){return oe(Yv(r))?r.pop():void 0}function On(r){return Xv(Yv(r))?r.pop():void 0}function Qv(r,e,t,n){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(c){try{u(n.next(c))}catch(h){s(h)}}function l(c){try{u(n.throw(c))}catch(h){s(h)}}function u(c){c.done?o(c.value):i(c.value).then(a,l)}u((n=n.apply(r,e||[])).next())})}function Kv(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function pi(r){return this instanceof pi?(this.v=r,this):new pi(r)}function Jv(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(f){return function(p){return Promise.resolve(p).then(f,h)}}function a(f,p){n[f]&&(i[f]=function(m){return new Promise(function(y,v){o.push([f,m,y,v])>1||l(f,m)})},p&&(i[f]=p(i[f])))}function l(f,p){try{u(n[f](p))}catch(m){d(o[0][3],m)}}function u(f){f.value instanceof pi?Promise.resolve(f.value.v).then(c,h):d(o[0][2],f)}function c(f){l("next",f)}function h(f){l("throw",f)}function d(f,p){f(p),o.shift(),o.length&&l(o[0][0],o[0][1])}}function e_(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof Kv=="function"?Kv(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=r[o]&&function(s){return new Promise(function(a,l){s=r[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(u){o({value:u,done:a})},s)}}var ku=r=>r&&typeof r.length=="number"&&typeof r!="function";function Bu(r){return oe(r?.then)}function Uu(r){return oe(r[po])}function ju(r){return Symbol.asyncIterator&&oe(r?.[Symbol.asyncIterator])}function Hu(r){return new TypeError(`You provided ${r!==null&&typeof r=="object"?"an invalid object":`'${r}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function YS(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Vu=YS();function $u(r){return oe(r?.[Vu])}function Gu(r){return Jv(this,arguments,function*(){let t=r.getReader();try{for(;;){let{value:n,done:i}=yield pi(t.read());if(i)return yield pi(void 0);yield yield pi(n)}}finally{t.releaseLock()}})}function zu(r){return oe(r?.getReader)}function rt(r){if(r instanceof Te)return r;if(r!=null){if(Uu(r))return ZS(r);if(ku(r))return KS(r);if(Bu(r))return QS(r);if(ju(r))return t_(r);if($u(r))return JS(r);if(zu(r))return eI(r)}throw Hu(r)}function ZS(r){return new Te(e=>{let t=r[po]();if(oe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function KS(r){return new Te(e=>{for(let t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()})}function QS(r){return new Te(e=>{r.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Ou)})}function JS(r){return new Te(e=>{for(let t of r)if(e.next(t),e.closed)return;e.complete()})}function t_(r){return new Te(e=>{tI(r,e).catch(t=>e.error(t))})}function eI(r){return t_(Gu(r))}function tI(r,e){var t,n,i,o;return Qv(this,void 0,void 0,function*(){try{for(t=e_(r);n=yield t.next(),!n.done;){let s=n.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{n&&!n.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Nt(r,e,t,n=0,i=!1){let o=e.schedule(function(){t(),i?r.add(this.schedule(null,n)):this.unsubscribe()},n);if(r.add(o),!i)return o}function Wu(r,e=0){return ge((t,n)=>{t.subscribe(ye(n,i=>Nt(n,r,()=>n.next(i),e),()=>Nt(n,r,()=>n.complete(),e),i=>Nt(n,r,()=>n.error(i),e)))})}function qu(r,e=0){return ge((t,n)=>{n.add(r.schedule(()=>t.subscribe(n),e))})}function r_(r,e){return rt(r).pipe(qu(e),Wu(e))}function n_(r,e){return rt(r).pipe(qu(e),Wu(e))}function i_(r,e){return new Te(t=>{let n=0;return e.schedule(function(){n===r.length?t.complete():(t.next(r[n++]),t.closed||this.schedule())})})}function o_(r,e){return new Te(t=>{let n;return Nt(t,e,()=>{n=r[Vu](),Nt(t,e,()=>{let i,o;try{({value:i,done:o}=n.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>oe(n?.return)&&n.return()})}function Xu(r,e){if(!r)throw new Error("Iterable cannot be null");return new Te(t=>{Nt(t,e,()=>{let n=r[Symbol.asyncIterator]();Nt(t,e,()=>{n.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function s_(r,e){return Xu(Gu(r),e)}function a_(r,e){if(r!=null){if(Uu(r))return r_(r,e);if(ku(r))return i_(r,e);if(Bu(r))return n_(r,e);if(ju(r))return Xu(r,e);if($u(r))return o_(r,e);if(zu(r))return s_(r,e)}throw Hu(r)}function Ye(r,e){return e?a_(r,e):rt(r)}function se(...r){let e=On(r);return Ye(r,e)}function yo(r,e){let t=oe(r)?r:()=>r,n=i=>i.error(t());return new Te(e?i=>e.schedule(n,0,i):n)}function Wd(r){return!!r&&(r instanceof Te||oe(r.lift)&&oe(r.subscribe))}var hn=uo(r=>function(){r(this),this.name="EmptyError",this.message="no elements in sequence"});function ve(r,e){return ge((t,n)=>{let i=0;t.subscribe(ye(n,o=>{n.next(r.call(e,o,i++))}))})}var{isArray:rI}=Array;function nI(r,e){return rI(e)?r(...e):r(e)}function l_(r){return ve(e=>nI(r,e))}var{isArray:iI}=Array,{getPrototypeOf:oI,prototype:sI,keys:aI}=Object;function u_(r){if(r.length===1){let e=r[0];if(iI(e))return{args:e,keys:null};if(lI(e)){let t=aI(e);return{args:t.map(n=>e[n]),keys:t}}}return{args:r,keys:null}}function lI(r){return r&&typeof r=="object"&&oI(r)===sI}function c_(r,e){return r.reduce((t,n,i)=>(t[n]=e[i],t),{})}function Yu(...r){let e=On(r),t=Zv(r),{args:n,keys:i}=u_(r);if(n.length===0)return Ye([],e);let o=new Te(uI(n,e,i?s=>c_(i,s):Vt));return t?o.pipe(l_(t)):o}function uI(r,e,t=Vt){return n=>{h_(e,()=>{let{length:i}=r,o=new Array(i),s=i,a=i;for(let l=0;l<i;l++)h_(e,()=>{let u=Ye(r[l],e),c=!1;u.subscribe(ye(n,h=>{o[l]=h,c||(c=!0,a--),a||n.next(t(o.slice()))},()=>{--s||n.complete()}))},n)},n)}}function h_(r,e,t){r?Nt(t,r,e):e()}function d_(r,e,t,n,i,o,s,a){let l=[],u=0,c=0,h=!1,d=()=>{h&&!l.length&&!u&&e.complete()},f=m=>u<n?p(m):l.push(m),p=m=>{o&&e.next(m),u++;let y=!1;rt(t(m,c++)).subscribe(ye(e,v=>{i?.(v),o?f(v):e.next(v)},()=>{y=!0},void 0,()=>{if(y)try{for(u--;l.length&&u<n;){let v=l.shift();s?Nt(e,s,()=>p(v)):p(v)}d()}catch(v){e.error(v)}}))};return r.subscribe(ye(e,f,()=>{h=!0,d()})),()=>{a?.()}}function Ze(r,e,t=1/0){return oe(e)?Ze((n,i)=>ve((o,s)=>e(n,o,i,s))(rt(r(n,i))),t):(typeof e=="number"&&(t=e),ge((n,i)=>d_(n,i,r,t)))}function qd(r=1/0){return Ze(Vt,r)}function f_(){return qd(1)}function vo(...r){return f_()(Ye(r,On(r)))}function Zu(r){return new Te(e=>{rt(r()).subscribe(e)})}function _r(r,e){return ge((t,n)=>{let i=0;t.subscribe(ye(n,o=>r.call(e,o,i++)&&n.next(o)))})}function Fn(r){return ge((e,t)=>{let n=null,i=!1,o;n=e.subscribe(ye(t,void 0,void 0,s=>{o=rt(r(s,Fn(r)(e))),n?(n.unsubscribe(),n=null,o.subscribe(t)):i=!0})),i&&(n.unsubscribe(),n=null,o.subscribe(t))})}function p_(r,e,t,n,i){return(o,s)=>{let a=t,l=e,u=0;o.subscribe(ye(s,c=>{let h=u++;l=a?r(l,c,h):(a=!0,c),n&&s.next(l)},i&&(()=>{a&&s.next(l),s.complete()})))}}function _o(r,e){return oe(e)?Ze(r,e,1):Ze(r,1)}function Ln(r){return ge((e,t)=>{let n=!1;e.subscribe(ye(t,i=>{n=!0,t.next(i)},()=>{n||t.next(r),t.complete()}))})}function dn(r){return r<=0?()=>$t:ge((e,t)=>{let n=0;e.subscribe(ye(t,i=>{++n<=r&&(t.next(i),r<=n&&t.complete())}))})}function Xd(r){return ve(()=>r)}function Ku(r=cI){return ge((e,t)=>{let n=!1;e.subscribe(ye(t,i=>{n=!0,t.next(i)},()=>n?t.complete():t.error(r())))})}function cI(){return new hn}function ta(r){return ge((e,t)=>{try{e.subscribe(t)}finally{t.add(r)}})}function kr(r,e){let t=arguments.length>=2;return n=>n.pipe(r?_r((i,o)=>r(i,o,n)):Vt,dn(1),t?Ln(e):Ku(()=>new hn))}function xo(r){return r<=0?()=>$t:ge((e,t)=>{let n=[];e.subscribe(ye(t,i=>{n.push(i),r<n.length&&n.shift()},()=>{for(let i of n)t.next(i);t.complete()},void 0,()=>{n=null}))})}function Yd(r,e){let t=arguments.length>=2;return n=>n.pipe(r?_r((i,o)=>r(i,o,n)):Vt,xo(1),t?Ln(e):Ku(()=>new hn))}function Zd(r,e){return ge(p_(r,e,arguments.length>=2,!0))}function Kd(...r){let e=On(r);return ge((t,n)=>{(e?vo(r,t,e):vo(r,t)).subscribe(n)})}function xr(r,e){return ge((t,n)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&n.complete();t.subscribe(ye(n,l=>{i?.unsubscribe();let u=0,c=o++;rt(r(l,c)).subscribe(i=ye(n,h=>n.next(e?e(l,h,c,u++):h),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Qd(r){return ge((e,t)=>{rt(r).subscribe(ye(t,()=>t.complete(),ea)),!t.closed&&e.subscribe(t)})}function ut(r,e,t){let n=oe(r)||e||t?{next:r,error:e,complete:t}:r;return n?ge((i,o)=>{var s;(s=n.subscribe)===null||s===void 0||s.call(n);let a=!0;i.subscribe(ye(o,l=>{var u;(u=n.next)===null||u===void 0||u.call(n,l),o.next(l)},()=>{var l;a=!1,(l=n.complete)===null||l===void 0||l.call(n),o.complete()},l=>{var u;a=!1,(u=n.error)===null||u===void 0||u.call(n,l),o.error(l)},()=>{var l,u;a&&((l=n.unsubscribe)===null||l===void 0||l.call(n)),(u=n.finalize)===null||u===void 0||u.call(n)}))}):Vt}var hI="https://g.co/ng/security#xss",ne=class extends Error{constructor(e,t){super(sp(e,t)),this.code=e}};function sp(r,e){return`${`NG0${Math.abs(r)}`}${e?": "+e:""}`}function ya(r){return{toString:r}.toString()}var Qu="__parameters__";function dI(r){return function(...t){if(r){let n=r(...t);for(let i in n)this[i]=n[i]}}}function Q_(r,e,t){return ya(()=>{let n=dI(e);function i(...o){if(this instanceof i)return n.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(l,u,c){let h=l.hasOwnProperty(Qu)?l[Qu]:Object.defineProperty(l,Qu,{value:[]})[Qu];for(;h.length<=c;)h.push(null);return(h[c]=h[c]||[]).push(s),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=r,i.annotationCls=i,i})}var ra=globalThis;function De(r){for(let e in r)if(r[e]===De)return e;throw Error("Could not find renamed property on target object.")}function Dt(r){if(typeof r=="string")return r;if(Array.isArray(r))return"["+r.map(Dt).join(", ")+"]";if(r==null)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;let e=r.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function m_(r,e){return r==null||r===""?e===null?"":e:e==null||e===""?r:r+" "+e}var fI=De({__forward_ref__:De});function J_(r){return r.__forward_ref__=J_,r.toString=function(){return Dt(this())},r}function ir(r){return e0(r)?r():r}function e0(r){return typeof r=="function"&&r.hasOwnProperty(fI)&&r.__forward_ref__===J_}function Q(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function wc(r){return{providers:r.providers||[],imports:r.imports||[]}}function Tc(r){return g_(r,r0)||g_(r,n0)}function t0(r){return Tc(r)!==null}function g_(r,e){return r.hasOwnProperty(e)?r[e]:null}function pI(r){let e=r&&(r[r0]||r[n0]);return e||null}function y_(r){return r&&(r.hasOwnProperty(v_)||r.hasOwnProperty(mI))?r[v_]:null}var r0=De({\u0275prov:De}),v_=De({\u0275inj:De}),n0=De({ngInjectableDef:De}),mI=De({ngInjectorDef:De}),pe=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Q({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function i0(r){return r&&!!r.\u0275providers}var gI=De({\u0275cmp:De}),yI=De({\u0275dir:De}),vI=De({\u0275pipe:De}),_I=De({\u0275mod:De}),ac=De({\u0275fac:De}),na=De({__NG_ELEMENT_ID__:De}),__=De({__NG_ENV_ID__:De});function o0(r){return typeof r=="string"?r:r==null?"":String(r)}function xI(r){return typeof r=="function"?r.name||r.toString():typeof r=="object"&&r!=null&&typeof r.type=="function"?r.type.name||r.type.toString():o0(r)}function EI(r,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${r}`:"";throw new ne(-200,r)}function ap(r,e){throw new ne(-201,!1)}var ce=function(r){return r[r.Default=0]="Default",r[r.Host=1]="Host",r[r.Self=2]="Self",r[r.SkipSelf=4]="SkipSelf",r[r.Optional=8]="Optional",r}(ce||{}),df;function s0(){return df}function nr(r){let e=df;return df=r,e}function a0(r,e,t){let n=Tc(r);if(n&&n.providedIn=="root")return n.value===void 0?n.value=n.factory():n.value;if(t&ce.Optional)return null;if(e!==void 0)return e;ap(r,"Injector")}var bI={},ia=bI,ff="__NG_DI_FLAG__",lc="ngTempTokenPath",wI="ngTokenPath",TI=/\n/gm,CI="\u0275",x_="__source",To;function DI(){return To}function kn(r){let e=To;return To=r,e}function SI(r,e=ce.Default){if(To===void 0)throw new ne(-203,!1);return To===null?a0(r,void 0,e):To.get(r,e&ce.Optional?null:void 0,e)}function ie(r,e=ce.Default){return(s0()||SI)(ir(r),e)}function z(r,e=ce.Default){return ie(r,Cc(e))}function Cc(r){return typeof r>"u"||typeof r=="number"?r:0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)}function pf(r){let e=[];for(let t=0;t<r.length;t++){let n=ir(r[t]);if(Array.isArray(n)){if(n.length===0)throw new ne(900,!1);let i,o=ce.Default;for(let s=0;s<n.length;s++){let a=n[s],l=II(a);typeof l=="number"?l===-1?i=a.token:o|=l:i=a}e.push(ie(i,o))}else e.push(ie(n))}return e}function l0(r,e){return r[ff]=e,r.prototype[ff]=e,r}function II(r){return r[ff]}function AI(r,e,t,n){let i=r[lc];throw e[x_]&&i.unshift(e[x_]),r.message=MI(`
`+r.message,i,t,n),r[wI]=i,r[lc]=null,r}function MI(r,e,t,n=null){r=r&&r.charAt(0)===`
`&&r.charAt(1)==CI?r.slice(2):r;let i=Dt(e);if(Array.isArray(e))i=e.map(Dt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Dt(a)))}i=`{${o.join(", ")}}`}return`${t}${n?"("+n+")":""}[${i}]: ${r.replace(TI,`
  `)}`}var lp=l0(Q_("Optional"),8);var u0=l0(Q_("SkipSelf"),4);function So(r,e){let t=r.hasOwnProperty(ac);return t?r[ac]:null}function RI(r,e,t){if(r.length!==e.length)return!1;for(let n=0;n<r.length;n++){let i=r[n],o=e[n];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function PI(r){return r.flat(Number.POSITIVE_INFINITY)}function up(r,e){r.forEach(t=>Array.isArray(t)?up(t,e):e(t))}function c0(r,e,t){e>=r.length?r.push(t):r.splice(e,0,t)}function uc(r,e){return e>=r.length-1?r.pop():r.splice(e,1)[0]}function NI(r,e){let t=[];for(let n=0;n<r;n++)t.push(e);return t}function OI(r,e,t,n){let i=r.length;if(i==e)r.push(t,n);else if(i===1)r.push(n,r[0]),r[0]=t;else{for(i--,r.push(r[i-1],r[i]);i>e;){let o=i-2;r[i]=r[o],i--}r[e]=t,r[e+1]=n}}function FI(r,e,t){let n=va(r,e);return n>=0?r[n|1]=t:(n=~n,OI(r,n,e,t)),n}function Jd(r,e){let t=va(r,e);if(t>=0)return r[t|1]}function va(r,e){return LI(r,e,1)}function LI(r,e,t){let n=0,i=r.length>>t;for(;i!==n;){let o=n+(i-n>>1),s=r[o<<t];if(e===s)return o<<t;s>e?i=o:n=o+1}return~(i<<t)}var oa={},br=[],Io=new pe(""),h0=new pe("",-1),d0=new pe(""),cc=class{get(e,t=ia){if(t===ia){let n=new Error(`NullInjectorError: No provider for ${Dt(e)}!`);throw n.name="NullInjectorError",n}return t}},f0=function(r){return r[r.OnPush=0]="OnPush",r[r.Default=1]="Default",r}(f0||{}),jr=function(r){return r[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",r}(jr||{}),Un=function(r){return r[r.None=0]="None",r[r.SignalBased=1]="SignalBased",r[r.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",r}(Un||{});function kI(r,e,t){let n=r.length;for(;;){let i=r.indexOf(e,t);if(i===-1)return i;if(i===0||r.charCodeAt(i-1)<=32){let o=e.length;if(i+o===n||r.charCodeAt(i+o)<=32)return i}t=i+1}}function mf(r,e,t){let n=0;for(;n<t.length;){let i=t[n];if(typeof i=="number"){if(i!==0)break;n++;let o=t[n++],s=t[n++],a=t[n++];r.setAttribute(e,s,a,o)}else{let o=i,s=t[++n];UI(o)?r.setProperty(e,o,s):r.setAttribute(e,o,s),n++}}return n}function BI(r){return r===3||r===4||r===6}function UI(r){return r.charCodeAt(0)===64}function cp(r,e){if(!(e===null||e.length===0))if(r===null||r.length===0)r=e.slice();else{let t=-1;for(let n=0;n<e.length;n++){let i=e[n];typeof i=="number"?t=i:t===0||(t===-1||t===2?E_(r,t,i,null,e[++n]):E_(r,t,i,null,null))}}return r}function E_(r,e,t,n,i){let o=0,s=r.length;if(e===-1)s=-1;else for(;o<r.length;){let a=r[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<r.length;){let a=r[o];if(typeof a=="number")break;if(a===t){if(n===null){i!==null&&(r[o+1]=i);return}else if(n===r[o+1]){r[o+2]=i;return}}o++,n!==null&&o++,i!==null&&o++}s!==-1&&(r.splice(s,0,e),o=s+1),r.splice(o++,0,t),n!==null&&r.splice(o++,0,n),i!==null&&r.splice(o++,0,i)}var p0="ng-template";function jI(r,e,t,n){let i=0;if(n){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&kI(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(hp(r))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function hp(r){return r.type===4&&r.value!==p0}function HI(r,e,t){let n=r.type===4&&!t?p0:r.value;return e===n}function VI(r,e,t){let n=4,i=r.attrs,o=i!==null?zI(i):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!Er(n)&&!Er(l))return!1;if(s&&Er(l))continue;s=!1,n=l|n&1;continue}if(!s)if(n&4){if(n=2|n&1,l!==""&&!HI(r,l,t)||l===""&&e.length===1){if(Er(n))return!1;s=!0}}else if(n&8){if(i===null||!jI(r,i,l,t)){if(Er(n))return!1;s=!0}}else{let u=e[++a],c=$I(l,i,hp(r),t);if(c===-1){if(Er(n))return!1;s=!0;continue}if(u!==""){let h;if(c>o?h="":h=i[c+1].toLowerCase(),n&2&&u!==h){if(Er(n))return!1;s=!0}}}}return Er(n)||s}function Er(r){return(r&1)===0}function $I(r,e,t,n){if(e===null)return-1;let i=0;if(n||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===r)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return WI(e,r)}function m0(r,e,t=!1){for(let n=0;n<e.length;n++)if(VI(r,e[n],t))return!0;return!1}function GI(r){let e=r.attrs;if(e!=null){let t=e.indexOf(5);if(!(t&1))return e[t+1]}return null}function zI(r){for(let e=0;e<r.length;e++){let t=r[e];if(BI(t))return e}return r.length}function WI(r,e){let t=r.indexOf(4);if(t>-1)for(t++;t<r.length;){let n=r[t];if(typeof n=="number")return-1;if(n===e)return t;t++}return-1}function qI(r,e){e:for(let t=0;t<e.length;t++){let n=e[t];if(r.length===n.length){for(let i=0;i<r.length;i++)if(r[i]!==n[i])continue e;return!0}}return!1}function b_(r,e){return r?":not("+e.trim()+")":e}function XI(r){let e=r[0],t=1,n=2,i="",o=!1;for(;t<r.length;){let s=r[t];if(typeof s=="string")if(n&2){let a=r[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else n&8?i+="."+s:n&4&&(i+=" "+s);else i!==""&&!Er(s)&&(e+=b_(o,i),i=""),n=s,o=o||!Er(n);t++}return i!==""&&(e+=b_(o,i)),e}function YI(r){return r.map(XI).join(",")}function ZI(r){let e=[],t=[],n=1,i=2;for(;n<r.length;){let o=r[n];if(typeof o=="string")i===2?o!==""&&e.push(o,r[++n]):i===8&&t.push(o);else{if(!Er(i))break;i=o}n++}return{attrs:e,classes:t}}function Ft(r){return ya(()=>{let e=x0(r),t=fe(S({},e),{decls:r.decls,vars:r.vars,template:r.template,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,onPush:r.changeDetection===f0.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&r.dependencies||null,getStandaloneInjector:null,signals:r.signals??!1,data:r.data||{},encapsulation:r.encapsulation||jr.Emulated,styles:r.styles||br,_:null,schemas:r.schemas||null,tView:null,id:""});E0(t);let n=r.dependencies;return t.directiveDefs=T_(n,!1),t.pipeDefs=T_(n,!0),t.id=JI(t),t})}function KI(r){return gi(r)||g0(r)}function QI(r){return r!==null}function Dc(r){return ya(()=>({type:r.type,bootstrap:r.bootstrap||br,declarations:r.declarations||br,imports:r.imports||br,exports:r.exports||br,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function w_(r,e){if(r==null)return oa;let t={};for(let n in r)if(r.hasOwnProperty(n)){let i=r[n],o,s,a=Un.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==Un.None?[n,a]:n,e[o]=s):t[o]=n}return t}function _a(r){return ya(()=>{let e=x0(r);return E0(e),e})}function gi(r){return r[gI]||null}function g0(r){return r[yI]||null}function y0(r){return r[vI]||null}function v0(r){let e=gi(r)||g0(r)||y0(r);return e!==null?e.standalone:!1}function _0(r,e){let t=r[_I]||null;if(!t&&e===!0)throw new Error(`Type ${Dt(r)} does not have '\u0275mod' property.`);return t}function x0(r){let e={};return{type:r.type,providersResolver:null,factory:null,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:r.inputs||oa,exportAs:r.exportAs||null,standalone:r.standalone===!0,signals:r.signals===!0,selectors:r.selectors||br,viewQuery:r.viewQuery||null,features:r.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:w_(r.inputs,e),outputs:w_(r.outputs),debugInfo:null}}function E0(r){r.features?.forEach(e=>e(r))}function T_(r,e){if(!r)return null;let t=e?y0:KI;return()=>(typeof r=="function"?r():r).map(n=>t(n)).filter(QI)}function JI(r){let e=0,t=[r.selectors,r.ngContentSelectors,r.hostVars,r.hostAttrs,r.consts,r.vars,r.decls,r.encapsulation,r.standalone,r.signals,r.exportAs,JSON.stringify(r.inputs),JSON.stringify(r.outputs),Object.getOwnPropertyNames(r.type.prototype),!!r.contentQueries,!!r.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Sc(r){return{\u0275providers:r}}function eA(...r){return{\u0275providers:b0(!0,r),\u0275fromNgModule:!0}}function b0(r,...e){let t=[],n=new Set,i,o=s=>{t.push(s)};return up(e,s=>{let a=s;gf(a,o,[],n)&&(i||=[],i.push(a))}),i!==void 0&&w0(i,o),t}function w0(r,e){for(let t=0;t<r.length;t++){let{ngModule:n,providers:i}=r[t];dp(i,o=>{e(o,n)})}}function gf(r,e,t,n){if(r=ir(r),!r)return!1;let i=null,o=y_(r),s=!o&&gi(r);if(!o&&!s){let l=r.ngModule;if(o=y_(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=r}let a=n.has(i);if(s){if(a)return!1;if(n.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of l)gf(u,e,t,n)}}else if(o){if(o.imports!=null&&!a){n.add(i);let u;try{up(o.imports,c=>{gf(c,e,t,n)&&(u||=[],u.push(c))})}finally{}u!==void 0&&w0(u,e)}if(!a){let u=So(i)||(()=>new i);e({provide:i,useFactory:u,deps:br},i),e({provide:d0,useValue:i,multi:!0},i),e({provide:Io,useValue:()=>ie(i),multi:!0},i)}let l=o.providers;if(l!=null&&!a){let u=r;dp(l,c=>{e(c,u)})}}else return!1;return i!==r&&r.providers!==void 0}function dp(r,e){for(let t of r)i0(t)&&(t=t.\u0275providers),Array.isArray(t)?dp(t,e):e(t)}var tA=De({provide:String,useValue:De});function T0(r){return r!==null&&typeof r=="object"&&tA in r}function rA(r){return!!(r&&r.useExisting)}function nA(r){return!!(r&&r.useFactory)}function yf(r){return typeof r=="function"}var Ic=new pe(""),ec={},iA={},ef;function fp(){return ef===void 0&&(ef=new cc),ef}var or=class{},sa=class extends or{get destroyed(){return this._destroyed}constructor(e,t,n,i){super(),this.parent=t,this.source=n,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,_f(e,s=>this.processProvider(s)),this.records.set(h0,Eo(void 0,this)),i.has("environment")&&this.records.set(or,Eo(void 0,this));let o=this.records.get(Ic);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(d0,br,ce.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=_e(null);try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of t)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),_e(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=kn(this),n=nr(void 0),i;try{return e()}finally{kn(t),nr(n)}}get(e,t=ia,n=ce.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(__))return e[__](this);n=Cc(n);let i,o=kn(this),s=nr(void 0);try{if(!(n&ce.SkipSelf)){let l=this.records.get(e);if(l===void 0){let u=cA(e)&&Tc(e);u&&this.injectableDefInScope(u)?l=Eo(vf(e),ec):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=n&ce.Self?fp():this.parent;return t=n&ce.Optional&&t===ia?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[lc]=a[lc]||[]).unshift(Dt(e)),o)throw a;return AI(a,e,"R3InjectorError",this.source)}else throw a}finally{nr(s),kn(o)}}resolveInjectorInitializers(){let e=_e(null),t=kn(this),n=nr(void 0),i;try{let o=this.get(Io,br,ce.Self);for(let s of o)s()}finally{kn(t),nr(n),_e(e)}}toString(){let e=[],t=this.records;for(let n of t.keys())e.push(Dt(n));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ne(205,!1)}processProvider(e){e=ir(e);let t=yf(e)?e:ir(e&&e.provide),n=sA(e);if(!yf(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Eo(void 0,ec,!0),i.factory=()=>pf(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,n)}hydrate(e,t){let n=_e(null);try{return t.value===ec&&(t.value=iA,t.value=t.factory()),typeof t.value=="object"&&t.value&&uA(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{_e(n)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=ir(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function vf(r){let e=Tc(r),t=e!==null?e.factory:So(r);if(t!==null)return t;if(r instanceof pe)throw new ne(204,!1);if(r instanceof Function)return oA(r);throw new ne(204,!1)}function oA(r){if(r.length>0)throw new ne(204,!1);let t=pI(r);return t!==null?()=>t.factory(r):()=>new r}function sA(r){if(T0(r))return Eo(void 0,r.useValue);{let e=aA(r);return Eo(e,ec)}}function aA(r,e,t){let n;if(yf(r)){let i=ir(r);return So(i)||vf(i)}else if(T0(r))n=()=>ir(r.useValue);else if(nA(r))n=()=>r.useFactory(...pf(r.deps||[]));else if(rA(r))n=()=>ie(ir(r.useExisting));else{let i=ir(r&&(r.useClass||r.provide));if(lA(r))n=()=>new i(...pf(r.deps));else return So(i)||vf(i)}return n}function Eo(r,e,t=!1){return{factory:r,value:e,multi:t?[]:void 0}}function lA(r){return!!r.deps}function uA(r){return r!==null&&typeof r=="object"&&typeof r.ngOnDestroy=="function"}function cA(r){return typeof r=="function"||typeof r=="object"&&r instanceof pe}function _f(r,e){for(let t of r)Array.isArray(t)?_f(t,e):t&&i0(t)?_f(t.\u0275providers,e):e(t)}function Ti(r,e){r instanceof sa&&r.assertNotDestroyed();let t,n=kn(r),i=nr(void 0);try{return e()}finally{kn(n),nr(i)}}function C0(){return s0()!==void 0||DI()!=null}function hA(r){if(!C0())throw new ne(-203,!1)}function dA(r){return typeof r=="function"}var gn=0,he=1,re=2,ct=3,wr=4,zt=5,aa=6,la=7,Hr=8,Ao=9,Vr=10,vt=11,ua=12,C_=13,xa=14,Tr=15,Ea=16,bo=17,fn=18,Ac=19,D0=20,Bn=21,tc=22,yi=23,pn=25,S0=1;var vi=7,hc=8,Mo=9,Gt=10,pp=function(r){return r[r.None=0]="None",r[r.HasTransplantedViews=2]="HasTransplantedViews",r}(pp||{});function Co(r){return Array.isArray(r)&&typeof r[S0]=="object"}function yn(r){return Array.isArray(r)&&r[S0]===!0}function I0(r){return(r.flags&4)!==0}function Mc(r){return r.componentOffset>-1}function mp(r){return(r.flags&1)===1}function ba(r){return!!r.template}function fA(r){return(r[re]&512)!==0}var xf=class{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}};function A0(r,e,t,n){e!==null?e.applyValueToInputSignal(e,n):r[t]=n}function Rc(){return M0}function M0(r){return r.type.prototype.ngOnChanges&&(r.setInput=mA),pA}Rc.ngInherit=!0;function pA(){let r=P0(this),e=r?.current;if(e){let t=r.previous;if(t===oa)r.previous=e;else for(let n in e)t[n]=e[n];r.current=null,this.ngOnChanges(e)}}function mA(r,e,t,n,i){let o=this.declaredInputs[n],s=P0(r)||gA(r,{previous:oa,current:null}),a=s.current||(s.current={}),l=s.previous,u=l[o];a[o]=new xf(u&&u.currentValue,t,l===oa),A0(r,e,i,t)}var R0="__ngSimpleChanges__";function P0(r){return r[R0]||null}function gA(r,e){return r[R0]=e}var D_=null;var Br=function(r,e,t){D_?.(r,e,t)},yA="svg",vA="math",_A=!1;function xA(){return _A}function $r(r){for(;Array.isArray(r);)r=r[gn];return r}function N0(r,e){return $r(e[r])}function Cr(r,e){return $r(e[r.index])}function O0(r,e){return r.data[e]}function Ci(r,e){let t=e[r];return Co(t)?t:t[gn]}function EA(r){return(r[re]&4)===4}function gp(r){return(r[re]&128)===128}function bA(r){return yn(r[ct])}function dc(r,e){return e==null?null:r[e]}function F0(r){r[bo]=0}function wA(r){r[re]&1024||(r[re]|=1024,gp(r)&&ca(r))}function yp(r){return!!(r[re]&9216||r[yi]?.dirty)}function Ef(r){r[Vr].changeDetectionScheduler?.notify(1),yp(r)?ca(r):r[re]&64&&(xA()?(r[re]|=1024,ca(r)):r[Vr].changeDetectionScheduler?.notify())}function ca(r){r[Vr].changeDetectionScheduler?.notify();let e=ha(r);for(;e!==null&&!(e[re]&8192||(e[re]|=8192,!gp(e)));)e=ha(e)}function L0(r,e){if((r[re]&256)===256)throw new ne(911,!1);r[Bn]===null&&(r[Bn]=[]),r[Bn].push(e)}function TA(r,e){if(r[Bn]===null)return;let t=r[Bn].indexOf(e);t!==-1&&r[Bn].splice(t,1)}function ha(r){let e=r[ct];return yn(e)?e[ct]:e}var me={lFrame:W0(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function CA(){return me.lFrame.elementDepthCount}function DA(){me.lFrame.elementDepthCount++}function SA(){me.lFrame.elementDepthCount--}function k0(){return me.bindingsEnabled}function B0(){return me.skipHydrationRootTNode!==null}function IA(r){return me.skipHydrationRootTNode===r}function AA(){me.skipHydrationRootTNode=null}function Re(){return me.lFrame.lView}function Dr(){return me.lFrame.tView}function vp(r){return me.lFrame.contextLView=r,r[Hr]}function _p(r){return me.lFrame.contextLView=null,r}function zr(){let r=U0();for(;r!==null&&r.type===64;)r=r.parent;return r}function U0(){return me.lFrame.currentTNode}function MA(){let r=me.lFrame,e=r.currentTNode;return r.isParent?e:e.parent}function wa(r,e){let t=me.lFrame;t.currentTNode=r,t.isParent=e}function j0(){return me.lFrame.isParent}function H0(){me.lFrame.isParent=!1}function RA(r){return me.lFrame.bindingIndex=r}function V0(){return me.lFrame.bindingIndex++}function PA(r){let e=me.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+r,t}function NA(){return me.lFrame.inI18n}function OA(r,e){let t=me.lFrame;t.bindingIndex=t.bindingRootIndex=r,bf(e)}function FA(){return me.lFrame.currentDirectiveIndex}function bf(r){me.lFrame.currentDirectiveIndex=r}function LA(r){let e=me.lFrame.currentDirectiveIndex;return e===-1?null:r[e]}function $0(){return me.lFrame.currentQueryIndex}function xp(r){me.lFrame.currentQueryIndex=r}function kA(r){let e=r[he];return e.type===2?e.declTNode:e.type===1?r[zt]:null}function G0(r,e,t){if(t&ce.SkipSelf){let i=e,o=r;for(;i=i.parent,i===null&&!(t&ce.Host);)if(i=kA(o),i===null||(o=o[xa],i.type&10))break;if(i===null)return!1;e=i,r=o}let n=me.lFrame=z0();return n.currentTNode=e,n.lView=r,!0}function Ep(r){let e=z0(),t=r[he];me.lFrame=e,e.currentTNode=t.firstChild,e.lView=r,e.tView=t,e.contextLView=r,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function z0(){let r=me.lFrame,e=r===null?null:r.child;return e===null?W0(r):e}function W0(r){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return r!==null&&(r.child=e),e}function q0(){let r=me.lFrame;return me.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}var X0=q0;function bp(){let r=q0();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function No(){return me.lFrame.selectedIndex}function _i(r){me.lFrame.selectedIndex=r}function BA(){let r=me.lFrame;return O0(r.tView,r.selectedIndex)}function UA(){return me.lFrame.currentNamespace}var Y0=!0;function wp(){return Y0}function Tp(r){Y0=r}function jA(r,e,t){let{ngOnChanges:n,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(n){let s=M0(e);(t.preOrderHooks??=[]).push(r,s),(t.preOrderCheckHooks??=[]).push(r,s)}i&&(t.preOrderHooks??=[]).push(0-r,i),o&&((t.preOrderHooks??=[]).push(r,o),(t.preOrderCheckHooks??=[]).push(r,o))}function Cp(r,e){for(let t=e.directiveStart,n=e.directiveEnd;t<n;t++){let o=r.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:c}=o;s&&(r.contentHooks??=[]).push(-t,s),a&&((r.contentHooks??=[]).push(t,a),(r.contentCheckHooks??=[]).push(t,a)),l&&(r.viewHooks??=[]).push(-t,l),u&&((r.viewHooks??=[]).push(t,u),(r.viewCheckHooks??=[]).push(t,u)),c!=null&&(r.destroyHooks??=[]).push(t,c)}}function rc(r,e,t){Z0(r,e,3,t)}function nc(r,e,t,n){(r[re]&3)===t&&Z0(r,e,t,n)}function tf(r,e){let t=r[re];(t&3)===e&&(t&=16383,t+=1,r[re]=t)}function Z0(r,e,t,n){let i=n!==void 0?r[bo]&65535:0,o=n??-1,s=e.length-1,a=0;for(let l=i;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],n!=null&&a>=n)break}else e[l]<0&&(r[bo]+=65536),(a<o||o==-1)&&(HA(r,t,e,l),r[bo]=(r[bo]&4294901760)+l+2),l++}function S_(r,e){Br(4,r,e);let t=_e(null);try{e.call(r)}finally{_e(t),Br(5,r,e)}}function HA(r,e,t,n){let i=t[n]<0,o=t[n+1],s=i?-t[n]:t[n],a=r[s];i?r[re]>>14<r[bo]>>16&&(r[re]&3)===e&&(r[re]+=16384,S_(a,o)):S_(a,o)}var Do=-1,da=class{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}};function VA(r){return r instanceof da}function $A(r){return(r.flags&8)!==0}function GA(r){return(r.flags&16)!==0}function K0(r){return r!==Do}function fc(r){return r&32767}function zA(r){return r>>16}function pc(r,e){let t=zA(r),n=e;for(;t>0;)n=n[xa],t--;return n}var wf=!0;function I_(r){let e=wf;return wf=r,e}var WA=256,Q0=WA-1,J0=5,qA=0,Ur={};function XA(r,e,t){let n;typeof t=="string"?n=t.charCodeAt(0)||0:t.hasOwnProperty(na)&&(n=t[na]),n==null&&(n=t[na]=qA++);let i=n&Q0,o=1<<i;e.data[r+(i>>J0)]|=o}function ex(r,e){let t=tx(r,e);if(t!==-1)return t;let n=e[he];n.firstCreatePass&&(r.injectorIndex=e.length,rf(n.data,r),rf(e,null),rf(n.blueprint,null));let i=Dp(r,e),o=r.injectorIndex;if(K0(i)){let s=fc(i),a=pc(i,e),l=a[he].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|l[s+u]}return e[o+8]=i,o}function rf(r,e){r.push(0,0,0,0,0,0,0,0,e)}function tx(r,e){return r.injectorIndex===-1||r.parent&&r.parent.injectorIndex===r.injectorIndex||e[r.injectorIndex+8]===null?-1:r.injectorIndex}function Dp(r,e){if(r.parent&&r.parent.injectorIndex!==-1)return r.parent.injectorIndex;let t=0,n=null,i=e;for(;i!==null;){if(n=sx(i),n===null)return Do;if(t++,i=i[xa],n.injectorIndex!==-1)return n.injectorIndex|t<<16}return Do}function YA(r,e,t){XA(r,e,t)}function rx(r,e,t){if(t&ce.Optional||r!==void 0)return r;ap(e,"NodeInjector")}function nx(r,e,t,n){if(t&ce.Optional&&n===void 0&&(n=null),!(t&(ce.Self|ce.Host))){let i=r[Ao],o=nr(void 0);try{return i?i.get(e,n,t&ce.Optional):a0(e,n,t&ce.Optional)}finally{nr(o)}}return rx(n,e,t)}function ix(r,e,t,n=ce.Default,i){if(r!==null){if(e[re]&2048&&!(n&ce.Self)){let s=JA(r,e,t,n,Ur);if(s!==Ur)return s}let o=ox(r,e,t,n,Ur);if(o!==Ur)return o}return nx(e,t,n,i)}function ox(r,e,t,n,i){let o=KA(t);if(typeof o=="function"){if(!G0(e,r,n))return n&ce.Host?rx(i,t,n):nx(e,t,n,i);try{let s;if(s=o(n),s==null&&!(n&ce.Optional))ap(t);else return s}finally{X0()}}else if(typeof o=="number"){let s=null,a=tx(r,e),l=Do,u=n&ce.Host?e[Tr][zt]:null;for((a===-1||n&ce.SkipSelf)&&(l=a===-1?Dp(r,e):e[a+8],l===Do||!M_(n,!1)?a=-1:(s=e[he],a=fc(l),e=pc(l,e)));a!==-1;){let c=e[he];if(A_(o,a,c.data)){let h=ZA(a,e,t,s,n,u);if(h!==Ur)return h}l=e[a+8],l!==Do&&M_(n,e[he].data[a+8]===u)&&A_(o,a,e)?(s=c,a=fc(l),e=pc(l,e)):a=-1}}return i}function ZA(r,e,t,n,i,o){let s=e[he],a=s.data[r+8],l=n==null?Mc(a)&&wf:n!=s&&(a.type&3)!==0,u=i&ce.Host&&o===a,c=ic(a,s,t,l,u);return c!==null?Ro(e,s,c,a):Ur}function ic(r,e,t,n,i){let o=r.providerIndexes,s=e.data,a=o&1048575,l=r.directiveStart,u=r.directiveEnd,c=o>>20,h=n?a:a+c,d=i?a+c:u;for(let f=h;f<d;f++){let p=s[f];if(f<l&&t===p||f>=l&&p.type===t)return f}if(i){let f=s[l];if(f&&ba(f)&&f.type===t)return l}return null}function Ro(r,e,t,n){let i=r[t],o=e.data;if(VA(i)){let s=i;s.resolving&&EI(xI(o[t]));let a=I_(s.canSeeViewProviders);s.resolving=!0;let l,u=s.injectImpl?nr(s.injectImpl):null,c=G0(r,n,ce.Default);try{i=r[t]=s.factory(void 0,o,r,n),e.firstCreatePass&&t>=n.directiveStart&&jA(t,o[t],e)}finally{u!==null&&nr(u),I_(a),s.resolving=!1,X0()}}return i}function KA(r){if(typeof r=="string")return r.charCodeAt(0)||0;let e=r.hasOwnProperty(na)?r[na]:void 0;return typeof e=="number"?e>=0?e&Q0:QA:e}function A_(r,e,t){let n=1<<r;return!!(t[e+(r>>J0)]&n)}function M_(r,e){return!(r&ce.Self)&&!(r&ce.Host&&e)}var mi=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,n){return ix(this._tNode,this._lView,e,Cc(n),t)}};function QA(){return new mi(zr(),Re())}function Sp(r){return ya(()=>{let e=r.prototype.constructor,t=e[ac]||Tf(e),n=Object.prototype,i=Object.getPrototypeOf(r.prototype).constructor;for(;i&&i!==n;){let o=i[ac]||Tf(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Tf(r){return e0(r)?()=>{let e=Tf(ir(r));return e&&e()}:So(r)}function JA(r,e,t,n,i){let o=r,s=e;for(;o!==null&&s!==null&&s[re]&2048&&!(s[re]&512);){let a=ox(o,s,t,n|ce.Self,Ur);if(a!==Ur)return a;let l=o.parent;if(!l){let u=s[D0];if(u){let c=u.get(t,Ur,n);if(c!==Ur)return c}l=sx(s),s=s[xa]}o=l}return i}function sx(r){let e=r[he],t=e.type;return t===2?e.declTNode:t===1?r[zt]:null}function R_(r,e=null,t=null,n){let i=ax(r,e,t,n);return i.resolveInjectorInitializers(),i}function ax(r,e=null,t=null,n,i=new Set){let o=[t||br,eA(r)];return n=n||(typeof r=="object"?void 0:Dt(r)),new sa(o,e||fp(),n||null,i)}var Oo=(()=>{class r{static{this.THROW_IF_NOT_FOUND=ia}static{this.NULL=new cc}static create(t,n){if(Array.isArray(t))return R_({name:""},n,t,"");{let i=t.name??"";return R_({name:i},t.parent,t.providers,i)}}static{this.\u0275prov=Q({token:r,providedIn:"any",factory:()=>ie(h0)})}static{this.__NG_ELEMENT_ID__=-1}}return r})();var eM="ngOriginalError";function nf(r){return r[eM]}var Gr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&nf(e);for(;t&&nf(t);)t=nf(t);return t||null}},lx=new pe("",{providedIn:"root",factory:()=>z(Gr).handleError.bind(void 0)}),Ta=(()=>{class r{static{this.__NG_ELEMENT_ID__=tM}static{this.__NG_ENV_ID__=t=>t}}return r})(),Cf=class extends Ta{constructor(e){super(),this._lView=e}onDestroy(e){return L0(this._lView,e),()=>TA(this._lView,e)}};function tM(){return new Cf(Re())}function rM(){return Fo(zr(),Re())}function Fo(r,e){return new Di(Cr(r,e))}var Di=(()=>{class r{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=rM}}return r})();function nM(r){return r instanceof Di?r.nativeElement:r}var Df=class extends Ct{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,C0()&&(this.destroyRef=z(Ta,{optional:!0})??void 0)}emit(e){let t=_e(null);try{super.next(e)}finally{_e(t)}}subscribe(e,t,n){let i=e,o=t||(()=>null),s=n;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=of(o),i&&(i=of(i)),s&&(s=of(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Xe&&e.add(a),a}};function of(r){return e=>{setTimeout(r,void 0,e)}}var Ot=Df;function iM(){return this._results[Symbol.iterator]()}var Sf=class r{get changes(){return this._changes??=new Ot}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let t=r.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=iM)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let n=PI(e);(this._changesDetected=!RI(this._results,n,t))&&(this._results=n,this.length=n.length,this.last=n[this.length-1],this.first=n[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function ux(r){return(r.flags&128)===128}var cx=new Map,oM=0;function sM(){return oM++}function aM(r){cx.set(r[Ac],r)}function lM(r){cx.delete(r[Ac])}var P_="__ngContext__";function xi(r,e){Co(e)?(r[P_]=e[Ac],aM(e)):r[P_]=e}function hx(r){return fx(r[ua])}function dx(r){return fx(r[wr])}function fx(r){for(;r!==null&&!yn(r);)r=r[wr];return r}var If;function px(r){If=r}function uM(){if(If!==void 0)return If;if(typeof document<"u")return document;throw new ne(210,!1)}var Ip=new pe("",{providedIn:"root",factory:()=>cM}),cM="ng",Ap=new pe(""),Lo=new pe("",{providedIn:"platform",factory:()=>"unknown"});var Mp=new pe("",{providedIn:"root",factory:()=>uM().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var hM="h",dM="b";var fM=()=>null;function Rp(r,e,t=!1){return fM(r,e,t)}var mx=!1,pM=new pe("",{providedIn:"root",factory:()=>mx});var Af=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${hI})`}};function Pp(r){return r instanceof Af?r.changingThisBreaksApplicationSecurity:r}function gx(r){return r instanceof Function?r():r}var mn=function(r){return r[r.Important=1]="Important",r[r.DashCase=2]="DashCase",r}(mn||{}),mM;function Np(r,e){return mM(r,e)}function wo(r,e,t,n,i){if(n!=null){let o,s=!1;yn(n)?o=n:Co(n)&&(s=!0,n=n[gn]);let a=$r(n);r===0&&t!==null?i==null?bx(e,t,a):mc(e,t,a,i||null,!0):r===1&&t!==null?mc(e,t,a,i||null,!0):r===2?MM(e,a,s):r===3&&e.destroyNode(a),o!=null&&PM(e,r,o,t,i)}}function gM(r,e){return r.createText(e)}function yM(r,e,t){r.setValue(e,t)}function yx(r,e,t){return r.createElement(e,t)}function vM(r,e){vx(r,e),e[gn]=null,e[zt]=null}function _M(r,e,t,n,i,o){n[gn]=i,n[zt]=e,Pc(r,n,t,1,i,o)}function vx(r,e){e[Vr].changeDetectionScheduler?.notify(1),Pc(r,e,e[vt],2,null,null)}function xM(r){let e=r[ua];if(!e)return sf(r[he],r);for(;e;){let t=null;if(Co(e))t=e[ua];else{let n=e[Gt];n&&(t=n)}if(!t){for(;e&&!e[wr]&&e!==r;)Co(e)&&sf(e[he],e),e=e[ct];e===null&&(e=r),Co(e)&&sf(e[he],e),t=e&&e[wr]}e=t}}function EM(r,e,t,n){let i=Gt+n,o=t.length;n>0&&(t[i-1][wr]=e),n<o-Gt?(e[wr]=t[i],c0(t,Gt+n,e)):(t.push(e),e[wr]=null),e[ct]=t;let s=e[Ea];s!==null&&t!==s&&bM(s,e);let a=e[fn];a!==null&&a.insertView(r),Ef(e),e[re]|=128}function bM(r,e){let t=r[Mo],i=e[ct][ct][Tr];e[Tr]!==i&&(r[re]|=pp.HasTransplantedViews),t===null?r[Mo]=[e]:t.push(e)}function _x(r,e){let t=r[Mo],n=t.indexOf(e);t.splice(n,1)}function Mf(r,e){if(r.length<=Gt)return;let t=Gt+e,n=r[t];if(n){let i=n[Ea];i!==null&&i!==r&&_x(i,n),e>0&&(r[t-1][wr]=n[wr]);let o=uc(r,Gt+e);vM(n[he],n);let s=o[fn];s!==null&&s.detachView(o[he]),n[ct]=null,n[wr]=null,n[re]&=-129}return n}function xx(r,e){if(!(e[re]&256)){let t=e[vt];t.destroyNode&&Pc(r,e,t,3,null,null),xM(e)}}function sf(r,e){if(e[re]&256)return;let t=_e(null);try{e[re]&=-129,e[re]|=256,e[yi]&&Fd(e[yi]),TM(r,e),wM(r,e),e[he].type===1&&e[vt].destroy();let n=e[Ea];if(n!==null&&yn(e[ct])){n!==e[ct]&&_x(n,e);let i=e[fn];i!==null&&i.detachView(r)}lM(e)}finally{_e(t)}}function wM(r,e){let t=r.cleanup,n=e[la];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?n[s]():n[-s].unsubscribe(),o+=2}else{let s=n[t[o+1]];t[o].call(s)}n!==null&&(e[la]=null);let i=e[Bn];if(i!==null){e[Bn]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function TM(r,e){let t;if(r!=null&&(t=r.destroyHooks)!=null)for(let n=0;n<t.length;n+=2){let i=e[t[n]];if(!(i instanceof da)){let o=t[n+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],l=o[s+1];Br(4,a,l);try{l.call(a)}finally{Br(5,a,l)}}else{Br(4,i,o);try{o.call(i)}finally{Br(5,i,o)}}}}}function Ex(r,e,t){return CM(r,e.parent,t)}function CM(r,e,t){let n=e;for(;n!==null&&n.type&40;)e=n,n=e.parent;if(n===null)return t[gn];{let{componentOffset:i}=n;if(i>-1){let{encapsulation:o}=r.data[n.directiveStart+i];if(o===jr.None||o===jr.Emulated)return null}return Cr(n,t)}}function mc(r,e,t,n,i){r.insertBefore(e,t,n,i)}function bx(r,e,t){r.appendChild(e,t)}function N_(r,e,t,n,i){n!==null?mc(r,e,t,n,i):bx(r,e,t)}function DM(r,e,t,n){r.removeChild(e,t,n)}function Op(r,e){return r.parentNode(e)}function SM(r,e){return r.nextSibling(e)}function wx(r,e,t){return AM(r,e,t)}function IM(r,e,t){return r.type&40?Cr(r,t):null}var AM=IM,O_;function Fp(r,e,t,n){let i=Ex(r,n,e),o=e[vt],s=n.parent||e[zt],a=wx(s,n,e);if(i!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)N_(o,i,t[l],a,!1);else N_(o,i,t,a,!1);O_!==void 0&&O_(o,n,e,t,i)}function oc(r,e){if(e!==null){let t=e.type;if(t&3)return Cr(e,r);if(t&4)return Rf(-1,r[e.index]);if(t&8){let n=e.child;if(n!==null)return oc(r,n);{let i=r[e.index];return yn(i)?Rf(-1,i):$r(i)}}else{if(t&32)return Np(e,r)()||$r(r[e.index]);{let n=Tx(r,e);if(n!==null){if(Array.isArray(n))return n[0];let i=ha(r[Tr]);return oc(i,n)}else return oc(r,e.next)}}}return null}function Tx(r,e){if(e!==null){let n=r[Tr][zt],i=e.projection;return n.projection[i]}return null}function Rf(r,e){let t=Gt+r+1;if(t<e.length){let n=e[t],i=n[he].firstChild;if(i!==null)return oc(n,i)}return e[vi]}function MM(r,e,t){let n=Op(r,e);n&&DM(r,n,e,t)}function Lp(r,e,t,n,i,o,s){for(;t!=null;){let a=n[t.index],l=t.type;if(s&&e===0&&(a&&xi($r(a),n),t.flags|=2),(t.flags&32)!==32)if(l&8)Lp(r,e,t.child,n,i,o,!1),wo(e,r,i,a,o);else if(l&32){let u=Np(t,n),c;for(;c=u();)wo(e,r,i,c,o);wo(e,r,i,a,o)}else l&16?Cx(r,e,n,t,i,o):wo(e,r,i,a,o);t=s?t.projectionNext:t.next}}function Pc(r,e,t,n,i,o){Lp(t,n,r.firstChild,e,i,o,!1)}function RM(r,e,t){let n=e[vt],i=Ex(r,t,e),o=t.parent||e[zt],s=wx(o,t,e);Cx(n,0,e,t,i,s)}function Cx(r,e,t,n,i,o){let s=t[Tr],l=s[zt].projection[n.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let c=l[u];wo(e,r,i,c,o)}else{let u=l,c=s[ct];ux(n)&&(u.flags|=128),Lp(r,e,u,c,i,o,!0)}}function PM(r,e,t,n,i){let o=t[vi],s=$r(t);o!==s&&wo(e,r,n,o,i);for(let a=Gt;a<t.length;a++){let l=t[a];Pc(l[he],l,r,e,n,o)}}function NM(r,e,t,n,i){if(e)i?r.addClass(t,n):r.removeClass(t,n);else{let o=n.indexOf("-")===-1?void 0:mn.DashCase;i==null?r.removeStyle(t,n,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=mn.Important),r.setStyle(t,n,i,o))}}function OM(r,e,t){r.setAttribute(e,"style",t)}function Dx(r,e,t){t===""?r.removeAttribute(e,"class"):r.setAttribute(e,"class",t)}function Sx(r,e,t){let{mergedAttrs:n,classes:i,styles:o}=t;n!==null&&mf(r,e,n),i!==null&&Dx(r,e,i),o!==null&&OM(r,e,o)}var ko={};function Bo(r=1){Ix(Dr(),Re(),No()+r,!1)}function Ix(r,e,t,n){if(!n)if((e[re]&3)===3){let o=r.preOrderCheckHooks;o!==null&&rc(e,o,t)}else{let o=r.preOrderHooks;o!==null&&nc(e,o,0,t)}_i(t)}function Ke(r,e=ce.Default){let t=Re();if(t===null)return ie(r,e);let n=zr();return ix(n,t,ir(r),e)}function Ax(r,e,t,n,i,o){let s=_e(null);try{let a=null;i&Un.SignalBased&&(a=e[n][cn]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Un.HasDecoratorInputTransform&&(o=r.inputTransforms[n].call(e,o)),r.setInput!==null?r.setInput(e,a,o,t,n):A0(e,a,n,o)}finally{_e(s)}}function FM(r,e){let t=r.hostBindingOpCodes;if(t!==null)try{for(let n=0;n<t.length;n++){let i=t[n];if(i<0)_i(~i);else{let o=i,s=t[++n],a=t[++n];OA(s,o);let l=e[o];a(2,l)}}}finally{_i(-1)}}function Nc(r,e,t,n,i,o,s,a,l,u,c){let h=e.blueprint.slice();return h[gn]=i,h[re]=n|4|128|8|64,(u!==null||r&&r[re]&2048)&&(h[re]|=2048),F0(h),h[ct]=h[xa]=r,h[Hr]=t,h[Vr]=s||r&&r[Vr],h[vt]=a||r&&r[vt],h[Ao]=l||r&&r[Ao]||null,h[zt]=o,h[Ac]=sM(),h[aa]=c,h[D0]=u,h[Tr]=e.type==2?r[Tr]:h,h}function Ca(r,e,t,n,i){let o=r.data[e];if(o===null)o=LM(r,e,t,n,i),NA()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=n,o.attrs=i;let s=MA();o.injectorIndex=s===null?-1:s.injectorIndex}return wa(o,!0),o}function LM(r,e,t,n,i){let o=U0(),s=j0(),a=s?o:o&&o.parent,l=r.data[e]=VM(r,a,t,e,n,i);return r.firstChild===null&&(r.firstChild=l),o!==null&&(s?o.child==null&&l.parent!==null&&(o.child=l):o.next===null&&(o.next=l,l.prev=o)),l}function Mx(r,e,t,n){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(n),r.blueprint.push(n),r.data.push(null);return i}function Rx(r,e,t,n,i){let o=No(),s=n&2;try{_i(-1),s&&e.length>pn&&Ix(r,e,pn,!1),Br(s?2:0,i),t(n,i)}finally{_i(o),Br(s?3:1,i)}}function Px(r,e,t){if(I0(e)){let n=_e(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=r.data[s];if(a.contentQueries){let l=t[s];a.contentQueries(1,l,s)}}}finally{_e(n)}}}function Nx(r,e,t){k0()&&(YM(r,e,t,Cr(t,e)),(t.flags&64)===64&&Bx(r,e,t))}function Ox(r,e,t=Cr){let n=e.localNames;if(n!==null){let i=e.index+1;for(let o=0;o<n.length;o+=2){let s=n[o+1],a=s===-1?t(e,r):r[s];r[i++]=a}}}function Fx(r){let e=r.tView;return e===null||e.incompleteFirstPass?r.tView=kp(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts,r.id):e}function kp(r,e,t,n,i,o,s,a,l,u,c){let h=pn+n,d=h+i,f=kM(h,d),p=typeof u=="function"?u():u;return f[he]={type:r,blueprint:f,template:t,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:c}}function kM(r,e){let t=[];for(let n=0;n<e;n++)t.push(n<r?null:ko);return t}function BM(r,e,t,n){let o=n.get(pM,mx)||t===jr.ShadowDom,s=r.selectRootElement(e,o);return UM(s),s}function UM(r){jM(r)}var jM=()=>null;function HM(r,e,t,n){let i=Hx(e);i.push(t),r.firstCreatePass&&Vx(r).push(n,i.length-1)}function VM(r,e,t,n,i,o){let s=e?e.injectorIndex:-1,a=0;return B0()&&(a|=128),{type:t,index:n,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function F_(r,e,t,n,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;n??={};let a,l=Un.None;Array.isArray(s)?(a=s[0],l=s[1]):a=s;let u=o;if(i!==null){if(!i.hasOwnProperty(o))continue;u=i[o]}r===0?L_(n,t,u,a,l):L_(n,t,u,a)}return n}function L_(r,e,t,n,i){let o;r.hasOwnProperty(t)?(o=r[t]).push(e,n):o=r[t]=[e,n],i!==void 0&&o.push(i)}function $M(r,e,t){let n=e.directiveStart,i=e.directiveEnd,o=r.data,s=e.attrs,a=[],l=null,u=null;for(let c=n;c<i;c++){let h=o[c],d=t?t.get(h):null,f=d?d.inputs:null,p=d?d.outputs:null;l=F_(0,h.inputs,c,l,f),u=F_(1,h.outputs,c,u,p);let m=l!==null&&s!==null&&!hp(e)?i1(l,c,s):null;a.push(m)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=u}function GM(r){return r==="class"?"className":r==="for"?"htmlFor":r==="formaction"?"formAction":r==="innerHtml"?"innerHTML":r==="readonly"?"readOnly":r==="tabindex"?"tabIndex":r}function zM(r,e,t,n,i,o,s,a){let l=Cr(e,t),u=e.inputs,c;!a&&u!=null&&(c=u[n])?(Bp(r,t,c,n,i),Mc(e)&&WM(t,e.index)):e.type&3?(n=GM(n),i=s!=null?s(i,e.value||"",n):i,o.setProperty(l,n,i)):e.type&12}function WM(r,e){let t=Ci(e,r);t[re]&16||(t[re]|=64)}function Lx(r,e,t,n){if(k0()){let i=n===null?null:{"":-1},o=KM(r,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&kx(r,e,t,s,i,a),i&&QM(t,n,i)}t.mergedAttrs=cp(t.mergedAttrs,t.attrs)}function kx(r,e,t,n,i,o){for(let u=0;u<n.length;u++)YA(ex(t,e),r,n[u].type);e1(t,r.data.length,n.length);for(let u=0;u<n.length;u++){let c=n[u];c.providersResolver&&c.providersResolver(c)}let s=!1,a=!1,l=Mx(r,e,n.length,null);for(let u=0;u<n.length;u++){let c=n[u];t.mergedAttrs=cp(t.mergedAttrs,c.hostAttrs),t1(r,t,e,l,c),JM(l,c,i),c.contentQueries!==null&&(t.flags|=4),(c.hostBindings!==null||c.hostAttrs!==null||c.hostVars!==0)&&(t.flags|=64);let h=c.type.prototype;!s&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((r.preOrderHooks??=[]).push(t.index),s=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((r.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}$M(r,t,o)}function qM(r,e,t,n,i){let o=i.hostBindings;if(o){let s=r.hostBindingOpCodes;s===null&&(s=r.hostBindingOpCodes=[]);let a=~e.index;XM(s)!=a&&s.push(a),s.push(t,n,o)}}function XM(r){let e=r.length;for(;e>0;){let t=r[--e];if(typeof t=="number"&&t<0)return t}return 0}function YM(r,e,t,n){let i=t.directiveStart,o=t.directiveEnd;Mc(t)&&r1(e,t,r.data[i+t.componentOffset]),r.firstCreatePass||ex(t,e),xi(n,e);let s=t.initialInputs;for(let a=i;a<o;a++){let l=r.data[a],u=Ro(e,r,a,t);if(xi(u,e),s!==null&&n1(e,a-i,u,l,t,s),ba(l)){let c=Ci(t.index,e);c[Hr]=Ro(e,r,a,t)}}}function Bx(r,e,t){let n=t.directiveStart,i=t.directiveEnd,o=t.index,s=FA();try{_i(o);for(let a=n;a<i;a++){let l=r.data[a],u=e[a];bf(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&ZM(l,u)}}finally{_i(-1),bf(s)}}function ZM(r,e){r.hostBindings!==null&&r.hostBindings(1,e)}function KM(r,e){let t=r.directiveRegistry,n=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(m0(e,s.selectors,!1))if(n||(n=[]),ba(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),n.unshift(...a,s);let l=a.length;Pf(r,e,l)}else n.unshift(s),Pf(r,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,n,i),n.push(s)}return n===null?null:[n,i]}function Pf(r,e,t){e.componentOffset=t,(r.components??=[]).push(e.index)}function QM(r,e,t){if(e){let n=r.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new ne(-301,!1);n.push(e[i],o)}}}function JM(r,e,t){if(t){if(e.exportAs)for(let n=0;n<e.exportAs.length;n++)t[e.exportAs[n]]=r;ba(e)&&(t[""]=r)}}function e1(r,e,t){r.flags|=1,r.directiveStart=e,r.directiveEnd=e+t,r.providerIndexes=e}function t1(r,e,t,n,i){r.data[n]=i;let o=i.factory||(i.factory=So(i.type,!0)),s=new da(o,ba(i),Ke);r.blueprint[n]=s,t[n]=s,qM(r,e,n,Mx(r,t,i.hostVars,ko),i)}function r1(r,e,t){let n=Cr(e,r),i=Fx(t),o=r[Vr].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=Oc(r,Nc(r,i,null,s,n,e,null,o.createRenderer(n,t),null,null,null));r[e.index]=a}function n1(r,e,t,n,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let l=s[a++],u=s[a++],c=s[a++],h=s[a++];Ax(n,t,l,u,c,h)}}function i1(r,e,t){let n=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(r.hasOwnProperty(o)){n===null&&(n=[]);let s=r[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){n.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return n}function Ux(r,e,t,n){return[r,!0,0,e,null,n,null,t,null,null]}function jx(r,e){let t=r.contentQueries;if(t!==null){let n=_e(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=r.data[s];xp(o),a.contentQueries(2,e[s],s)}}}finally{_e(n)}}}function Oc(r,e){return r[ua]?r[C_][wr]=e:r[ua]=e,r[C_]=e,e}function Nf(r,e,t){xp(0);let n=_e(null);try{e(r,t)}finally{_e(n)}}function Hx(r){return r[la]||(r[la]=[])}function Vx(r){return r.cleanup||(r.cleanup=[])}function $x(r,e){let t=r[Ao],n=t?t.get(Gr,null):null;n&&n.handleError(e)}function Bp(r,e,t,n,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],l=t[o++],u=e[s],c=r.data[s];Ax(c,u,n,a,l,i)}}function o1(r,e,t){let n=N0(e,r);yM(r[vt],n,t)}function s1(r,e){let t=Ci(e,r),n=t[he];a1(n,t);let i=t[gn];i!==null&&t[aa]===null&&(t[aa]=Rp(i,t[Ao])),Up(n,t,t[Hr])}function a1(r,e){for(let t=e.length;t<r.blueprint.length;t++)e.push(r.blueprint[t])}function Up(r,e,t){Ep(e);try{let n=r.viewQuery;n!==null&&Nf(1,n,t);let i=r.template;i!==null&&Rx(r,e,i,1,t),r.firstCreatePass&&(r.firstCreatePass=!1),e[fn]?.finishViewCreation(r),r.staticContentQueries&&jx(r,e),r.staticViewQueries&&Nf(2,r.viewQuery,t);let o=r.components;o!==null&&l1(e,o)}catch(n){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),n}finally{e[re]&=-5,bp()}}function l1(r,e){for(let t=0;t<e.length;t++)s1(r,e[t])}function u1(r,e,t,n){let i=_e(null);try{let o=e.tView,a=r[re]&4096?4096:16,l=Nc(r,o,t,a,null,e,null,null,n?.injector??null,n?.embeddedViewInjector??null,n?.dehydratedView??null),u=r[e.index];l[Ea]=u;let c=r[fn];return c!==null&&(l[fn]=c.createEmbeddedView(o)),Up(o,l,t),l}finally{_e(i)}}function k_(r,e){return!e||e.firstChild===null||ux(r)}function c1(r,e,t,n=!0){let i=e[he];if(EM(i,e,r,t),n){let s=Rf(t,r),a=e[vt],l=Op(a,r[vi]);l!==null&&_M(i,r[zt],a,e,l,s)}let o=e[aa];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function gc(r,e,t,n,i=!1){for(;t!==null;){let o=e[t.index];o!==null&&n.push($r(o)),yn(o)&&h1(o,n);let s=t.type;if(s&8)gc(r,e,t.child,n);else if(s&32){let a=Np(t,e),l;for(;l=a();)n.push(l)}else if(s&16){let a=Tx(e,t);if(Array.isArray(a))n.push(...a);else{let l=ha(e[Tr]);gc(l[he],l,a,n,!0)}}t=i?t.projectionNext:t.next}return n}function h1(r,e){for(let t=Gt;t<r.length;t++){let n=r[t],i=n[he].firstChild;i!==null&&gc(n[he],n,i,e)}r[vi]!==r[gn]&&e.push(r[vi])}var Gx=[];function d1(r){return r[yi]??f1(r)}function f1(r){let e=Gx.pop()??Object.create(m1);return e.lView=r,e}function p1(r){r.lView[yi]!==r&&(r.lView=null,Gx.push(r))}var m1=fe(S({},Qs),{consumerIsAlwaysLive:!0,consumerMarkedDirty:r=>{ca(r.lView)},consumerOnSignalRead(){this.lView[yi]=this}}),zx=100;function Wx(r,e=!0,t=0){let n=r[Vr],i=n.rendererFactory,o=!1;o||i.begin?.();try{g1(r,t)}catch(s){throw e&&$x(r,s),s}finally{o||(i.end?.(),n.inlineEffectRunner?.flush())}}function g1(r,e){Of(r,e);let t=0;for(;yp(r);){if(t===zx)throw new ne(103,!1);t++,Of(r,1)}}function y1(r,e,t,n){let i=e[re];if((i&256)===256)return;let o=!1;!o&&e[Vr].inlineEffectRunner?.flush(),Ep(e);let s=null,a=null;!o&&v1(r)&&(a=d1(e),s=Iu(a));try{F0(e),RA(r.bindingStartIndex),t!==null&&Rx(r,e,t,2,n);let l=(i&3)===3;if(!o)if(l){let h=r.preOrderCheckHooks;h!==null&&rc(e,h,null)}else{let h=r.preOrderHooks;h!==null&&nc(e,h,0,null),tf(e,0)}if(_1(e),qx(e,0),r.contentQueries!==null&&jx(r,e),!o)if(l){let h=r.contentCheckHooks;h!==null&&rc(e,h)}else{let h=r.contentHooks;h!==null&&nc(e,h,1),tf(e,1)}FM(r,e);let u=r.components;u!==null&&Yx(e,u,0);let c=r.viewQuery;if(c!==null&&Nf(2,c,n),!o)if(l){let h=r.viewCheckHooks;h!==null&&rc(e,h)}else{let h=r.viewHooks;h!==null&&nc(e,h,2),tf(e,2)}if(r.firstUpdatePass===!0&&(r.firstUpdatePass=!1),e[tc]){for(let h of e[tc])h();e[tc]=null}o||(e[re]&=-73)}catch(l){throw ca(e),l}finally{a!==null&&(Au(a,s),p1(a)),bp()}}function v1(r){return r.type!==2}function qx(r,e){for(let t=hx(r);t!==null;t=dx(t))for(let n=Gt;n<t.length;n++){let i=t[n];Xx(i,e)}}function _1(r){for(let e=hx(r);e!==null;e=dx(e)){if(!(e[re]&pp.HasTransplantedViews))continue;let t=e[Mo];for(let n=0;n<t.length;n++){let i=t[n],o=i[ct];wA(i)}}}function x1(r,e,t){let n=Ci(e,r);Xx(n,t)}function Xx(r,e){gp(r)&&Of(r,e)}function Of(r,e){let n=r[he],i=r[re],o=r[yi],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Mu(o)),o&&(o.dirty=!1),r[re]&=-9217,s)y1(n,r,n.template,r[Hr]);else if(i&8192){qx(r,1);let a=n.components;a!==null&&Yx(r,a,1)}}function Yx(r,e,t){for(let n=0;n<e.length;n++)x1(r,e[n],t)}function jp(r){for(r[Vr].changeDetectionScheduler?.notify();r;){r[re]|=64;let e=ha(r);if(fA(r)&&!e)return r;r=e}return null}var Ei=class{get rootNodes(){let e=this._lView,t=e[he];return gc(t,e,t.firstChild,[])}constructor(e,t,n=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Hr]}set context(e){this._lView[Hr]=e}get destroyed(){return(this._lView[re]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ct];if(yn(e)){let t=e[hc],n=t?t.indexOf(this):-1;n>-1&&(Mf(e,n),uc(t,n))}this._attachedToViewContainer=!1}xx(this._lView[he],this._lView)}onDestroy(e){L0(this._lView,e)}markForCheck(){jp(this._cdRefInjectingView||this._lView)}detach(){this._lView[re]&=-129}reattach(){Ef(this._lView),this._lView[re]|=128}detectChanges(){this._lView[re]|=1024,Wx(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ne(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,vx(this._lView[he],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ne(902,!1);this._appRef=e,Ef(this._lView)}},bi=(()=>{class r{static{this.__NG_ELEMENT_ID__=w1}}return r})(),E1=bi,b1=class extends E1{constructor(e,t,n){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=n}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,n){let i=u1(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:n});return new Ei(i)}};function w1(){return Hp(zr(),Re())}function Hp(r,e){return r.type&4?new b1(e,r,Fo(r,e)):null}var g$=new RegExp(`^(\\d+)*(${dM}|${hM})*(.*)`);var T1=()=>null;function B_(r,e){return T1(r,e)}var Ff=class{},Lf=class{},yc=class{};function C1(r){let e=Error(`No component factory found for ${Dt(r)}.`);return e[D1]=r,e}var D1="ngComponent";var kf=class{resolveComponentFactory(e){throw C1(e)}},Fc=(()=>{class r{static{this.NULL=new kf}}return r})(),fa=class{};var S1=(()=>{class r{static{this.\u0275prov=Q({token:r,providedIn:"root",factory:()=>null})}}return r})(),af={};var U_=new Set;function Da(r){U_.has(r)||(U_.add(r),performance?.mark?.("mark_feature_usage",{detail:{feature:r}}))}function j_(...r){}function I1(){let r=typeof ra.requestAnimationFrame=="function",e=ra[r?"requestAnimationFrame":"setTimeout"],t=ra[r?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&t){let n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);let i=t[Zone.__symbol__("OriginalDelegate")];i&&(t=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}var ze=class r{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ot(!1),this.onMicrotaskEmpty=new Ot(!1),this.onStable=new Ot(!1),this.onError=new Ot(!1),typeof Zone>"u")throw new ne(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!n&&t,i.shouldCoalesceRunChangeDetection=n,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=I1().nativeRequestAnimationFrame,R1(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!r.isInAngularZone())throw new ne(909,!1)}static assertNotInAngularZone(){if(r.isInAngularZone())throw new ne(909,!1)}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,A1,j_,j_);try{return o.runTask(s,t,n)}finally{o.cancelTask(s)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}},A1={};function Vp(r){if(r._nesting==0&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function M1(r){r.isCheckStableRunning||r.lastRequestAnimationFrameId!==-1||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(ra,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,Bf(r),r.isCheckStableRunning=!0,Vp(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),Bf(r))}function R1(r){let e=()=>{M1(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,n,i,o,s,a)=>{if(P1(a))return t.invokeTask(i,o,s,a);try{return H_(r),t.invokeTask(i,o,s,a)}finally{(r.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||r.shouldCoalesceRunChangeDetection)&&e(),V_(r)}},onInvoke:(t,n,i,o,s,a,l)=>{try{return H_(r),t.invoke(i,o,s,a,l)}finally{r.shouldCoalesceRunChangeDetection&&e(),V_(r)}},onHasTask:(t,n,i,o)=>{t.hasTask(i,o),n===i&&(o.change=="microTask"?(r._hasPendingMicrotasks=o.microTask,Bf(r),Vp(r)):o.change=="macroTask"&&(r.hasPendingMacrotasks=o.macroTask))},onHandleError:(t,n,i,o)=>(t.handleError(i,o),r.runOutsideAngular(()=>r.onError.emit(o)),!1)})}function Bf(r){r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&r.lastRequestAnimationFrameId!==-1?r.hasPendingMicrotasks=!0:r.hasPendingMicrotasks=!1}function H_(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function V_(r){r._nesting--,Vp(r)}function P1(r){return!Array.isArray(r)||r.length!==1?!1:r[0].data?.__ignore_ng_zone__===!0}var Zx=(()=>{class r{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let t=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let n of t)n()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=Q({token:r,providedIn:"root",factory:()=>new r})}}return r})();function Uf(r,e,t){let n=t?r.styles:null,i=t?r.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=m_(i,a);else if(o==2){let l=a,u=e[++s];n=m_(n,l+": "+u+";")}}t?r.styles=n:r.stylesWithoutHost=n,t?r.classes=i:r.classesWithoutHost=i}var vc=class extends Fc{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=gi(e);return new pa(t,this.ngModule)}};function $_(r){let e=[];for(let t in r){if(!r.hasOwnProperty(t))continue;let n=r[t];n!==void 0&&e.push({propName:Array.isArray(n)?n[0]:n,templateName:t})}return e}function N1(r){let e=r.toLowerCase();return e==="svg"?yA:e==="math"?vA:null}var jf=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,n){n=Cc(n);let i=this.injector.get(e,af,n);return i!==af||t===af?i:this.parentInjector.get(e,t,n)}},pa=class extends yc{get inputs(){let e=this.componentDef,t=e.inputTransforms,n=$_(e.inputs);if(t!==null)for(let i of n)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return n}get outputs(){return $_(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=YI(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,n,i){let o=_e(null);try{i=i||this.ngModule;let s=i instanceof or?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new jf(e,s):e,l=a.get(fa,null);if(l===null)throw new ne(407,!1);let u=a.get(S1,null),c=a.get(Zx,null),h=a.get(Ff,null),d={rendererFactory:l,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:c,changeDetectionScheduler:h},f=l.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",m=n?BM(f,n,this.componentDef.encapsulation,a):yx(f,p,N1(p)),y=512;this.componentDef.signals?y|=4096:this.componentDef.onPush||(y|=16);let v=null;m!==null&&(v=Rp(m,a,!0));let x=kp(0,null,null,1,0,null,null,null,null,null,null),g=Nc(null,x,null,y,null,null,d,f,a,null,v);Ep(g);let _,D;try{let N=this.componentDef,P,R=null;N.findHostDirectiveDefs?(P=[],R=new Map,N.findHostDirectiveDefs(N,P,R),P.push(N)):P=[N];let k=O1(g,m),$=F1(k,m,N,P,g,d,f);D=O0(x,pn),m&&B1(f,N,m,n),t!==void 0&&U1(D,this.ngContentSelectors,t),_=k1($,N,P,R,g,[j1]),Up(x,g,null)}finally{bp()}return new Hf(this.componentType,_,Fo(D,g),g,D)}finally{_e(o)}}},Hf=class extends Lf{constructor(e,t,n,i,o){super(),this.location=n,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Ei(i,void 0,!1),this.componentType=e}setInput(e,t){let n=this._tNode.inputs,i;if(n!==null&&(i=n[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;Bp(o[he],o,i,e,t),this.previousInputValues.set(e,t);let s=Ci(this._tNode.index,o);jp(s)}}get injector(){return new mi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function O1(r,e){let t=r[he],n=pn;return r[n]=e,Ca(t,n,2,"#host",null)}function F1(r,e,t,n,i,o,s){let a=i[he];L1(n,r,e,s);let l=null;e!==null&&(l=Rp(e,i[Ao]));let u=o.rendererFactory.createRenderer(e,t),c=16;t.signals?c=4096:t.onPush&&(c=64);let h=Nc(i,Fx(t),null,c,i[r.index],r,o,u,null,null,l);return a.firstCreatePass&&Pf(a,r,n.length-1),Oc(i,h),i[r.index]=h}function L1(r,e,t,n){for(let i of r)e.mergedAttrs=cp(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Uf(e,e.mergedAttrs,!0),t!==null&&Sx(n,t,e))}function k1(r,e,t,n,i,o){let s=zr(),a=i[he],l=Cr(s,i);kx(a,i,s,t,null,n);for(let c=0;c<t.length;c++){let h=s.directiveStart+c,d=Ro(i,a,h,s);xi(d,i)}Bx(a,i,s),l&&xi(l,i);let u=Ro(i,a,s.directiveStart+s.componentOffset,s);if(r[Hr]=i[Hr]=u,o!==null)for(let c of o)c(u,e);return Px(a,s,i),u}function B1(r,e,t,n){if(n)mf(r,t,["ng-version","17.3.12"]);else{let{attrs:i,classes:o}=ZI(e.selectors[0]);i&&mf(r,t,i),o&&o.length>0&&Dx(r,t,o.join(" "))}}function U1(r,e,t){let n=r.projection=[];for(let i=0;i<e.length;i++){let o=t[i];n.push(o!=null?Array.from(o):null)}}function j1(){let r=zr();Cp(Re()[he],r)}var Hn=(()=>{class r{static{this.__NG_ELEMENT_ID__=H1}}return r})();function H1(){let r=zr();return Qx(r,Re())}var V1=Hn,Kx=class extends V1{constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=n}get element(){return Fo(this._hostTNode,this._hostLView)}get injector(){return new mi(this._hostTNode,this._hostLView)}get parentInjector(){let e=Dp(this._hostTNode,this._hostLView);if(K0(e)){let t=pc(e,this._hostLView),n=fc(e),i=t[he].data[n+8];return new mi(i,t)}else return new mi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=G_(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Gt}createEmbeddedView(e,t,n){let i,o;typeof n=="number"?i=n:n!=null&&(i=n.index,o=n.injector);let s=B_(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,k_(this._hostTNode,s)),a}createComponent(e,t,n,i,o){let s=e&&!dA(e),a;if(s)a=t;else{let p=t||{};a=p.index,n=p.injector,i=p.projectableNodes,o=p.environmentInjector||p.ngModuleRef}let l=s?e:new pa(gi(e)),u=n||this.parentInjector;if(!o&&l.ngModule==null){let m=(s?u:this.parentInjector).get(or,null);m&&(o=m)}let c=gi(l.componentType??{}),h=B_(this._lContainer,c?.id??null),d=h?.firstChild??null,f=l.create(u,i,d,o);return this.insertImpl(f.hostView,a,k_(this._hostTNode,h)),f}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,n){let i=e._lView;if(bA(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[ct],u=new Kx(l,l[zt],l[ct]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return c1(s,i,o,n),e.attachToViewContainerRef(),c0(lf(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=G_(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),n=Mf(this._lContainer,t);n&&(uc(lf(this._lContainer),t),xx(n[he],n))}detach(e){let t=this._adjustIndex(e,-1),n=Mf(this._lContainer,t);return n&&uc(lf(this._lContainer),t)!=null?new Ei(n):null}_adjustIndex(e,t=0){return e??this.length+t}};function G_(r){return r[hc]}function lf(r){return r[hc]||(r[hc]=[])}function Qx(r,e){let t,n=e[r.index];return yn(n)?t=n:(t=Ux(n,e,null,r),e[r.index]=t,Oc(e,t)),G1(t,e,r,n),new Kx(t,r,e)}function $1(r,e){let t=r[vt],n=t.createComment(""),i=Cr(e,r),o=Op(t,i);return mc(t,o,n,SM(t,i),!1),n}var G1=q1,z1=()=>!1;function W1(r,e,t){return z1(r,e,t)}function q1(r,e,t,n){if(r[vi])return;let i;t.type&8?i=$r(n):i=$1(e,t),r[vi]=i}var Vf=class r{constructor(e){this.queryList=e,this.matches=null}clone(){return new r(this.queryList)}setDirty(){this.queryList.setDirty()}},$f=class r{constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let n=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<n;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new r(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)$p(e,t).matches!==null&&this.queries[t].setDirty()}},Gf=class{constructor(e,t,n=null){this.flags=t,this.read=n,typeof e=="string"?this.predicate=tR(e):this.predicate=e}},zf=class r{constructor(e=[]){this.queries=e}elementStart(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let n=0;n<this.length;n++){let i=t!==null?t.length:0,o=this.getByIndex(n).embeddedTView(e,i);o&&(o.indexInDeclarationView=n,t!==null?t.push(o):t=[o])}return t!==null?new r(t):null}template(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Wf=class r{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new r(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,n=e.parent;for(;n!==null&&n.type&8&&n.index!==t;)n=n.parent;return t===(n!==null?n.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let n=this.metadata.predicate;if(Array.isArray(n))for(let i=0;i<n.length;i++){let o=n[i];this.matchTNodeWithReadOption(e,t,X1(t,o)),this.matchTNodeWithReadOption(e,t,ic(t,e,o,!1,!1))}else n===bi?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,ic(t,e,n,!1,!1))}matchTNodeWithReadOption(e,t,n){if(n!==null){let i=this.metadata.read;if(i!==null)if(i===Di||i===Hn||i===bi&&t.type&4)this.addMatch(t.index,-2);else{let o=ic(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,n)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function X1(r,e){let t=r.localNames;if(t!==null){for(let n=0;n<t.length;n+=2)if(t[n]===e)return t[n+1]}return null}function Y1(r,e){return r.type&11?Fo(r,e):r.type&4?Hp(r,e):null}function Z1(r,e,t,n){return t===-1?Y1(e,r):t===-2?K1(r,e,n):Ro(r,r[he],t,e)}function K1(r,e,t){if(t===Di)return Fo(e,r);if(t===bi)return Hp(e,r);if(t===Hn)return Qx(e,r)}function Jx(r,e,t,n){let i=e[fn].queries[n];if(i.matches===null){let o=r.data,s=t.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let u=s[l];if(u<0)a.push(null);else{let c=o[u];a.push(Z1(e,c,s[l+1],t.metadata.read))}}i.matches=a}return i.matches}function qf(r,e,t,n){let i=r.queries.getByIndex(t),o=i.matches;if(o!==null){let s=Jx(r,e,i,t);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)n.push(s[a/2]);else{let u=o[a+1],c=e[-l];for(let h=Gt;h<c.length;h++){let d=c[h];d[Ea]===d[ct]&&qf(d[he],d,u,n)}if(c[Mo]!==null){let h=c[Mo];for(let d=0;d<h.length;d++){let f=h[d];qf(f[he],f,u,n)}}}}}return n}function Q1(r,e){return r[fn].queries[e].queryList}function J1(r,e,t){let n=new Sf((t&4)===4);return HM(r,e,n,n.destroy),(e[fn]??=new $f).queries.push(new Vf(n))-1}function eR(r,e,t){let n=Dr();return n.firstCreatePass&&(rR(n,new Gf(r,e,t),-1),(e&2)===2&&(n.staticViewQueries=!0)),J1(n,Re(),e)}function tR(r){return r.split(",").map(e=>e.trim())}function rR(r,e,t){r.queries===null&&(r.queries=new zf),r.queries.track(new Wf(e,t))}function $p(r,e){return r.queries.getByIndex(e)}function nR(r,e){let t=r[he],n=$p(t,e);return n.crossesNgTemplate?qf(t,r,e,[]):Jx(t,r,n,e)}function Vn(r,e){Da("NgSignals");let t=kv(r),n=t[cn];return e?.equal&&(n.equal=e.equal),t.set=i=>Ld(n,i),t.update=i=>Bv(n,i),t.asReadonly=iR.bind(t),t}function iR(){let r=this[cn];if(r.readonlyFn===void 0){let e=()=>this();e[cn]=r,r.readonlyFn=e}return r.readonlyFn}var jn=class{},ma=class{};var Xf=class extends jn{constructor(e,t,n){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new vc(this);let i=_0(e);this._bootstrapComponents=gx(i.bootstrap),this._r3Injector=ax(e,t,[{provide:jn,useValue:this},{provide:Fc,useValue:this.componentFactoryResolver},...n],Dt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Yf=class extends ma{constructor(e){super(),this.moduleType=e}create(e){return new Xf(this.moduleType,e,[])}};var _c=class extends jn{constructor(e){super(),this.componentFactoryResolver=new vc(this),this.instance=null;let t=new sa([...e.providers,{provide:jn,useValue:this},{provide:Fc,useValue:this.componentFactoryResolver}],e.parent||fp(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Gp(r,e,t=null){return new _c({providers:r,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var Sa=(()=>{class r{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new lt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Q({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function eE(r){return sR(r)?Array.isArray(r)||!(r instanceof Map)&&Symbol.iterator in r:!1}function oR(r,e){if(Array.isArray(r))for(let t=0;t<r.length;t++)e(r[t]);else{let t=r[Symbol.iterator](),n;for(;!(n=t.next()).done;)e(n.value)}}function sR(r){return r!==null&&(typeof r=="function"||typeof r=="object")}function zp(r,e,t){let n=r[e];return Object.is(n,t)?!1:(r[e]=t,!0)}function aR(r){return(r.flags&32)===32}function lR(r,e,t,n,i,o,s,a,l){let u=e.consts,c=Ca(e,r,4,s||null,dc(u,a));Lx(e,t,c,dc(u,l)),Cp(e,c);let h=c.tView=kp(2,c,n,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,c),h.queries=e.queries.embeddedTView(c)),c}function Ia(r,e,t,n,i,o,s,a){let l=Re(),u=Dr(),c=r+pn,h=u.firstCreatePass?lR(c,u,l,e,t,n,i,o,s):u.data[c];wa(h,!1);let d=uR(u,l,h,r);wp()&&Fp(u,l,d,h),xi(d,l);let f=Ux(d,l,d,h);return l[c]=f,Oc(l,f),W1(f,h,l),mp(h)&&Nx(u,l,h),s!=null&&Ox(l,h,a),Ia}var uR=cR;function cR(r,e,t,n){return Tp(!0),e[vt].createComment("")}function hR(r,e,t,n){return zp(r,V0(),t)?e+o0(t)+n:ko}function Ju(r,e){return r<<17|e<<2}function wi(r){return r>>17&32767}function dR(r){return(r&2)==2}function fR(r,e){return r&131071|e<<17}function Zf(r){return r|2}function Po(r){return(r&131068)>>2}function uf(r,e){return r&-131069|e<<2}function pR(r){return(r&1)===1}function Kf(r){return r|1}function mR(r,e,t,n,i,o){let s=o?e.classBindings:e.styleBindings,a=wi(s),l=Po(s);r[n]=t;let u=!1,c;if(Array.isArray(t)){let h=t;c=h[1],(c===null||va(h,c)>0)&&(u=!0)}else c=t;if(i)if(l!==0){let d=wi(r[a+1]);r[n+1]=Ju(d,a),d!==0&&(r[d+1]=uf(r[d+1],n)),r[a+1]=fR(r[a+1],n)}else r[n+1]=Ju(a,0),a!==0&&(r[a+1]=uf(r[a+1],n)),a=n;else r[n+1]=Ju(l,0),a===0?a=n:r[l+1]=uf(r[l+1],n),l=n;u&&(r[n+1]=Zf(r[n+1])),z_(r,c,n,!0),z_(r,c,n,!1),gR(e,c,r,n,o),s=Ju(a,l),o?e.classBindings=s:e.styleBindings=s}function gR(r,e,t,n,i){let o=i?r.residualClasses:r.residualStyles;o!=null&&typeof e=="string"&&va(o,e)>=0&&(t[n+1]=Kf(t[n+1]))}function z_(r,e,t,n){let i=r[t+1],o=e===null,s=n?wi(i):Po(i),a=!1;for(;s!==0&&(a===!1||o);){let l=r[s],u=r[s+1];yR(l,e)&&(a=!0,r[s+1]=n?Kf(u):Zf(u)),s=n?wi(u):Po(u)}a&&(r[t+1]=n?Zf(i):Kf(i))}function yR(r,e){return r===null||e==null||(Array.isArray(r)?r[1]:r)===e?!0:Array.isArray(r)&&typeof e=="string"?va(r,e)>=0:!1}function Si(r,e,t){let n=Re(),i=V0();if(zp(n,i,e)){let o=Dr(),s=BA();zM(o,s,n,r,e,n[vt],t,!1)}return Si}function W_(r,e,t,n,i){let o=e.inputs,s=i?"class":"style";Bp(r,t,o[s],s,n)}function Ii(r,e){return vR(r,e,null,!0),Ii}function vR(r,e,t,n){let i=Re(),o=Dr(),s=PA(2);if(o.firstUpdatePass&&xR(o,r,s,n),e!==ko&&zp(i,s,e)){let a=o.data[No()];CR(o,a,i,i[vt],r,i[s+1]=DR(e,t),n,s)}}function _R(r,e){return e>=r.expandoStartIndex}function xR(r,e,t,n){let i=r.data;if(i[t+1]===null){let o=i[No()],s=_R(r,t);SR(o,n)&&e===null&&!s&&(e=!1),e=ER(i,o,e,n),mR(i,o,e,t,s,n)}}function ER(r,e,t,n){let i=LA(r),o=n?e.residualClasses:e.residualStyles;if(i===null)(n?e.classBindings:e.styleBindings)===0&&(t=cf(null,r,e,t,n),t=ga(t,e.attrs,n),o=null);else{let s=e.directiveStylingLast;if(s===-1||r[s]!==i)if(t=cf(i,r,e,t,n),o===null){let l=bR(r,e,n);l!==void 0&&Array.isArray(l)&&(l=cf(null,r,e,l[1],n),l=ga(l,e.attrs,n),wR(r,e,n,l))}else o=TR(r,e,n)}return o!==void 0&&(n?e.residualClasses=o:e.residualStyles=o),t}function bR(r,e,t){let n=t?e.classBindings:e.styleBindings;if(Po(n)!==0)return r[wi(n)]}function wR(r,e,t,n){let i=t?e.classBindings:e.styleBindings;r[wi(i)]=n}function TR(r,e,t){let n,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=r[o].hostAttrs;n=ga(n,s,t)}return ga(n,e.attrs,t)}function cf(r,e,t,n,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],n=ga(n,o.hostAttrs,i),o!==r);)a++;return r!==null&&(t.directiveStylingLast=a),n}function ga(r,e,t){let n=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===n&&(Array.isArray(r)||(r=r===void 0?[]:["",r]),FI(r,s,t?!0:e[++o]))}return r===void 0?null:r}function CR(r,e,t,n,i,o,s,a){if(!(e.type&3))return;let l=r.data,u=l[a+1],c=pR(u)?q_(l,e,t,i,Po(u),s):void 0;if(!xc(c)){xc(o)||dR(u)&&(o=q_(l,null,t,i,a,s));let h=N0(No(),t);NM(n,s,h,i,o)}}function q_(r,e,t,n,i,o){let s=e===null,a;for(;i>0;){let l=r[i],u=Array.isArray(l),c=u?l[1]:l,h=c===null,d=t[i+1];d===ko&&(d=h?br:void 0);let f=h?Jd(d,n):c===n?d:void 0;if(u&&!xc(f)&&(f=Jd(l,n)),xc(f)&&(a=f,s))return a;let p=r[i+1];i=s?wi(p):Po(p)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=Jd(l,n))}return a}function xc(r){return r!==void 0}function DR(r,e){return r==null||r===""||(typeof e=="string"?r=r+e:typeof r=="object"&&(r=Dt(Pp(r)))),r}function SR(r,e){return(r.flags&(e?8:16))!==0}function IR(r,e,t,n,i,o){let s=e.consts,a=dc(s,i),l=Ca(e,r,2,n,a);return Lx(e,t,l,dc(s,o)),l.attrs!==null&&Uf(l,l.attrs,!1),l.mergedAttrs!==null&&Uf(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function ke(r,e,t,n){let i=Re(),o=Dr(),s=pn+r,a=i[vt],l=o.firstCreatePass?IR(s,o,i,e,t,n):o.data[s],u=AR(o,i,l,a,e,r);i[s]=u;let c=mp(l);return wa(l,!0),Sx(a,u,l),!aR(l)&&wp()&&Fp(o,i,u,l),CA()===0&&xi(u,i),DA(),c&&(Nx(o,i,l),Px(o,l,i)),n!==null&&Ox(i,l),ke}function je(){let r=zr();j0()?H0():(r=r.parent,wa(r,!1));let e=r;IA(e)&&AA(),SA();let t=Dr();return t.firstCreatePass&&(Cp(t,r),I0(r)&&t.queries.elementEnd(r)),e.classesWithoutHost!=null&&$A(e)&&W_(t,e,Re(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&GA(e)&&W_(t,e,Re(),e.stylesWithoutHost,!1),je}function Sr(r,e,t,n){return ke(r,e,t,n),je(),Sr}var AR=(r,e,t,n,i,o)=>(Tp(!0),yx(n,i,UA()));function tE(){return Re()}var Ec="en-US";var MR=Ec;function RR(r){typeof r=="string"&&(MR=r.toLowerCase().replace(/_/g,"-"))}function ht(r,e,t,n){let i=Re(),o=Dr(),s=zr();return NR(o,i,i[vt],s,r,e,n),ht}function PR(r,e,t,n){let i=r.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===n){let a=e[la],l=i[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function NR(r,e,t,n,i,o,s){let a=mp(n),u=r.firstCreatePass&&Vx(r),c=e[Hr],h=Hx(e),d=!0;if(n.type&3||s){let m=Cr(n,e),y=s?s(m):m,v=h.length,x=s?_=>s($r(_[n.index])):n.index,g=null;if(!s&&a&&(g=PR(r,e,i,n.index)),g!==null){let _=g.__ngLastListenerFn__||g;_.__ngNextListenerFn__=o,g.__ngLastListenerFn__=o,d=!1}else{o=Y_(n,e,c,o,!1);let _=t.listen(y,i,o);h.push(o,_),u&&u.push(i,x,v,v+1)}}else o=Y_(n,e,c,o,!1);let f=n.outputs,p;if(d&&f!==null&&(p=f[i])){let m=p.length;if(m)for(let y=0;y<m;y+=2){let v=p[y],x=p[y+1],D=e[v][x].subscribe(o),N=h.length;h.push(o,D),u&&u.push(i,n.index,N,-(N+1))}}}function X_(r,e,t,n){let i=_e(null);try{return Br(6,e,t),t(n)!==!1}catch(o){return $x(r,o),!1}finally{Br(7,e,t),_e(i)}}function Y_(r,e,t,n,i){return function o(s){if(s===Function)return n;let a=r.componentOffset>-1?Ci(r.index,e):e;jp(a);let l=X_(e,t,n,s),u=o.__ngNextListenerFn__;for(;u;)l=X_(e,t,u,s)&&l,u=u.__ngNextListenerFn__;return i&&l===!1&&s.preventDefault(),l}}function OR(r,e){let t=null,n=GI(r);for(let i=0;i<e.length;i++){let o=e[i];if(o==="*"){t=i;continue}if(n===null?m0(r,o,!0):qI(n,o))return i}return t}function rE(r){let e=Re()[Tr][zt];if(!e.projection){let t=r?r.length:1,n=e.projection=NI(t,null),i=n.slice(),o=e.child;for(;o!==null;){let s=r?OR(o,r):0;s!==null&&(i[s]?i[s].projectionNext=o:n[s]=o,i[s]=o),o=o.next}}}function nE(r,e=0,t){let n=Re(),i=Dr(),o=Ca(i,pn+r,16,null,t||null);o.projection===null&&(o.projection=e),H0(),(!n[aa]||B0())&&(o.flags&32)!==32&&RM(i,n,o)}function iE(r,e,t){eR(r,e,t)}function Wp(r){let e=Re(),t=Dr(),n=$0();xp(n+1);let i=$p(t,n);if(r.dirty&&EA(e)===((i.metadata.flags&2)===2)){if(i.matches===null)r.reset([]);else{let o=nR(e,n);r.reset(o,nM),r.notifyOnChanges()}return!0}return!1}function qp(){return Q1(Re(),$0())}function sr(r,e=""){let t=Re(),n=Dr(),i=r+pn,o=n.firstCreatePass?Ca(n,i,1,e,null):n.data[i],s=FR(n,t,o,e,r);t[i]=s,wp()&&Fp(n,t,s,o),wa(o,!1)}var FR=(r,e,t,n,i)=>(Tp(!0),gM(e[vt],n));function Xp(r,e,t){let n=Re(),i=hR(n,r,e,t);return i!==ko&&o1(n,No(),i),Xp}var LR=(()=>{class r{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let n=b0(!1,t.type),i=n.length>0?Gp([n],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=Q({token:r,providedIn:"environment",factory:()=>new r(ie(or))})}}return r})();function Lt(r){Da("NgStandalone"),r.getStandaloneInjector=e=>e.get(LR).getOrCreateStandaloneInjector(r)}var Lc=(()=>{class r{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Q({token:r,factory:r.\u0275fac,providedIn:"platform"})}}return r})();var oE=new pe("");function Aa(r){return!!r&&typeof r.then=="function"}function sE(r){return!!r&&typeof r.subscribe=="function"}var aE=new pe(""),lE=(()=>{class r{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,n)=>{this.resolve=t,this.reject=n}),this.appInits=z(aE,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(Aa(o))t.push(o);else if(sE(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});t.push(s)}}let n=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{n()}).catch(i=>{this.reject(i)}),t.length===0&&n(),this.initialized=!0}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Q({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),Yp=new pe("");function kR(){Lv(()=>{throw new ne(600,!1)})}function BR(r){return r.isBoundToModule}function UR(r,e,t){try{let n=t();return Aa(n)?n.catch(i=>{throw e.runOutsideAngular(()=>r.handleError(i)),i}):n}catch(n){throw e.runOutsideAngular(()=>r.handleError(n)),n}}var Ma=(()=>{class r{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=z(lx),this.afterRenderEffectManager=z(Zx),this.externalTestViews=new Set,this.beforeRender=new Ct,this.afterTick=new Ct,this.componentTypes=[],this.components=[],this.isStable=z(Sa).hasPendingTasks.pipe(ve(t=>!t)),this._injector=z(or)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,n){let i=t instanceof yc;if(!this._injector.get(lE).done){let d=!i&&v0(t),f=!1;throw new ne(405,f)}let s;i?s=t:s=this._injector.get(Fc).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=BR(s)?void 0:this._injector.get(jn),l=n||s.selector,u=s.create(Oo.NULL,[],l,a),c=u.location.nativeElement,h=u.injector.get(oE,null);return h?.registerApplication(c),u.onDestroy(()=>{this.detachView(u.hostView),hf(this.components,u),h?.unregisterApplication(c)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(t){if(this._runningTick)throw new ne(101,!1);let n=_e(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(t)}catch(i){this.internalErrorHandler(i)}finally{this.afterTick.next(),this._runningTick=!1,_e(n)}}detectChangesInAttachedViews(t){let n=0,i=this.afterRenderEffectManager;for(;;){if(n===zx)throw new ne(103,!1);if(t){let o=n===0;this.beforeRender.next(o);for(let{_lView:s,notifyErrorHandler:a}of this._views)jR(s,o,a)}if(n++,i.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Qf(o))&&(i.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Qf(o))))break}}attachView(t){let n=t;this._views.push(n),n.attachToAppRef(this)}detachView(t){let n=t;hf(this._views,n),n.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let n=this._injector.get(Yp,[]);[...this._bootstrapListeners,...n].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>hf(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ne(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Q({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function hf(r,e){let t=r.indexOf(e);t>-1&&r.splice(t,1)}function jR(r,e,t){!e&&!Qf(r)||HR(r,t,e)}function Qf(r){return yp(r)}function HR(r,e,t){let n;t?(n=0,r[re]|=1024):r[re]&64?n=0:n=1,Wx(r,e,n)}var Jf=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Zp=(()=>{class r{compileModuleSync(t){return new Yf(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let n=this.compileModuleSync(t),i=_0(t),o=gx(i.declarations).reduce((s,a)=>{let l=gi(a);return l&&s.push(new pa(l)),s},[]);return new Jf(n,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Q({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var VR=(()=>{class r{constructor(){this.zone=z(ze),this.applicationRef=z(Ma)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Q({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function $R(r){return[{provide:ze,useFactory:r},{provide:Io,multi:!0,useFactory:()=>{let e=z(VR,{optional:!0});return()=>e.initialize()}},{provide:Io,multi:!0,useFactory:()=>{let e=z(qR);return()=>{e.initialize()}}},{provide:lx,useFactory:GR}]}function GR(){let r=z(ze),e=z(Gr);return t=>r.runOutsideAngular(()=>e.handleError(t))}function zR(r){let e=$R(()=>new ze(WR(r)));return Sc([[],e])}function WR(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:r?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:r?.runCoalescing??!1}}var qR=(()=>{class r{constructor(){this.subscription=new Xe,this.initialized=!1,this.zone=z(ze),this.pendingTasks=z(Sa)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ze.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ze.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Q({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function XR(){return typeof $localize<"u"&&$localize.locale||Ec}var Kp=new pe("",{providedIn:"root",factory:()=>z(Kp,ce.Optional|ce.SkipSelf)||XR()});var uE=new pe("");var sc=null;function YR(r=[],e){return Oo.create({name:e,providers:[{provide:Ic,useValue:"platform"},{provide:uE,useValue:new Set([()=>sc=null])},...r]})}function ZR(r=[]){if(sc)return sc;let e=YR(r);return sc=e,kR(),KR(e),e}function KR(r){r.get(Ap,null)?.forEach(t=>t())}var Uo=(()=>{class r{static{this.__NG_ELEMENT_ID__=QR}}return r})();function QR(r){return JR(zr(),Re(),(r&16)===16)}function JR(r,e,t){if(Mc(r)&&!t){let n=Ci(r.index,e);return new Ei(n,n)}else if(r.type&47){let n=e[Tr];return new Ei(n,e)}return null}var ep=class{constructor(){}supports(e){return eE(e)}create(e){return new tp(e)}},eP=(r,e)=>e,tp=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||eP}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,i=0,o=null;for(;t||n;){let s=!n||t&&t.currentIndex<Z_(n,i,o)?t:n,a=Z_(s,i,o),l=s.currentIndex;if(s===n)i--,n=n._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,c=l-i;if(u!=c){for(let d=0;d<u;d++){let f=d<o.length?o[d]:o[d]=0,p=f+d;c<=p&&p<u&&(o[d]=f+1)}let h=s.previousIndex;o[h]=c-u}}a!==l&&e(s,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!eE(e))throw new ne(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,n=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),n=!0):(n&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,oR(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),n=!0):(n&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(n,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(n,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new rp(t,n),o,i)),e}_verifyReinsertion(e,t,n,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(n,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new bc),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,n=e._next;return t===null?this._itHead=n:t._next=n,n===null?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new bc),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},rp=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},np=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;n!==null;n=n._nextDup)if((t===null||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){let t=e._prevDup,n=e._nextDup;return t===null?this._head=n:t._nextDup=n,n===null?this._tail=t:n._prevDup=t,this._head===null}},bc=class{constructor(){this.map=new Map}put(e){let t=e.trackById,n=this.map.get(t);n||(n=new np,this.map.set(t,n)),n.add(e)}get(e,t){let n=e,i=this.map.get(n);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Z_(r,e,t){let n=r.previousIndex;if(n===null)return n;let i=0;return t&&n<t.length&&(i=t[n]),n+e+i}function K_(){return new Qp([new ep])}var Qp=(()=>{class r{static{this.\u0275prov=Q({token:r,providedIn:"root",factory:K_})}constructor(t){this.factories=t}static create(t,n){if(n!=null){let i=n.factories.slice();t=t.concat(i)}return new r(t)}static extend(t){return{provide:r,useFactory:n=>r.create(t,n||K_()),deps:[[r,new u0,new lp]]}}find(t){let n=this.factories.find(i=>i.supports(t));if(n!=null)return n;throw new ne(901,!1)}}return r})();function cE(r){try{let{rootComponent:e,appProviders:t,platformProviders:n}=r,i=ZR(n),o=[zR(),...t||[]],a=new _c({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get(ze);return l.run(()=>{a.resolveInjectorInitializers();let u=a.get(Gr,null),c;l.runOutsideAngular(()=>{c=l.onError.subscribe({next:f=>{u.handleError(f)}})});let h=()=>a.destroy(),d=i.get(uE);return d.add(h),a.onDestroy(()=>{c.unsubscribe(),d.delete(h)}),UR(u,l,()=>{let f=a.get(lE);return f.runInitializers(),f.donePromise.then(()=>{let p=a.get(Kp,Ec);RR(p||Ec);let m=a.get(Ma);return e!==void 0&&m.bootstrap(e),m})})})}catch(e){return Promise.reject(e)}}function Ai(r,e){Da("NgSignals");let t=Nv(r);return e?.equal&&(t[cn].equal=e.equal),t}var tP=new pe("",{providedIn:"root",factory:()=>z(rP)}),rP=(()=>{class r{static{this.\u0275prov=Q({token:r,providedIn:"root",factory:()=>new ip})}}return r})(),ip=class{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=z(Sa),this.taskId=null}scheduleEffect(e){if(this.enqueue(e),this.taskId===null){let t=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(t),this.taskId=null})}}enqueue(e){let t=e.creationZone;this.queues.has(t)||this.queues.set(t,new Set);let n=this.queues.get(t);n.has(e)||(this.queuedEffectCount++,n.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}},op=class{constructor(e,t,n,i,o,s){this.scheduler=e,this.effectFn=t,this.creationZone=n,this.injector=o,this.watcher=jv(a=>this.runEffect(a),()=>this.schedule(),s),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(t){this.injector.get(Gr,null,{optional:!0})?.handleError(t)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function Mi(r,e){Da("NgSignals"),!e?.injector&&hA(Mi);let t=e?.injector??z(Oo),n=e?.manualCleanup!==!0?t.get(Ta):null,i=new op(t.get(tP),r,typeof Zone>"u"?null:Zone.current,n,t,e?.allowSignalWrites??!1),o=t.get(Uo,null,{optional:!0});return!o||!(o._lView[re]&8)?i.watcher.notify():(o._lView[tc]??=[]).push(i.watcher.notify),i}var yE=null;function jo(){return yE}function vE(r){yE??=r}var kc=class{};var ar=new pe(""),_E=(()=>{class r{historyGo(t){throw new Error("")}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Q({token:r,factory:()=>z(sP),providedIn:"platform"})}}return r})();var sP=(()=>{class r extends _E{constructor(){super(),this._doc=z(ar),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return jo().getBaseHref(this._doc)}onPopState(t){let n=jo().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",t,!1),()=>n.removeEventListener("popstate",t)}onHashChange(t){let n=jo().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",t,!1),()=>n.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,n,i){this._history.pushState(t,n,i)}replaceState(t,n,i){this._history.replaceState(t,n,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Q({token:r,factory:()=>new r,providedIn:"platform"})}}return r})();function xE(r,e){if(r.length==0)return e;if(e.length==0)return r;let t=0;return r.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?r+e.substring(1):t==1?r+e:r+"/"+e}function hE(r){let e=r.match(/#|\?|$/),t=e&&e.index||r.length,n=t-(r[t-1]==="/"?1:0);return r.slice(0,n)+r.slice(t)}function Ri(r){return r&&r[0]!=="?"?"?"+r:r}var Uc=(()=>{class r{historyGo(t){throw new Error("")}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Q({token:r,factory:()=>z(EE),providedIn:"root"})}}return r})(),aP=new pe(""),EE=(()=>{class r extends Uc{constructor(t,n){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=n??this._platformLocation.getBaseHrefFromDOM()??z(ar).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return xE(this._baseHref,t)}path(t=!1){let n=this._platformLocation.pathname+Ri(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${n}${i}`:n}pushState(t,n,i,o){let s=this.prepareExternalUrl(i+Ri(o));this._platformLocation.pushState(t,n,s)}replaceState(t,n,i,o){let s=this.prepareExternalUrl(i+Ri(o));this._platformLocation.replaceState(t,n,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(n){return new(n||r)(ie(_E),ie(aP,8))}}static{this.\u0275prov=Q({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var Ra=(()=>{class r{constructor(t){this._subject=new Ot,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let n=this._locationStrategy.getBaseHref();this._basePath=cP(hE(dE(n))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,n=""){return this.path()==this.normalize(t+Ri(n))}normalize(t){return r.stripTrailingSlash(uP(this._basePath,dE(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,n="",i=null){this._locationStrategy.pushState(i,"",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ri(n)),i)}replaceState(t,n="",i=null){this._locationStrategy.replaceState(i,"",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ri(n)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)}),()=>{let n=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(n,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",n){this._urlChangeListeners.forEach(i=>i(t,n))}subscribe(t,n,i){return this._subject.subscribe({next:t,error:n,complete:i})}static{this.normalizeQueryParams=Ri}static{this.joinWithSlash=xE}static{this.stripTrailingSlash=hE}static{this.\u0275fac=function(n){return new(n||r)(ie(Uc))}}static{this.\u0275prov=Q({token:r,factory:()=>lP(),providedIn:"root"})}}return r})();function lP(){return new Ra(ie(Uc))}function uP(r,e){if(!r||!e.startsWith(r))return e;let t=e.substring(r.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function dE(r){return r.replace(/\/index.html$/,"")}function cP(r){if(new RegExp("^(https?:)?//").test(r)){let[,t]=r.split(/\/\/[^\/]+/);return t}return r}function bE(r,e){e=encodeURIComponent(e);for(let t of r.split(";")){let n=t.indexOf("="),[i,o]=n==-1?[t,""]:[t.slice(0,n),t.slice(n+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Jp=class{constructor(e,t,n,i){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},wE=(()=>{class r{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,n,i){this._viewContainer=t,this._template=n,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let n=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)n.createEmbeddedView(this._template,new Jp(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)n.remove(o===null?void 0:o);else if(o!==null){let a=n.get(o);n.move(a,s),fE(a,i)}});for(let i=0,o=n.length;i<o;i++){let a=n.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=n.get(i.currentIndex);fE(o,i)})}static ngTemplateContextGuard(t,n){return!0}static{this.\u0275fac=function(n){return new(n||r)(Ke(Hn),Ke(bi),Ke(Qp))}}static{this.\u0275dir=_a({type:r,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return r})();function fE(r,e){r.context.$implicit=e.item}var TE=(()=>{class r{constructor(t,n){this._viewContainer=t,this._context=new em,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){pE("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){pE("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,n){return!0}static{this.\u0275fac=function(n){return new(n||r)(Ke(Hn),Ke(bi))}}static{this.\u0275dir=_a({type:r,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return r})(),em=class{constructor(){this.$implicit=null,this.ngIf=null}};function pE(r,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${r} must be a TemplateRef, but received '${Dt(e)}'.`)}var vn=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=Dc({type:r})}static{this.\u0275inj=wc({})}}return r})(),CE="browser",hP="server";function tm(r){return r===hP}var Bc=class{};var im=class extends kc{constructor(){super(...arguments),this.supportsDOMEvents=!0}},om=class r extends im{static makeCurrent(){vE(new r)}onAndCancel(e,t,n){return e.addEventListener(t,n),()=>{e.removeEventListener(t,n)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=dP();return t==null?null:fP(t)}resetBaseElement(){Pa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return bE(document.cookie,e)}},Pa=null;function dP(){return Pa=Pa||document.querySelector("base"),Pa?Pa.getAttribute("href"):null}function fP(r){return new URL(r,document.baseURI).pathname}var pP=(()=>{class r{build(){return new XMLHttpRequest}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Q({token:r,factory:r.\u0275fac})}}return r})(),sm=new pe(""),ME=(()=>{class r{constructor(t,n){this._zone=n,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,n,i){return this._findPluginFor(n).addEventListener(t,n,i)}getZone(){return this._zone}_findPluginFor(t){let n=this._eventNameToPlugin.get(t);if(n)return n;if(n=this._plugins.find(o=>o.supports(t)),!n)throw new ne(5101,!1);return this._eventNameToPlugin.set(t,n),n}static{this.\u0275fac=function(n){return new(n||r)(ie(sm),ie(ze))}}static{this.\u0275prov=Q({token:r,factory:r.\u0275fac})}}return r})(),jc=class{constructor(e){this._doc=e}},rm="ng-app-id",RE=(()=>{class r{constructor(t,n,i,o={}){this.doc=t,this.appId=n,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=tm(o),this.resetHostNodes()}addStyles(t){for(let n of t)this.changeUsageCount(n,1)===1&&this.onStyleAdded(n)}removeStyles(t){for(let n of t)this.changeUsageCount(n,-1)<=0&&this.onStyleRemoved(n)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(n=>n.remove()),t.clear());for(let n of this.getAllStyles())this.onStyleRemoved(n);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let n of this.getAllStyles())this.addStyleToHost(t,n)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let n of this.hostNodes)this.addStyleToHost(n,t)}onStyleRemoved(t){let n=this.styleRef;n.get(t)?.elements?.forEach(i=>i.remove()),n.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${rm}="${this.appId}"]`);if(t?.length){let n=new Map;return t.forEach(i=>{i.textContent!=null&&n.set(i.textContent,i)}),n}return null}changeUsageCount(t,n){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=n,o.usage}return i.set(t,{usage:n,elements:[]}),n}getStyleElement(t,n){let i=this.styleNodesInDOM,o=i?.get(n);if(o?.parentNode===t)return i.delete(n),o.removeAttribute(rm),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=n,this.platformIsServer&&s.setAttribute(rm,this.appId),t.appendChild(s),s}}addStyleToHost(t,n){let i=this.getStyleElement(t,n),o=this.styleRef,s=o.get(n)?.elements;s?s.push(i):o.set(n,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(n){return new(n||r)(ie(ar),ie(Ip),ie(Mp,8),ie(Lo))}}static{this.\u0275prov=Q({token:r,factory:r.\u0275fac})}}return r})(),nm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},lm=/%COMP%/g,PE="%COMP%",mP=`_nghost-${PE}`,gP=`_ngcontent-${PE}`,yP=!0,vP=new pe("",{providedIn:"root",factory:()=>yP});function _P(r){return gP.replace(lm,r)}function xP(r){return mP.replace(lm,r)}function NE(r,e){return e.map(t=>t.replace(lm,r))}var SE=(()=>{class r{constructor(t,n,i,o,s,a,l,u=null){this.eventManager=t,this.sharedStylesHost=n,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=tm(a),this.defaultRenderer=new Na(t,s,l,this.platformIsServer)}createRenderer(t,n){if(!t||!n)return this.defaultRenderer;this.platformIsServer&&n.encapsulation===jr.ShadowDom&&(n=fe(S({},n),{encapsulation:jr.Emulated}));let i=this.getOrCreateRenderer(t,n);return i instanceof Hc?i.applyToHost(t):i instanceof Oa&&i.applyStyles(),i}getOrCreateRenderer(t,n){let i=this.rendererByCompId,o=i.get(n.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,c=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(n.encapsulation){case jr.Emulated:o=new Hc(l,u,n,this.appId,c,s,a,h);break;case jr.ShadowDom:return new am(l,u,t,n,s,a,this.nonce,h);default:o=new Oa(l,u,n,c,s,a,h);break}i.set(n.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(n){return new(n||r)(ie(ME),ie(RE),ie(Ip),ie(vP),ie(ar),ie(Lo),ie(ze),ie(Mp))}}static{this.\u0275prov=Q({token:r,factory:r.\u0275fac})}}return r})(),Na=class{constructor(e,t,n,i){this.eventManager=e,this.doc=t,this.ngZone=n,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(nm[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(IE(e)?e.content:e).appendChild(t)}insertBefore(e,t,n){e&&(IE(e)?e.content:e).insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n=typeof e=="string"?this.doc.querySelector(e):e;if(!n)throw new ne(-5104,!1);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,i){if(i){t=i+":"+t;let o=nm[i];o?e.setAttributeNS(o,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){let i=nm[n];i?e.removeAttributeNS(i,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,i){i&(mn.DashCase|mn.Important)?e.style.setProperty(t,n,i&mn.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&mn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e!=null&&(e[t]=n)}setValue(e,t){e.nodeValue=t}listen(e,t,n){if(typeof e=="string"&&(e=jo().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(n))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function IE(r){return r.tagName==="TEMPLATE"&&r.content!==void 0}var am=class extends Na{constructor(e,t,n,i,o,s,a,l){super(e,o,s,l),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=NE(i.id,i.styles);for(let c of u){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=c,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Oa=class extends Na{constructor(e,t,n,i,o,s,a,l){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=l?NE(l,n.styles):n.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Hc=class extends Oa{constructor(e,t,n,i,o,s,a,l){let u=i+"-"+n.id;super(e,t,n,o,s,a,l,u),this.contentAttr=_P(u),this.hostAttr=xP(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}},EP=(()=>{class r extends jc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,n,i){return t.addEventListener(n,i,!1),()=>this.removeEventListener(t,n,i)}removeEventListener(t,n,i){return t.removeEventListener(n,i)}static{this.\u0275fac=function(n){return new(n||r)(ie(ar))}}static{this.\u0275prov=Q({token:r,factory:r.\u0275fac})}}return r})(),AE=["alt","control","meta","shift"],bP={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wP={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey},TP=(()=>{class r extends jc{constructor(t){super(t)}supports(t){return r.parseEventName(t)!=null}addEventListener(t,n,i){let o=r.parseEventName(n),s=r.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>jo().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let n=t.toLowerCase().split("."),i=n.shift();if(n.length===0||!(i==="keydown"||i==="keyup"))return null;let o=r._normalizeKey(n.pop()),s="",a=n.indexOf("code");if(a>-1&&(n.splice(a,1),s="code."),AE.forEach(u=>{let c=n.indexOf(u);c>-1&&(n.splice(c,1),s+=u+".")}),s+=o,n.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(t,n){let i=bP[t.key]||t.key,o="";return n.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),AE.forEach(s=>{if(s!==i){let a=wP[s];a(t)&&(o+=s+".")}}),o+=i,o===n)}static eventCallback(t,n,i){return o=>{r.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>n(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(n){return new(n||r)(ie(ar))}}static{this.\u0275prov=Q({token:r,factory:r.\u0275fac})}}return r})();function OE(r,e){return cE(S({rootComponent:r},CP(e)))}function CP(r){return{appProviders:[...MP,...r?.providers??[]],platformProviders:AP}}function DP(){om.makeCurrent()}function SP(){return new Gr}function IP(){return px(document),document}var AP=[{provide:Lo,useValue:CE},{provide:Ap,useValue:DP,multi:!0},{provide:ar,useFactory:IP,deps:[]}];var MP=[{provide:Ic,useValue:"root"},{provide:Gr,useFactory:SP,deps:[]},{provide:sm,useClass:EP,multi:!0,deps:[ar,ze,Lo]},{provide:sm,useClass:TP,multi:!0,deps:[ar]},SE,RE,ME,{provide:fa,useExisting:SE},{provide:Bc,useClass:pP,deps:[]},[]];var FE=(()=>{class r{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(n){return new(n||r)(ie(ar))}}static{this.\u0275prov=Q({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var ae="primary",Ya=Symbol("RouteTitle"),fm=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function zo(r){return new fm(r)}function PP(r,e,t){let n=t.path.split("/");if(n.length>r.length||t.pathMatch==="full"&&(e.hasChildren()||n.length<r.length))return null;let i={};for(let o=0;o<n.length;o++){let s=n[o],a=r[o];if(s.startsWith(":"))i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:r.slice(0,n.length),posParams:i}}function NP(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;++t)if(!Wr(r[t],e[t]))return!1;return!0}function Wr(r,e){let t=r?pm(r):void 0,n=e?pm(e):void 0;if(!t||!n||t.length!=n.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!HE(r[i],e[i]))return!1;return!0}function pm(r){return[...Object.keys(r),...Object.getOwnPropertySymbols(r)]}function HE(r,e){if(Array.isArray(r)&&Array.isArray(e)){if(r.length!==e.length)return!1;let t=[...r].sort(),n=[...e].sort();return t.every((i,o)=>n[o]===i)}else return r===e}function VE(r){return r.length>0?r[r.length-1]:null}function zn(r){return Wd(r)?r:Aa(r)?Ye(Promise.resolve(r)):se(r)}var OP={exact:GE,subset:zE},$E={exact:FP,subset:LP,ignored:()=>!0};function LE(r,e,t){return OP[t.paths](r.root,e.root,t.matrixParams)&&$E[t.queryParams](r.queryParams,e.queryParams)&&!(t.fragment==="exact"&&r.fragment!==e.fragment)}function FP(r,e){return Wr(r,e)}function GE(r,e,t){if(!Ni(r.segments,e.segments)||!Gc(r.segments,e.segments,t)||r.numberOfChildren!==e.numberOfChildren)return!1;for(let n in e.children)if(!r.children[n]||!GE(r.children[n],e.children[n],t))return!1;return!0}function LP(r,e){return Object.keys(e).length<=Object.keys(r).length&&Object.keys(e).every(t=>HE(r[t],e[t]))}function zE(r,e,t){return WE(r,e,e.segments,t)}function WE(r,e,t,n){if(r.segments.length>t.length){let i=r.segments.slice(0,t.length);return!(!Ni(i,t)||e.hasChildren()||!Gc(i,t,n))}else if(r.segments.length===t.length){if(!Ni(r.segments,t)||!Gc(r.segments,t,n))return!1;for(let i in e.children)if(!r.children[i]||!zE(r.children[i],e.children[i],n))return!1;return!0}else{let i=t.slice(0,r.segments.length),o=t.slice(r.segments.length);return!Ni(r.segments,i)||!Gc(r.segments,i,n)||!r.children[ae]?!1:WE(r.children[ae],e,o,n)}}function Gc(r,e,t){return e.every((n,i)=>$E[t](r[i].parameters,n.parameters))}var $n=class{constructor(e=new xe([],{}),t={},n=null){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap??=zo(this.queryParams),this._queryParamMap}toString(){return UP.serialize(this)}},xe=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(n=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return zc(this)}},Pi=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=zo(this.parameters),this._parameterMap}toString(){return XE(this)}};function kP(r,e){return Ni(r,e)&&r.every((t,n)=>Wr(t.parameters,e[n].parameters))}function Ni(r,e){return r.length!==e.length?!1:r.every((t,n)=>t.path===e[n].path)}function BP(r,e){let t=[];return Object.entries(r.children).forEach(([n,i])=>{n===ae&&(t=t.concat(e(i,n)))}),Object.entries(r.children).forEach(([n,i])=>{n!==ae&&(t=t.concat(e(i,n)))}),t}var jm=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Q({token:r,factory:()=>new qc,providedIn:"root"})}}return r})(),qc=class{parse(e){let t=new gm(e);return new $n(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Fa(e.root,!0)}`,n=VP(e.queryParams),i=typeof e.fragment=="string"?`#${jP(e.fragment)}`:"";return`${t}${n}${i}`}},UP=new qc;function zc(r){return r.segments.map(e=>XE(e)).join("/")}function Fa(r,e){if(!r.hasChildren())return zc(r);if(e){let t=r.children[ae]?Fa(r.children[ae],!1):"",n=[];return Object.entries(r.children).forEach(([i,o])=>{i!==ae&&n.push(`${i}:${Fa(o,!1)}`)}),n.length>0?`${t}(${n.join("//")})`:t}else{let t=BP(r,(n,i)=>i===ae?[Fa(r.children[ae],!1)]:[`${i}:${Fa(n,!1)}`]);return Object.keys(r.children).length===1&&r.children[ae]!=null?`${zc(r)}/${t[0]}`:`${zc(r)}/(${t.join("//")})`}}function qE(r){return encodeURIComponent(r).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Vc(r){return qE(r).replace(/%3B/gi,";")}function jP(r){return encodeURI(r)}function mm(r){return qE(r).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Wc(r){return decodeURIComponent(r)}function kE(r){return Wc(r.replace(/\+/g,"%20"))}function XE(r){return`${mm(r.path)}${HP(r.parameters)}`}function HP(r){return Object.entries(r).map(([e,t])=>`;${mm(e)}=${mm(t)}`).join("")}function VP(r){let e=Object.entries(r).map(([t,n])=>Array.isArray(n)?n.map(i=>`${Vc(t)}=${Vc(i)}`).join("&"):`${Vc(t)}=${Vc(n)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var $P=/^[^\/()?;#]+/;function um(r){let e=r.match($P);return e?e[0]:""}var GP=/^[^\/()?;=#]+/;function zP(r){let e=r.match(GP);return e?e[0]:""}var WP=/^[^=?&#]+/;function qP(r){let e=r.match(WP);return e?e[0]:""}var XP=/^[^&#]+/;function YP(r){let e=r.match(XP);return e?e[0]:""}var gm=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new xe([],{}):new xe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n[ae]=new xe(e,t)),n}parseSegment(){let e=um(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ne(4009,!1);return this.capture(e),new Pi(Wc(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=zP(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){let i=um(this.remaining);i&&(n=i,this.capture(n))}e[Wc(t)]=Wc(n)}parseQueryParam(e){let t=qP(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){let s=YP(this.remaining);s&&(n=s,this.capture(n))}let i=kE(t),o=kE(n);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let n=um(this.remaining),i=this.remaining[n.length];if(i!=="/"&&i!==")"&&i!==";")throw new ne(4010,!1);let o;n.indexOf(":")>-1?(o=n.slice(0,n.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ae);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[ae]:new xe([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ne(4011,!1)}};function YE(r){return r.segments.length>0?new xe([],{[ae]:r}):r}function ZE(r){let e={};for(let[n,i]of Object.entries(r.children)){let o=ZE(i);if(n===ae&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[n]=o)}let t=new xe(r.segments,e);return ZP(t)}function ZP(r){if(r.numberOfChildren===1&&r.children[ae]){let e=r.children[ae];return new xe(r.segments.concat(e.segments),e.children)}return r}function Wo(r){return r instanceof $n}function KP(r,e,t=null,n=null){let i=KE(r);return QE(i,e,t,n)}function KE(r){let e;function t(o){let s={};for(let l of o.children){let u=t(l);s[l.outlet]=u}let a=new xe(o.url,s);return o===r&&(e=a),a}let n=t(r.root),i=YE(n);return e??i}function QE(r,e,t,n){let i=r;for(;i.parent;)i=i.parent;if(e.length===0)return cm(i,i,i,t,n);let o=QP(e);if(o.toRoot())return cm(i,i,new xe([],{}),t,n);let s=JP(o,i,r),a=s.processChildren?Ba(s.segmentGroup,s.index,o.commands):eb(s.segmentGroup,s.index,o.commands);return cm(i,s.segmentGroup,a,t,n)}function Xc(r){return typeof r=="object"&&r!=null&&!r.outlets&&!r.segmentPath}function Ha(r){return typeof r=="object"&&r!=null&&r.outlets}function cm(r,e,t,n,i){let o={};n&&Object.entries(n).forEach(([l,u])=>{o[l]=Array.isArray(u)?u.map(c=>`${c}`):`${u}`});let s;r===e?s=t:s=JE(r,e,t);let a=YE(ZE(s));return new $n(a,o,i)}function JE(r,e,t){let n={};return Object.entries(r.children).forEach(([i,o])=>{o===e?n[i]=t:n[i]=JE(o,e,t)}),new xe(r.segments,n)}var Yc=class{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&Xc(n[0]))throw new ne(4003,!1);let i=n.find(Ha);if(i&&i!==VE(n))throw new ne(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function QP(r){if(typeof r[0]=="string"&&r.length===1&&r[0]==="/")return new Yc(!0,0,r);let e=0,t=!1,n=r.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,u])=>{a[l]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Yc(t,e,n)}var $o=class{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}};function JP(r,e,t){if(r.isAbsolute)return new $o(e,!0,0);if(!t)return new $o(e,!1,NaN);if(t.parent===null)return new $o(t,!0,0);let n=Xc(r.commands[0])?0:1,i=t.segments.length-1+n;return eN(t,i,r.numberOfDoubleDots)}function eN(r,e,t){let n=r,i=e,o=t;for(;o>i;){if(o-=i,n=n.parent,!n)throw new ne(4005,!1);i=n.segments.length}return new $o(n,!1,i-o)}function tN(r){return Ha(r[0])?r[0].outlets:{[ae]:r}}function eb(r,e,t){if(r??=new xe([],{}),r.segments.length===0&&r.hasChildren())return Ba(r,e,t);let n=rN(r,e,t),i=t.slice(n.commandIndex);if(n.match&&n.pathIndex<r.segments.length){let o=new xe(r.segments.slice(0,n.pathIndex),{});return o.children[ae]=new xe(r.segments.slice(n.pathIndex),r.children),Ba(o,0,i)}else return n.match&&i.length===0?new xe(r.segments,{}):n.match&&!r.hasChildren()?ym(r,e,t):n.match?Ba(r,0,i):ym(r,e,t)}function Ba(r,e,t){if(t.length===0)return new xe(r.segments,{});{let n=tN(t),i={};if(Object.keys(n).some(o=>o!==ae)&&r.children[ae]&&r.numberOfChildren===1&&r.children[ae].segments.length===0){let o=Ba(r.children[ae],e,t);return new xe(r.segments,o.children)}return Object.entries(n).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=eb(r.children[o],e,s))}),Object.entries(r.children).forEach(([o,s])=>{n[o]===void 0&&(i[o]=s)}),new xe(r.segments,i)}}function rN(r,e,t){let n=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<r.segments.length;){if(n>=t.length)return o;let s=r.segments[i],a=t[n];if(Ha(a))break;let l=`${a}`,u=n<t.length-1?t[n+1]:null;if(i>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!UE(l,u,s))return o;n+=2}else{if(!UE(l,{},s))return o;n++}i++}return{match:!0,pathIndex:i,commandIndex:n}}function ym(r,e,t){let n=r.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Ha(o)){let l=nN(o.outlets);return new xe(n,l)}if(i===0&&Xc(t[0])){let l=r.segments[e];n.push(new Pi(l.path,BE(t[0]))),i++;continue}let s=Ha(o)?o.outlets[ae]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Xc(a)?(n.push(new Pi(s,BE(a))),i+=2):(n.push(new Pi(s,{})),i++)}return new xe(n,{})}function nN(r){let e={};return Object.entries(r).forEach(([t,n])=>{typeof n=="string"&&(n=[n]),n!==null&&(e[t]=ym(new xe([],{}),0,n))}),e}function BE(r){let e={};return Object.entries(r).forEach(([t,n])=>e[t]=`${n}`),e}function UE(r,e,t){return r==t.path&&Wr(e,t.parameters)}var Ua="imperative",dt=function(r){return r[r.NavigationStart=0]="NavigationStart",r[r.NavigationEnd=1]="NavigationEnd",r[r.NavigationCancel=2]="NavigationCancel",r[r.NavigationError=3]="NavigationError",r[r.RoutesRecognized=4]="RoutesRecognized",r[r.ResolveStart=5]="ResolveStart",r[r.ResolveEnd=6]="ResolveEnd",r[r.GuardsCheckStart=7]="GuardsCheckStart",r[r.GuardsCheckEnd=8]="GuardsCheckEnd",r[r.RouteConfigLoadStart=9]="RouteConfigLoadStart",r[r.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",r[r.ChildActivationStart=11]="ChildActivationStart",r[r.ChildActivationEnd=12]="ChildActivationEnd",r[r.ActivationStart=13]="ActivationStart",r[r.ActivationEnd=14]="ActivationEnd",r[r.Scroll=15]="Scroll",r[r.NavigationSkipped=16]="NavigationSkipped",r}(dt||{}),lr=class{constructor(e,t){this.id=e,this.url=t}},Va=class extends lr{constructor(e,t,n="imperative",i=null){super(e,t),this.type=dt.NavigationStart,this.navigationTrigger=n,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Oi=class extends lr{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n,this.type=dt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Xt=function(r){return r[r.Redirect=0]="Redirect",r[r.SupersededByNewNavigation=1]="SupersededByNewNavigation",r[r.NoDataFromResolver=2]="NoDataFromResolver",r[r.GuardRejected=3]="GuardRejected",r}(Xt||{}),vm=function(r){return r[r.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",r[r.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",r}(vm||{}),Gn=class extends lr{constructor(e,t,n,i){super(e,t),this.reason=n,this.code=i,this.type=dt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Fi=class extends lr{constructor(e,t,n,i){super(e,t),this.reason=n,this.code=i,this.type=dt.NavigationSkipped}},$a=class extends lr{constructor(e,t,n,i){super(e,t),this.error=n,this.target=i,this.type=dt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Zc=class extends lr{constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i,this.type=dt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_m=class extends lr{constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i,this.type=dt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},xm=class extends lr{constructor(e,t,n,i,o){super(e,t),this.urlAfterRedirects=n,this.state=i,this.shouldActivate=o,this.type=dt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Em=class extends lr{constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i,this.type=dt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bm=class extends lr{constructor(e,t,n,i){super(e,t),this.urlAfterRedirects=n,this.state=i,this.type=dt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},wm=class{constructor(e){this.route=e,this.type=dt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Tm=class{constructor(e){this.route=e,this.type=dt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Cm=class{constructor(e){this.snapshot=e,this.type=dt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Dm=class{constructor(e){this.snapshot=e,this.type=dt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Sm=class{constructor(e){this.snapshot=e,this.type=dt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Im=class{constructor(e){this.snapshot=e,this.type=dt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Ga=class{},za=class{constructor(e){this.url=e}};var Am=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new rh,this.attachRef=null}},rh=(()=>{class r{constructor(){this.contexts=new Map}onChildOutletCreated(t,n){let i=this.getOrCreateContext(t);i.outlet=n,this.contexts.set(t,i)}onChildOutletDestroyed(t){let n=this.getContext(t);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let n=this.getContext(t);return n||(n=new Am,this.contexts.set(t,n)),n}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Q({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),Kc=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Mm(e,this._root);return t?t.children.map(n=>n.value):[]}firstChild(e){let t=Mm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Rm(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Rm(e,this._root).map(t=>t.value)}};function Mm(r,e){if(r===e.value)return e;for(let t of e.children){let n=Mm(r,t);if(n)return n}return null}function Rm(r,e){if(r===e.value)return[e];for(let t of e.children){let n=Rm(r,t);if(n.length)return n.unshift(e),n}return[]}var qt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Vo(r){let e={};return r&&r.children.forEach(t=>e[t.value.outlet]=t),e}var Qc=class extends Kc{constructor(e,t){super(e),this.snapshot=t,Vm(this,e)}toString(){return this.snapshot.toString()}};function tb(r){let e=iN(r),t=new lt([new Pi("",{})]),n=new lt({}),i=new lt({}),o=new lt({}),s=new lt(""),a=new qo(t,n,o,s,i,ae,r,e.root);return a.snapshot=e.root,new Qc(new qt(a,[]),e)}function iN(r){let e={},t={},n={},i="",o=new Wa([],e,n,i,t,ae,r,null,{});return new Jc("",new qt(o,[]))}var qo=class{constructor(e,t,n,i,o,s,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=n,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ve(u=>u[Ya]))??se(void 0),this.url=e,this.params=t,this.queryParams=n,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ve(e=>zo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ve(e=>zo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Hm(r,e,t="emptyOnly"){let n,{routeConfig:i}=r;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?n={params:S(S({},e.params),r.params),data:S(S({},e.data),r.data),resolve:S(S(S(S({},r.data),e.data),i?.data),r._resolvedData)}:n={params:S({},r.params),data:S({},r.data),resolve:S(S({},r.data),r._resolvedData??{})},i&&nb(i)&&(n.resolve[Ya]=i.title),n}var Wa=class{get title(){return this.data?.[Ya]}constructor(e,t,n,i,o,s,a,l,u){this.url=e,this.params=t,this.queryParams=n,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=zo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=zo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(n=>n.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Jc=class extends Kc{constructor(e,t){super(t),this.url=e,Vm(this,t)}toString(){return rb(this._root)}};function Vm(r,e){e.value._routerState=r,e.children.forEach(t=>Vm(r,t))}function rb(r){let e=r.children.length>0?` { ${r.children.map(rb).join(", ")} } `:"";return`${r.value}${e}`}function hm(r){if(r.snapshot){let e=r.snapshot,t=r._futureSnapshot;r.snapshot=t,Wr(e.queryParams,t.queryParams)||r.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&r.fragmentSubject.next(t.fragment),Wr(e.params,t.params)||r.paramsSubject.next(t.params),NP(e.url,t.url)||r.urlSubject.next(t.url),Wr(e.data,t.data)||r.dataSubject.next(t.data)}else r.snapshot=r._futureSnapshot,r.dataSubject.next(r._futureSnapshot.data)}function Pm(r,e){let t=Wr(r.params,e.params)&&kP(r.url,e.url),n=!r.parent!=!e.parent;return t&&!n&&(!r.parent||Pm(r.parent,e.parent))}function nb(r){return typeof r.title=="string"||r.title===null}var oN=(()=>{class r{constructor(){this.activated=null,this._activatedRoute=null,this.name=ae,this.activateEvents=new Ot,this.deactivateEvents=new Ot,this.attachEvents=new Ot,this.detachEvents=new Ot,this.parentContexts=z(rh),this.location=z(Hn),this.changeDetector=z(Uo),this.environmentInjector=z(or),this.inputBinder=z($m,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:n,previousValue:i}=t.name;if(n)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ne(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ne(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ne(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,n){this.activated=t,this._activatedRoute=n,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,n){if(this.isActivated)throw new ne(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new Nm(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:l,environmentInjector:n??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275dir=_a({type:r,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Rc]})}}return r})(),Nm=class r{__ngOutletInjector(e){return new r(this.route,this.childContexts,e)}constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===qo?this.route:e===rh?this.childContexts:this.parent.get(e,t)}},$m=new pe("");function sN(r,e,t){let n=qa(r,e._root,t?t._root:void 0);return new Qc(n,e)}function qa(r,e,t){if(t&&r.shouldReuseRoute(e.value,t.value.snapshot)){let n=t.value;n._futureSnapshot=e.value;let i=aN(r,e,t);return new qt(n,i)}else{if(r.shouldAttach(e.value)){let o=r.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>qa(r,a)),s}}let n=lN(e.value),i=e.children.map(o=>qa(r,o));return new qt(n,i)}}function aN(r,e,t){return e.children.map(n=>{for(let i of t.children)if(r.shouldReuseRoute(n.value,i.value.snapshot))return qa(r,n,i);return qa(r,n)})}function lN(r){return new qo(new lt(r.url),new lt(r.params),new lt(r.queryParams),new lt(r.fragment),new lt(r.data),r.outlet,r.component,r)}var ib="ngNavigationCancelingError";function ob(r,e){let{redirectTo:t,navigationBehaviorOptions:n}=Wo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=sb(!1,Xt.Redirect);return i.url=t,i.navigationBehaviorOptions=n,i}function sb(r,e){let t=new Error(`NavigationCancelingError: ${r||""}`);return t[ib]=!0,t.cancellationCode=e,t}function uN(r){return ab(r)&&Wo(r.url)}function ab(r){return!!r&&r[ib]}var cN=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275cmp=Ft({type:r,selectors:[["ng-component"]],standalone:!0,features:[Lt],decls:1,vars:0,template:function(n,i){n&1&&Sr(0,"router-outlet")},dependencies:[oN],encapsulation:2})}}return r})();function hN(r,e){return r.providers&&!r._injector&&(r._injector=Gp(r.providers,e,`Route: ${r.path}`)),r._injector??e}function Gm(r){let e=r.children&&r.children.map(Gm),t=e?fe(S({},r),{children:e}):S({},r);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ae&&(t.component=cN),t}function qr(r){return r.outlet||ae}function dN(r,e){let t=r.filter(n=>qr(n)===e);return t.push(...r.filter(n=>qr(n)!==e)),t}function Za(r){if(!r)return null;if(r.routeConfig?._injector)return r.routeConfig._injector;for(let e=r.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var fN=(r,e,t,n)=>ve(i=>(new Om(e,i.targetRouterState,i.currentRouterState,t,n).activate(r),i)),Om=class{constructor(e,t,n,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),hm(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){let i=Vo(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],n),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,n)})}deactivateRoutes(e,t,n){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=n.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,n);else o&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let n=t.getContext(e.value.outlet),i=n&&e.value.component?n.children:t,o=Vo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(n&&n.outlet){let s=n.outlet.detach(),a=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let n=t.getContext(e.value.outlet),i=n&&e.value.component?n.children:t,o=Vo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.route=null)}activateChildRoutes(e,t,n){let i=Vo(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],n),this.forwardEvent(new Im(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Dm(e.value.snapshot))}activateRoutes(e,t,n){let i=e.value,o=t?t.value:null;if(hm(i),i===o)if(i.component){let s=n.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,n);else if(i.component){let s=n.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),hm(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=Za(i.snapshot);s.attachRef=null,s.route=i,s.injector=a,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,n)}},eh=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Go=class{constructor(e,t){this.component=e,this.route=t}};function pN(r,e,t){let n=r._root,i=e?e._root:null;return La(n,i,t,[n.value])}function mN(r){let e=r.routeConfig?r.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:r,guards:e}}function Yo(r,e){let t=Symbol(),n=e.get(r,t);return n===t?typeof r=="function"&&!t0(r)?r:e.get(r):n}function La(r,e,t,n,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Vo(e);return r.children.forEach(s=>{gN(s,o[s.value.outlet],t,n.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ja(a,t.getContext(s),i)),i}function gN(r,e,t,n,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=r.value,s=e?e.value:null,a=t?t.getContext(r.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=yN(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new eh(n)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?La(r,e,a?a.children:null,n,i):La(r,e,t,n,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Go(a.outlet.component,s))}else s&&ja(e,a,i),i.canActivateChecks.push(new eh(n)),o.component?La(r,null,a?a.children:null,n,i):La(r,null,t,n,i);return i}function yN(r,e,t){if(typeof t=="function")return t(r,e);switch(t){case"pathParamsChange":return!Ni(r.url,e.url);case"pathParamsOrQueryParamsChange":return!Ni(r.url,e.url)||!Wr(r.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Pm(r,e)||!Wr(r.queryParams,e.queryParams);case"paramsChange":default:return!Pm(r,e)}}function ja(r,e,t){let n=Vo(r),i=r.value;Object.entries(n).forEach(([o,s])=>{i.component?e?ja(s,e.children.getContext(o),t):ja(s,null,t):ja(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Go(e.outlet.component,i)):t.canDeactivateChecks.push(new Go(null,i)):t.canDeactivateChecks.push(new Go(null,i))}function Ka(r){return typeof r=="function"}function vN(r){return typeof r=="boolean"}function _N(r){return r&&Ka(r.canLoad)}function xN(r){return r&&Ka(r.canActivate)}function EN(r){return r&&Ka(r.canActivateChild)}function bN(r){return r&&Ka(r.canDeactivate)}function wN(r){return r&&Ka(r.canMatch)}function lb(r){return r instanceof hn||r?.name==="EmptyError"}var $c=Symbol("INITIAL_VALUE");function Xo(){return xr(r=>Yu(r.map(e=>e.pipe(dn(1),Kd($c)))).pipe(ve(e=>{for(let t of e)if(t!==!0){if(t===$c)return $c;if(t===!1||t instanceof $n)return t}return!0}),_r(e=>e!==$c),dn(1)))}function TN(r,e){return Ze(t=>{let{targetSnapshot:n,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?se(fe(S({},t),{guardsResult:!0})):CN(s,n,i,r).pipe(Ze(a=>a&&vN(a)?DN(n,o,r,e):se(a)),ve(a=>fe(S({},t),{guardsResult:a})))})}function CN(r,e,t,n){return Ye(r).pipe(Ze(i=>RN(i.component,i.route,t,e,n)),kr(i=>i!==!0,!0))}function DN(r,e,t,n){return Ye(e).pipe(_o(i=>vo(IN(i.route.parent,n),SN(i.route,n),MN(r,i.path,t),AN(r,i.route,t))),kr(i=>i!==!0,!0))}function SN(r,e){return r!==null&&e&&e(new Sm(r)),se(!0)}function IN(r,e){return r!==null&&e&&e(new Cm(r)),se(!0)}function AN(r,e,t){let n=e.routeConfig?e.routeConfig.canActivate:null;if(!n||n.length===0)return se(!0);let i=n.map(o=>Zu(()=>{let s=Za(e)??t,a=Yo(o,s),l=xN(a)?a.canActivate(e,r):Ti(s,()=>a(e,r));return zn(l).pipe(kr())}));return se(i).pipe(Xo())}function MN(r,e,t){let n=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>mN(s)).filter(s=>s!==null).map(s=>Zu(()=>{let a=s.guards.map(l=>{let u=Za(s.node)??t,c=Yo(l,u),h=EN(c)?c.canActivateChild(n,r):Ti(u,()=>c(n,r));return zn(h).pipe(kr())});return se(a).pipe(Xo())}));return se(o).pipe(Xo())}function RN(r,e,t,n,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return se(!0);let s=o.map(a=>{let l=Za(e)??i,u=Yo(a,l),c=bN(u)?u.canDeactivate(r,e,t,n):Ti(l,()=>u(r,e,t,n));return zn(c).pipe(kr())});return se(s).pipe(Xo())}function PN(r,e,t,n){let i=e.canLoad;if(i===void 0||i.length===0)return se(!0);let o=i.map(s=>{let a=Yo(s,r),l=_N(a)?a.canLoad(e,t):Ti(r,()=>a(e,t));return zn(l)});return se(o).pipe(Xo(),ub(n))}function ub(r){return Vd(ut(e=>{if(Wo(e))throw ob(r,e)}),ve(e=>e===!0))}function NN(r,e,t,n){let i=e.canMatch;if(!i||i.length===0)return se(!0);let o=i.map(s=>{let a=Yo(s,r),l=wN(a)?a.canMatch(e,t):Ti(r,()=>a(e,t));return zn(l)});return se(o).pipe(Xo(),ub(n))}var Xa=class{constructor(e){this.segmentGroup=e||null}},th=class extends Error{constructor(e){super(),this.urlTree=e}};function Ho(r){return yo(new Xa(r))}function ON(r){return yo(new ne(4e3,!1))}function FN(r){return yo(sb(!1,Xt.GuardRejected))}var Fm=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let n=[],i=t.root;for(;;){if(n=n.concat(i.segments),i.numberOfChildren===0)return se(n);if(i.numberOfChildren>1||!i.children[ae])return ON(e.redirectTo);i=i.children[ae]}}applyRedirectCommands(e,t,n){let i=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,n);if(t.startsWith("/"))throw new th(i);return i}applyRedirectCreateUrlTree(e,t,n,i){let o=this.createSegmentGroup(e,t.root,n,i);return new $n(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let n={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);n[i]=t[a]}else n[i]=o}),n}createSegmentGroup(e,t,n,i){let o=this.createSegments(e,t.segments,n,i),s={};return Object.entries(t.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,n,i)}),new xe(o,s)}createSegments(e,t,n,i){return t.map(o=>o.path.startsWith(":")?this.findPosParam(e,o,i):this.findOrReturn(o,n))}findPosParam(e,t,n){let i=n[t.path.substring(1)];if(!i)throw new ne(4001,!1);return i}findOrReturn(e,t){let n=0;for(let i of t){if(i.path===e.path)return t.splice(n),i;n++}return e}},Lm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function LN(r,e,t,n,i){let o=zm(r,e,t);return o.matched?(n=hN(e,n),NN(n,e,t,i).pipe(ve(s=>s===!0?o:S({},Lm)))):se(o)}function zm(r,e,t){if(e.path==="**")return kN(t);if(e.path==="")return e.pathMatch==="full"&&(r.hasChildren()||t.length>0)?S({},Lm):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||PP)(t,r,e);if(!i)return S({},Lm);let o={};Object.entries(i.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=i.consumed.length>0?S(S({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function kN(r){return{matched:!0,parameters:r.length>0?VE(r).parameters:{},consumedSegments:r,remainingSegments:[],positionalParamSegments:{}}}function jE(r,e,t,n){return t.length>0&&jN(r,t,n)?{segmentGroup:new xe(e,UN(n,new xe(t,r.children))),slicedSegments:[]}:t.length===0&&HN(r,t,n)?{segmentGroup:new xe(r.segments,BN(r,t,n,r.children)),slicedSegments:t}:{segmentGroup:new xe(r.segments,r.children),slicedSegments:t}}function BN(r,e,t,n){let i={};for(let o of t)if(nh(r,e,o)&&!n[qr(o)]){let s=new xe([],{});i[qr(o)]=s}return S(S({},n),i)}function UN(r,e){let t={};t[ae]=e;for(let n of r)if(n.path===""&&qr(n)!==ae){let i=new xe([],{});t[qr(n)]=i}return t}function jN(r,e,t){return t.some(n=>nh(r,e,n)&&qr(n)!==ae)}function HN(r,e,t){return t.some(n=>nh(r,e,n))}function nh(r,e,t){return(r.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function VN(r,e,t,n){return qr(r)!==n&&(n===ae||!nh(e,t,r))?!1:zm(e,r,t).matched}function $N(r,e,t){return e.length===0&&!r.children[t]}var km=class{};function GN(r,e,t,n,i,o,s="emptyOnly"){return new Bm(r,e,t,n,i,s,o).recognize()}var zN=31,Bm=class{constructor(e,t,n,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=n,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Fm(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ne(4002,`'${e.segmentGroup}'`)}recognize(){let e=jE(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ve(t=>{let n=new Wa([],Object.freeze({}),Object.freeze(S({},this.urlTree.queryParams)),this.urlTree.fragment,{},ae,this.rootComponentType,null,{}),i=new qt(n,t),o=new Jc("",i),s=KP(n,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,ae).pipe(Fn(n=>{if(n instanceof th)return this.urlTree=n.urlTree,this.match(n.urlTree.root);throw n instanceof Xa?this.noMatchError(n):n}))}inheritParamsAndData(e,t){let n=e.value,i=Hm(n,t,this.paramsInheritanceStrategy);n.params=Object.freeze(i.params),n.data=Object.freeze(i.data),e.children.forEach(o=>this.inheritParamsAndData(o,n))}processSegmentGroup(e,t,n,i){return n.segments.length===0&&n.hasChildren()?this.processChildren(e,t,n):this.processSegment(e,t,n,n.segments,i,!0).pipe(ve(o=>o instanceof qt?[o]:[]))}processChildren(e,t,n){let i=[];for(let o of Object.keys(n.children))o==="primary"?i.unshift(o):i.push(o);return Ye(i).pipe(_o(o=>{let s=n.children[o],a=dN(t,o);return this.processSegmentGroup(e,a,s,o)}),Zd((o,s)=>(o.push(...s),o)),Ln(null),Yd(),Ze(o=>{if(o===null)return Ho(n);let s=cb(o);return WN(s),se(s)}))}processSegment(e,t,n,i,o,s){return Ye(t).pipe(_o(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,n,i,o,s).pipe(Fn(l=>{if(l instanceof Xa)return se(null);throw l}))),kr(a=>!!a),Fn(a=>{if(lb(a))return $N(n,i,o)?se(new km):Ho(n);throw a}))}processSegmentAgainstRoute(e,t,n,i,o,s,a){return VN(n,i,o,s)?n.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,n,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,n,o,s):Ho(i):Ho(i)}expandSegmentAgainstRouteUsingRedirect(e,t,n,i,o,s){let{matched:a,consumedSegments:l,positionalParamSegments:u,remainingSegments:c}=zm(t,i,o);if(!a)return Ho(t);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>zN&&(this.allowRedirects=!1));let h=this.applyRedirects.applyRedirectCommands(l,i.redirectTo,u);return this.applyRedirects.lineralizeSegments(i,h).pipe(Ze(d=>this.processSegment(e,n,t,d.concat(c),s,!1)))}matchSegmentAgainstRoute(e,t,n,i,o){let s=LN(t,n,i,e,this.urlSerializer);return n.path==="**"&&(t.children={}),s.pipe(xr(a=>a.matched?(e=n._injector??e,this.getChildConfig(e,n,i).pipe(xr(({routes:l})=>{let u=n._loadedInjector??e,{consumedSegments:c,remainingSegments:h,parameters:d}=a,f=new Wa(c,d,Object.freeze(S({},this.urlTree.queryParams)),this.urlTree.fragment,XN(n),qr(n),n.component??n._loadedComponent??null,n,YN(n)),{segmentGroup:p,slicedSegments:m}=jE(t,c,h,l);if(m.length===0&&p.hasChildren())return this.processChildren(u,l,p).pipe(ve(v=>v===null?null:new qt(f,v)));if(l.length===0&&m.length===0)return se(new qt(f,[]));let y=qr(n)===o;return this.processSegment(u,l,p,m,y?ae:o,!0).pipe(ve(v=>new qt(f,v instanceof qt?[v]:[])))}))):Ho(t)))}getChildConfig(e,t,n){return t.children?se({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?se({routes:t._loadedRoutes,injector:t._loadedInjector}):PN(e,t,n,this.urlSerializer).pipe(Ze(i=>i?this.configLoader.loadChildren(e,t).pipe(ut(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):FN(t))):se({routes:[],injector:e})}};function WN(r){r.sort((e,t)=>e.value.outlet===ae?-1:t.value.outlet===ae?1:e.value.outlet.localeCompare(t.value.outlet))}function qN(r){let e=r.value.routeConfig;return e&&e.path===""}function cb(r){let e=[],t=new Set;for(let n of r){if(!qN(n)){e.push(n);continue}let i=e.find(o=>n.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...n.children),t.add(i)):e.push(n)}for(let n of t){let i=cb(n.children);e.push(new qt(n.value,i))}return e.filter(n=>!t.has(n))}function XN(r){return r.data||{}}function YN(r){return r.resolve||{}}function ZN(r,e,t,n,i,o){return Ze(s=>GN(r,e,t,n,s.extractedUrl,i,o).pipe(ve(({state:a,tree:l})=>fe(S({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function KN(r,e){return Ze(t=>{let{targetSnapshot:n,guards:{canActivateChecks:i}}=t;if(!i.length)return se(t);let o=new Set(i.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let u of hb(l))s.add(u);let a=0;return Ye(s).pipe(_o(l=>o.has(l)?QN(l,n,r,e):(l.data=Hm(l,l.parent,r).resolve,se(void 0))),ut(()=>a++),xo(1),Ze(l=>a===s.size?se(t):$t))})}function hb(r){let e=r.children.map(t=>hb(t)).flat();return[r,...e]}function QN(r,e,t,n){let i=r.routeConfig,o=r._resolve;return i?.title!==void 0&&!nb(i)&&(o[Ya]=i.title),JN(o,r,e,n).pipe(ve(s=>(r._resolvedData=s,r.data=Hm(r,r.parent,t).resolve,null)))}function JN(r,e,t,n){let i=pm(r);if(i.length===0)return se({});let o={};return Ye(i).pipe(Ze(s=>eO(r[s],e,t,n).pipe(kr(),ut(a=>{o[s]=a}))),xo(1),Xd(o),Fn(s=>lb(s)?$t:yo(s)))}function eO(r,e,t,n){let i=Za(e)??n,o=Yo(r,i),s=o.resolve?o.resolve(e,t):Ti(i,()=>o(e,t));return zn(s)}function dm(r){return xr(e=>{let t=r(e);return t?Ye(t).pipe(ve(()=>e)):se(e)})}var db=(()=>{class r{buildTitle(t){let n,i=t.root;for(;i!==void 0;)n=this.getResolvedTitleForRoute(i)??n,i=i.children.find(o=>o.outlet===ae);return n}getResolvedTitleForRoute(t){return t.data[Ya]}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Q({token:r,factory:()=>z(tO),providedIn:"root"})}}return r})(),tO=(()=>{class r extends db{constructor(t){super(),this.title=t}updateTitle(t){let n=this.buildTitle(t);n!==void 0&&this.title.setTitle(n)}static{this.\u0275fac=function(n){return new(n||r)(ie(FE))}}static{this.\u0275prov=Q({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),Wm=new pe("",{providedIn:"root",factory:()=>({})}),qm=new pe(""),rO=(()=>{class r{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=z(Zp)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return se(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let n=zn(t.loadComponent()).pipe(ve(fb),ut(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),ta(()=>{this.componentLoaders.delete(t)})),i=new go(n,()=>new Ct).pipe(mo());return this.componentLoaders.set(t,i),i}loadChildren(t,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return se({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);let o=nO(n,this.compiler,t,this.onLoadEndListener).pipe(ta(()=>{this.childrenLoaders.delete(n)})),s=new go(o,()=>new Ct).pipe(mo());return this.childrenLoaders.set(n,s),s}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Q({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function nO(r,e,t,n){return zn(r.loadChildren()).pipe(ve(fb),Ze(i=>i instanceof ma||Array.isArray(i)?se(i):Ye(e.compileModuleAsync(i))),ve(i=>{n&&n(r);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(qm,[],{optional:!0,self:!0}).flat()),{routes:s.map(Gm),injector:o}}))}function iO(r){return r&&typeof r=="object"&&"default"in r}function fb(r){return iO(r)?r.default:r}var Xm=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Q({token:r,factory:()=>z(oO),providedIn:"root"})}}return r})(),oO=(()=>{class r{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,n){return t}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Q({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),sO=new pe("");var aO=(()=>{class r{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ct,this.transitionAbortSubject=new Ct,this.configLoader=z(rO),this.environmentInjector=z(or),this.urlSerializer=z(jm),this.rootContexts=z(rh),this.location=z(Ra),this.inputBindingEnabled=z($m,{optional:!0})!==null,this.titleStrategy=z(db),this.options=z(Wm,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=z(Xm),this.createViewTransition=z(sO,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>se(void 0),this.rootComponentType=null;let t=i=>this.events.next(new wm(i)),n=i=>this.events.next(new Tm(i));this.configLoader.onLoadEndListener=n,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let n=++this.navigationId;this.transitions?.next(fe(S(S({},this.transitions.value),t),{id:n}))}setupNavigations(t,n,i){return this.transitions=new lt({id:0,currentUrlTree:n,currentRawUrl:n,extractedUrl:this.urlHandlingStrategy.extract(n),urlAfterRedirects:this.urlHandlingStrategy.extract(n),rawUrl:n,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ua,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(_r(o=>o.id!==0),ve(o=>fe(S({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),xr(o=>{let s=!1,a=!1;return se(o).pipe(xr(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Xt.SupersededByNewNavigation),$t;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?fe(S({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=l.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!u&&c!=="reload"){let h="";return this.events.next(new Fi(l.id,this.urlSerializer.serialize(l.rawUrl),h,vm.IgnoredSameUrlNavigation)),l.resolve(null),$t}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return se(l).pipe(xr(h=>{let d=this.transitions?.getValue();return this.events.next(new Va(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),d!==this.transitions?.getValue()?$t:Promise.resolve(h)}),ZN(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),ut(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=fe(S({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let d=new Zc(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(d)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:h,extractedUrl:d,source:f,restoredState:p,extras:m}=l,y=new Va(h,this.urlSerializer.serialize(d),f,p);this.events.next(y);let v=tb(this.rootComponentType).snapshot;return this.currentTransition=o=fe(S({},l),{targetSnapshot:v,urlAfterRedirects:d,extras:fe(S({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=d,se(o)}else{let h="";return this.events.next(new Fi(l.id,this.urlSerializer.serialize(l.extractedUrl),h,vm.IgnoredByUrlHandlingStrategy)),l.resolve(null),$t}}),ut(l=>{let u=new _m(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),ve(l=>(this.currentTransition=o=fe(S({},l),{guards:pN(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),TN(this.environmentInjector,l=>this.events.next(l)),ut(l=>{if(o.guardsResult=l.guardsResult,Wo(l.guardsResult))throw ob(this.urlSerializer,l.guardsResult);let u=new xm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),_r(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Xt.GuardRejected),!1)),dm(l=>{if(l.guards.canActivateChecks.length)return se(l).pipe(ut(u=>{let c=new Em(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(c)}),xr(u=>{let c=!1;return se(u).pipe(KN(this.paramsInheritanceStrategy,this.environmentInjector),ut({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(u,"",Xt.NoDataFromResolver)}}))}),ut(u=>{let c=new bm(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(c)}))}),dm(l=>{let u=c=>{let h=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(c.routeConfig).pipe(ut(d=>{c.component=d}),ve(()=>{})));for(let d of c.children)h.push(...u(d));return h};return Yu(u(l.targetSnapshot.root)).pipe(Ln(null),dn(1))}),dm(()=>this.afterPreactivation()),xr(()=>{let{currentSnapshot:l,targetSnapshot:u}=o,c=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return c?Ye(c).pipe(ve(()=>o)):se(o)}),ve(l=>{let u=sN(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=fe(S({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),ut(()=>{this.events.next(new Ga)}),fN(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),dn(1),ut({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Oi(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),Qd(this.transitionAbortSubject.pipe(ut(l=>{throw l}))),ta(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Xt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Fn(l=>{if(a=!0,ab(l))this.events.next(new Gn(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),uN(l)?this.events.next(new za(l.url)):o.resolve(!1);else{this.events.next(new $a(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(t.errorHandler(l))}catch(u){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(u)}}return $t}))}))}cancelNavigationTransition(t,n,i){let o=new Gn(t.id,this.urlSerializer.serialize(t.extractedUrl),n,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Q({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function lO(r){return r!==Ua}var uO=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Q({token:r,factory:()=>z(cO),providedIn:"root"})}}return r})(),Um=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},cO=(()=>{class r extends Um{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Sp(r)))(i||r)}})()}static{this.\u0275prov=Q({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),pb=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Q({token:r,factory:()=>z(hO),providedIn:"root"})}}return r})(),hO=(()=>{class r extends pb{constructor(){super(...arguments),this.location=z(Ra),this.urlSerializer=z(jm),this.options=z(Wm,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=z(Xm),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new $n,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=tb(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(n=>{n.type==="popstate"&&t(n.url,n.state)})}handleRouterEvent(t,n){if(t instanceof Va)this.stateMemento=this.createStateMemento();else if(t instanceof Fi)this.rawUrlTree=n.initialUrl;else if(t instanceof Zc){if(this.urlUpdateStrategy==="eager"&&!n.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl);this.setBrowserUrl(i,n)}}else t instanceof Ga?(this.currentUrlTree=n.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl),this.routerState=n.targetRouterState,this.urlUpdateStrategy==="deferred"&&(n.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,n))):t instanceof Gn&&(t.code===Xt.GuardRejected||t.code===Xt.NoDataFromResolver)?this.restoreHistory(n):t instanceof $a?this.restoreHistory(n,!0):t instanceof Oi&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,n){let i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||n.extras.replaceUrl){let o=this.browserPageId,s=S(S({},n.extras.state),this.generateNgRouterState(n.id,o));this.location.replaceState(i,"",s)}else{let o=S(S({},n.extras.state),this.generateNgRouterState(n.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,n=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(n&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,n){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:n}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Sp(r)))(i||r)}})()}static{this.\u0275prov=Q({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),ka=function(r){return r[r.COMPLETE=0]="COMPLETE",r[r.FAILED=1]="FAILED",r[r.REDIRECTING=2]="REDIRECTING",r}(ka||{});function dO(r,e){r.events.pipe(_r(t=>t instanceof Oi||t instanceof Gn||t instanceof $a||t instanceof Fi),ve(t=>t instanceof Oi||t instanceof Fi?ka.COMPLETE:(t instanceof Gn?t.code===Xt.Redirect||t.code===Xt.SupersededByNewNavigation:!1)?ka.REDIRECTING:ka.FAILED),_r(t=>t!==ka.REDIRECTING),dn(1)).subscribe(()=>{e()})}function fO(r){throw r}var pO={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},mO={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},mb=(()=>{class r{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=z(Lc),this.stateManager=z(pb),this.options=z(Wm,{optional:!0})||{},this.pendingTasks=z(Sa),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=z(aO),this.urlSerializer=z(jm),this.location=z(Ra),this.urlHandlingStrategy=z(Xm),this._events=new Ct,this.errorHandler=this.options.errorHandler||fO,this.navigated=!1,this.routeReuseStrategy=z(uO),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=z(qm,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!z($m,{optional:!0}),this.eventsSubscription=new Xe,this.isNgZoneEnabled=z(ze)instanceof ze&&ze.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(n=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(n,o),n instanceof Gn&&n.code!==Xt.Redirect&&n.code!==Xt.SupersededByNewNavigation)this.navigated=!0;else if(n instanceof Oi)this.navigated=!0;else if(n instanceof za){let s=this.urlHandlingStrategy.merge(n.url,i.currentRawUrl),a={info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||lO(i.source)};this.scheduleNavigation(s,Ua,null,a,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}yO(n)&&this._events.next(n)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ua,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,n)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",n)},0)})}navigateToSyncWithBrowser(t,n,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let l=S({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(t);this.scheduleNavigation(a,n,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Gm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,n={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=n,u=l?this.currentUrlTree.fragment:s,c=null;switch(a){case"merge":c=S(S({},this.currentUrlTree.queryParams),o);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=o||null}c!==null&&(c=this.removeEmptyProps(c));let h;try{let d=i?i.snapshot:this.routerState.snapshot.root;h=KE(d)}catch{(typeof t[0]!="string"||!t[0].startsWith("/"))&&(t=[]),h=this.currentUrlTree.root}return QE(h,t,c,u??null)}navigateByUrl(t,n={skipLocationChange:!1}){let i=Wo(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Ua,null,n)}navigate(t,n={skipLocationChange:!1}){return gO(t),this.navigateByUrl(this.createUrlTree(t,n),n)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,n){let i;if(n===!0?i=S({},pO):n===!1?i=S({},mO):i=n,Wo(t))return LE(this.currentUrlTree,t,i);let o=this.parseUrl(t);return LE(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((n,[i,o])=>(o!=null&&(n[i]=o),n),{})}scheduleNavigation(t,n,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,u;s?(a=s.resolve,l=s.reject,u=s.promise):u=new Promise((h,d)=>{a=h,l=d});let c=this.pendingTasks.add();return dO(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(c))}),this.navigationTransitions.handleNavigationRequest({source:n,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=Q({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function gO(r){for(let e=0;e<r.length;e++)if(r[e]==null)throw new ne(4008,!1)}function yO(r){return!(r instanceof Ga)&&!(r instanceof za)}var vO=new pe("");function gb(r,...e){return Sc([{provide:qm,multi:!0,useValue:r},[],{provide:qo,useFactory:_O,deps:[mb]},{provide:Yp,multi:!0,useFactory:xO},e.map(t=>t.\u0275providers)])}function _O(r){return r.routerState.root}function xO(){let r=z(Oo);return e=>{let t=r.get(Ma);if(e!==t.components[0])return;let n=r.get(mb),i=r.get(EO);r.get(bO)===1&&n.initialNavigation(),r.get(wO,null,ce.Optional)?.setUpPreloading(),r.get(vO,null,ce.Optional)?.init(),n.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var EO=new pe("",{factory:()=>new Ct}),bO=new pe("",{providedIn:"root",factory:()=>1});var wO=new pe("");var yb=[];var vb={providers:[gb(yb)]};var Yt=(r=>(r[r.WEBGL_LEGACY=0]="WEBGL_LEGACY",r[r.WEBGL=1]="WEBGL",r[r.WEBGL2=2]="WEBGL2",r))(Yt||{}),Ym=(r=>(r[r.UNKNOWN=0]="UNKNOWN",r[r.WEBGL=1]="WEBGL",r[r.CANVAS=2]="CANVAS",r))(Ym||{}),ih=(r=>(r[r.COLOR=16384]="COLOR",r[r.DEPTH=256]="DEPTH",r[r.STENCIL=1024]="STENCIL",r))(ih||{}),Y=(r=>(r[r.NORMAL=0]="NORMAL",r[r.ADD=1]="ADD",r[r.MULTIPLY=2]="MULTIPLY",r[r.SCREEN=3]="SCREEN",r[r.OVERLAY=4]="OVERLAY",r[r.DARKEN=5]="DARKEN",r[r.LIGHTEN=6]="LIGHTEN",r[r.COLOR_DODGE=7]="COLOR_DODGE",r[r.COLOR_BURN=8]="COLOR_BURN",r[r.HARD_LIGHT=9]="HARD_LIGHT",r[r.SOFT_LIGHT=10]="SOFT_LIGHT",r[r.DIFFERENCE=11]="DIFFERENCE",r[r.EXCLUSION=12]="EXCLUSION",r[r.HUE=13]="HUE",r[r.SATURATION=14]="SATURATION",r[r.COLOR=15]="COLOR",r[r.LUMINOSITY=16]="LUMINOSITY",r[r.NORMAL_NPM=17]="NORMAL_NPM",r[r.ADD_NPM=18]="ADD_NPM",r[r.SCREEN_NPM=19]="SCREEN_NPM",r[r.NONE=20]="NONE",r[r.SRC_OVER=0]="SRC_OVER",r[r.SRC_IN=21]="SRC_IN",r[r.SRC_OUT=22]="SRC_OUT",r[r.SRC_ATOP=23]="SRC_ATOP",r[r.DST_OVER=24]="DST_OVER",r[r.DST_IN=25]="DST_IN",r[r.DST_OUT=26]="DST_OUT",r[r.DST_ATOP=27]="DST_ATOP",r[r.ERASE=26]="ERASE",r[r.SUBTRACT=28]="SUBTRACT",r[r.XOR=29]="XOR",r))(Y||{}),kt=(r=>(r[r.POINTS=0]="POINTS",r[r.LINES=1]="LINES",r[r.LINE_LOOP=2]="LINE_LOOP",r[r.LINE_STRIP=3]="LINE_STRIP",r[r.TRIANGLES=4]="TRIANGLES",r[r.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",r[r.TRIANGLE_FAN=6]="TRIANGLE_FAN",r))(kt||{}),M=(r=>(r[r.RGBA=6408]="RGBA",r[r.RGB=6407]="RGB",r[r.RG=33319]="RG",r[r.RED=6403]="RED",r[r.RGBA_INTEGER=36249]="RGBA_INTEGER",r[r.RGB_INTEGER=36248]="RGB_INTEGER",r[r.RG_INTEGER=33320]="RG_INTEGER",r[r.RED_INTEGER=36244]="RED_INTEGER",r[r.ALPHA=6406]="ALPHA",r[r.LUMINANCE=6409]="LUMINANCE",r[r.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",r[r.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",r[r.DEPTH_STENCIL=34041]="DEPTH_STENCIL",r))(M||{}),_n=(r=>(r[r.TEXTURE_2D=3553]="TEXTURE_2D",r[r.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",r[r.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",r[r.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",r[r.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",r[r.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",r[r.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",r[r.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",r))(_n||{}),H=(r=>(r[r.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",r[r.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",r[r.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",r[r.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",r[r.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",r[r.UNSIGNED_INT=5125]="UNSIGNED_INT",r[r.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",r[r.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",r[r.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",r[r.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",r[r.BYTE=5120]="BYTE",r[r.SHORT=5122]="SHORT",r[r.INT=5124]="INT",r[r.FLOAT=5126]="FLOAT",r[r.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",r[r.HALF_FLOAT=36193]="HALF_FLOAT",r))(H||{}),B=(r=>(r[r.FLOAT=0]="FLOAT",r[r.INT=1]="INT",r[r.UINT=2]="UINT",r))(B||{}),ur=(r=>(r[r.NEAREST=0]="NEAREST",r[r.LINEAR=1]="LINEAR",r))(ur||{}),Zt=(r=>(r[r.CLAMP=33071]="CLAMP",r[r.REPEAT=10497]="REPEAT",r[r.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",r))(Zt||{}),ft=(r=>(r[r.OFF=0]="OFF",r[r.POW2=1]="POW2",r[r.ON=2]="ON",r[r.ON_MANUAL=3]="ON_MANUAL",r))(ft||{}),Oe=(r=>(r[r.NPM=0]="NPM",r[r.UNPACK=1]="UNPACK",r[r.PMA=2]="PMA",r[r.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",r[r.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",r[r.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",r))(Oe||{}),Kt=(r=>(r[r.NO=0]="NO",r[r.YES=1]="YES",r[r.AUTO=2]="AUTO",r[r.BLEND=0]="BLEND",r[r.CLEAR=1]="CLEAR",r[r.BLIT=2]="BLIT",r))(Kt||{}),oh=(r=>(r[r.AUTO=0]="AUTO",r[r.MANUAL=1]="MANUAL",r))(oh||{}),St=(r=>(r.LOW="lowp",r.MEDIUM="mediump",r.HIGH="highp",r))(St||{}),Be=(r=>(r[r.NONE=0]="NONE",r[r.SCISSOR=1]="SCISSOR",r[r.STENCIL=2]="STENCIL",r[r.SPRITE=3]="SPRITE",r[r.COLOR=4]="COLOR",r))(Be||{});var we=(r=>(r[r.NONE=0]="NONE",r[r.LOW=2]="LOW",r[r.MEDIUM=4]="MEDIUM",r[r.HIGH=8]="HIGH",r))(we||{}),Bt=(r=>(r[r.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",r[r.ARRAY_BUFFER=34962]="ARRAY_BUFFER",r[r.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",r))(Bt||{});var Zm={createCanvas:(r,e)=>{let t=document.createElement("canvas");return t.width=r,t.height=e,t},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(r,e)=>fetch(r,e),parseXML:r=>new DOMParser().parseFromString(r,"text/xml")};var b={ADAPTER:Zm,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var Km=/iPhone/i,_b=/iPod/i,xb=/iPad/i,Eb=/\biOS-universal(?:.+)Mac\b/i,Qm=/\bAndroid(?:.+)Mobile\b/i,bb=/Android/i,Zo=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,sh=/Silk/i,xn=/Windows Phone/i,wb=/\bWindows(?:.+)ARM\b/i,Tb=/BlackBerry/i,Cb=/BB10/i,Db=/Opera Mini/i,Sb=/\b(CriOS|Chrome)(?:.+)Mobile/i,Ib=/Mobile(?:.+)Firefox\b/i,Ab=function(r){return typeof r<"u"&&r.platform==="MacIntel"&&typeof r.maxTouchPoints=="number"&&r.maxTouchPoints>1&&typeof MSStream>"u"};function TO(r){return function(e){return e.test(r)}}function Qa(r){var e={userAgent:"",platform:"",maxTouchPoints:0};!r&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof r=="string"?e.userAgent=r:r&&r.userAgent&&(e={userAgent:r.userAgent,platform:r.platform,maxTouchPoints:r.maxTouchPoints||0});var t=e.userAgent,n=t.split("[FBAN");typeof n[1]<"u"&&(t=n[0]),n=t.split("Twitter"),typeof n[1]<"u"&&(t=n[0]);var i=TO(t),o={apple:{phone:i(Km)&&!i(xn),ipod:i(_b),tablet:!i(Km)&&(i(xb)||Ab(e))&&!i(xn),universal:i(Eb),device:(i(Km)||i(_b)||i(xb)||i(Eb)||Ab(e))&&!i(xn)},amazon:{phone:i(Zo),tablet:!i(Zo)&&i(sh),device:i(Zo)||i(sh)},android:{phone:!i(xn)&&i(Zo)||!i(xn)&&i(Qm),tablet:!i(xn)&&!i(Zo)&&!i(Qm)&&(i(sh)||i(bb)),device:!i(xn)&&(i(Zo)||i(sh)||i(Qm)||i(bb))||i(/\bokhttp\b/i)},windows:{phone:i(xn),tablet:i(wb),device:i(xn)||i(wb)},other:{blackberry:i(Tb),blackberry10:i(Cb),opera:i(Db),firefox:i(Ib),chrome:i(Sb),device:i(Tb)||i(Cb)||i(Db)||i(Ib)||i(Sb)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}var CO=Qa.default??Qa,cr=CO(globalThis.navigator);var A={};FS(A,{BaseTextureCache:()=>At,BoundingBox:()=>xl,CanvasRenderTarget:()=>Rh,DATA_URI:()=>Ah,EventEmitter:()=>Zn.default,ProgramCache:()=>El,TextureCache:()=>ot,clearTextureCache:()=>SC,correctBlendMode:()=>_C,createIndicesForQuads:()=>wC,decomposeDataUri:()=>RC,deprecation:()=>J,destroyTextureCache:()=>DC,detectVideoAlphaMode:()=>eC,determineCrossOrigin:()=>Nh,earcut:()=>PC.default,getBufferType:()=>Xn,getCanvasBoundingBox:()=>Ph,getResolutionOfUrl:()=>bl,hex2rgb:()=>mC,hex2string:()=>gC,interleaveTypedArrays:()=>TC,isMobile:()=>cr,isPow2:()=>vl,isWebGLSupported:()=>Dh,log2:()=>_l,nextPow2:()=>Yn,path:()=>Lg,premultiplyBlendMode:()=>yl,premultiplyRgba:()=>xC,premultiplyTint:()=>EC,premultiplyTintToRgba:()=>bC,removeItems:()=>Mh,rgb2hex:()=>vC,sayHello:()=>rC,sign:()=>CC,skipHello:()=>tC,string2hex:()=>yC,trimCanvas:()=>MC,uid:()=>Kr,url:()=>JT});b.RETINA_PREFIX=/@([0-9\.]+)x/;b.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Zn=Md(Rb(),1),PC=Md(Lb(),1);var us=Md(KT(),1);var QT={};function J(r,e,t=3){if(QT[e])return;let n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${r}`):(n=n.split(`
`).splice(t).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${r}`),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${r}`),console.warn(n))),QT[e]=!0}var JT={get parse(){return J("7.3.0","utils.url.parse is deprecated, use native URL API instead."),us.parse},get format(){return J("7.3.0","utils.url.format is deprecated, use native URL API instead."),us.format},get resolve(){return J("7.3.0","utils.url.resolve is deprecated, use native URL API instead."),us.resolve}};function Ir(r){if(typeof r!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(r)}`)}function ml(r){return r.split("?")[0].split("#")[0]}function Sk(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ik(r,e,t){return r.replace(new RegExp(Sk(e),"g"),t)}function Ak(r,e){let t="",n=0,i=-1,o=0,s=-1;for(let a=0;a<=r.length;++a){if(a<r.length)s=r.charCodeAt(a);else{if(s===47)break;s=47}if(s===47){if(!(i===a-1||o===1))if(i!==a-1&&o===2){if(t.length<2||n!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){let l=t.lastIndexOf("/");if(l!==t.length-1){l===-1?(t="",n=0):(t=t.slice(0,l),n=t.length-1-t.lastIndexOf("/")),i=a,o=0;continue}}else if(t.length===2||t.length===1){t="",n=0,i=a,o=0;continue}}e&&(t.length>0?t+="/..":t="..",n=2)}else t.length>0?t+=`/${r.slice(i+1,a)}`:t=r.slice(i+1,a),n=a-i-1;i=a,o=0}else s===46&&o!==-1?++o:o=-1}return t}var Lg={toPosix(r){return Ik(r,"\\","/")},isUrl(r){return/^https?:/.test(this.toPosix(r))},isDataUrl(r){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(r)},isBlobUrl(r){return r.startsWith("blob:")},hasProtocol(r){return/^[^/:]+:/.test(this.toPosix(r))},getProtocol(r){Ir(r),r=this.toPosix(r);let e=/^file:\/\/\//.exec(r);if(e)return e[0];let t=/^[^/:]+:\/{0,2}/.exec(r);return t?t[0]:""},toAbsolute(r,e,t){if(Ir(r),this.isDataUrl(r)||this.isBlobUrl(r))return r;let n=ml(this.toPosix(e??b.ADAPTER.getBaseUrl())),i=ml(this.toPosix(t??this.rootname(n)));return r=this.toPosix(r),r.startsWith("/")?Lg.join(i,r.slice(1)):this.isAbsolute(r)?r:this.join(n,r)},normalize(r){if(Ir(r),r.length===0)return".";if(this.isDataUrl(r)||this.isBlobUrl(r))return r;r=this.toPosix(r);let e="",t=r.startsWith("/");this.hasProtocol(r)&&(e=this.rootname(r),r=r.slice(e.length));let n=r.endsWith("/");return r=Ak(r,!1),r.length>0&&n&&(r+="/"),t?`/${r}`:e+r},isAbsolute(r){return Ir(r),r=this.toPosix(r),this.hasProtocol(r)?!0:r.startsWith("/")},join(...r){if(r.length===0)return".";let e;for(let t=0;t<r.length;++t){let n=r[t];if(Ir(n),n.length>0)if(e===void 0)e=n;else{let i=r[t-1]??"";this.joinExtensions.includes(this.extname(i).toLowerCase())?e+=`/../${n}`:e+=`/${n}`}}return e===void 0?".":this.normalize(e)},dirname(r){if(Ir(r),r.length===0)return".";r=this.toPosix(r);let e=r.charCodeAt(0),t=e===47,n=-1,i=!0,o=this.getProtocol(r),s=r;r=r.slice(o.length);for(let a=r.length-1;a>=1;--a)if(e=r.charCodeAt(a),e===47){if(!i){n=a;break}}else i=!1;return n===-1?t?"/":this.isUrl(s)?o+r:o:t&&n===1?"//":o+r.slice(0,n)},rootname(r){Ir(r),r=this.toPosix(r);let e="";if(r.startsWith("/")?e="/":e=this.getProtocol(r),this.isUrl(r)){let t=r.indexOf("/",e.length);t!==-1?e=r.slice(0,t):e=r,e.endsWith("/")||(e+="/")}return e},basename(r,e){Ir(r),e&&Ir(e),r=ml(this.toPosix(r));let t=0,n=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=r.length){if(e.length===r.length&&e===r)return"";let s=e.length-1,a=-1;for(o=r.length-1;o>=0;--o){let l=r.charCodeAt(o);if(l===47){if(!i){t=o+1;break}}else a===-1&&(i=!1,a=o+1),s>=0&&(l===e.charCodeAt(s)?--s===-1&&(n=o):(s=-1,n=a))}return t===n?n=a:n===-1&&(n=r.length),r.slice(t,n)}for(o=r.length-1;o>=0;--o)if(r.charCodeAt(o)===47){if(!i){t=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":r.slice(t,n)},extname(r){Ir(r),r=ml(this.toPosix(r));let e=-1,t=0,n=-1,i=!0,o=0;for(let s=r.length-1;s>=0;--s){let a=r.charCodeAt(s);if(a===47){if(!i){t=s+1;break}continue}n===-1&&(i=!1,n=s+1),a===46?e===-1?e=s:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||n===-1||o===0||o===1&&e===n-1&&e===t+1?"":r.slice(e,n)},parse(r){Ir(r);let e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;r=ml(this.toPosix(r));let t=r.charCodeAt(0),n=this.isAbsolute(r),i,o="";e.root=this.rootname(r),n||this.hasProtocol(r)?i=1:i=0;let s=-1,a=0,l=-1,u=!0,c=r.length-1,h=0;for(;c>=i;--c){if(t=r.charCodeAt(c),t===47){if(!u){a=c+1;break}continue}l===-1&&(u=!1,l=c+1),t===46?s===-1?s=c:h!==1&&(h=1):s!==-1&&(h=-1)}return s===-1||l===-1||h===0||h===1&&s===l-1&&s===a+1?l!==-1&&(a===0&&n?e.base=e.name=r.slice(1,l):e.base=e.name=r.slice(a,l)):(a===0&&n?(e.name=r.slice(1,s),e.base=r.slice(1,l)):(e.name=r.slice(a,s),e.base=r.slice(a,l)),e.ext=r.slice(s,l)),e.dir=this.dirname(r),o&&(e.dir=o+e.dir),e},sep:"/",delimiter:":",joinExtensions:[".html"]};var kg;function eC(){return I(this,null,function*(){return kg??(kg=I(this,null,function*(){let r=document.createElement("canvas").getContext("webgl");if(!r)return Oe.UNPACK;let e=yield new Promise(o=>{let s=document.createElement("video");s.onloadeddata=()=>o(s),s.onerror=()=>o(null),s.autoplay=!1,s.crossOrigin="anonymous",s.preload="auto",s.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",s.load()});if(!e)return Oe.UNPACK;let t=r.createTexture();r.bindTexture(r.TEXTURE_2D,t);let n=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,n),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,t,0),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,r.NONE),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,e);let i=new Uint8Array(4);return r.readPixels(0,0,1,1,r.RGBA,r.UNSIGNED_BYTE,i),r.deleteFramebuffer(n),r.deleteTexture(t),r.getExtension("WEBGL_lose_context")?.loseContext(),i[0]<=i[3]?Oe.PMA:Oe.UNPACK})),kg})}function tC(){J("7.0.0","skipHello is deprecated, please use settings.RENDER_OPTIONS.hello")}function rC(){J("7.0.0",`sayHello is deprecated, please use Renderer's "hello" option`)}var Bg;function Dh(){return typeof Bg>"u"&&(Bg=function(){let r={stencil:!0,failIfMajorPerformanceCaveat:b.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!b.ADAPTER.getWebGLRenderingContext())return!1;let e=b.ADAPTER.createCanvas(),t=e.getContext("webgl",r)||e.getContext("experimental-webgl",r),n=!!t?.getContextAttributes()?.stencil;if(t){let i=t.getExtension("WEBGL_lose_context");i&&i.loseContext()}return t=null,n}catch{return!1}}()),Bg}var Mk={grad:.9,turn:360,rad:360/(2*Math.PI)},bn=function(r){return typeof r=="string"?r.length>0:typeof r=="number"},it=function(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=Math.pow(10,e)),Math.round(t*r)/t+0},dr=function(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=1),r>t?t:r>e?r:e},cC=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},nC=function(r){return{r:dr(r.r,0,255),g:dr(r.g,0,255),b:dr(r.b,0,255),a:dr(r.a)}},Ug=function(r){return{r:it(r.r),g:it(r.g),b:it(r.b),a:it(r.a,3)}},Rk=/^#([0-9a-f]{3,8})$/i,Sh=function(r){var e=r.toString(16);return e.length<2?"0"+e:e},hC=function(r){var e=r.r,t=r.g,n=r.b,i=r.a,o=Math.max(e,t,n),s=o-Math.min(e,t,n),a=s?o===e?(t-n)/s:o===t?2+(n-e)/s:4+(e-t)/s:0;return{h:60*(a<0?a+6:a),s:o?s/o*100:0,v:o/255*100,a:i}},dC=function(r){var e=r.h,t=r.s,n=r.v,i=r.a;e=e/360*6,t/=100,n/=100;var o=Math.floor(e),s=n*(1-t),a=n*(1-(e-o)*t),l=n*(1-(1-e+o)*t),u=o%6;return{r:255*[n,a,s,s,l,n][u],g:255*[l,n,n,a,s,s][u],b:255*[s,s,l,n,n,a][u],a:i}},iC=function(r){return{h:cC(r.h),s:dr(r.s,0,100),l:dr(r.l,0,100),a:dr(r.a)}},oC=function(r){return{h:it(r.h),s:it(r.s),l:it(r.l),a:it(r.a,3)}},sC=function(r){return dC((t=(e=r).s,{h:e.h,s:(t*=((n=e.l)<50?n:100-n)/100)>0?2*t/(n+t)*100:0,v:n+t,a:e.a}));var e,t,n},gl=function(r){return{h:(e=hC(r)).h,s:(i=(200-(t=e.s))*(n=e.v)/100)>0&&i<200?t*n/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,t,n,i},Pk=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Nk=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ok=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Fk=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Vg={string:[[function(r){var e=Rk.exec(r);return e?(r=e[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:r.length===4?it(parseInt(r[3]+r[3],16)/255,2):1}:r.length===6||r.length===8?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:r.length===8?it(parseInt(r.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(r){var e=Ok.exec(r)||Fk.exec(r);return e?e[2]!==e[4]||e[4]!==e[6]?null:nC({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(r){var e=Pk.exec(r)||Nk.exec(r);if(!e)return null;var t,n,i=iC({h:(t=e[1],n=e[2],n===void 0&&(n="deg"),Number(t)*(Mk[n]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return sC(i)},"hsl"]],object:[[function(r){var e=r.r,t=r.g,n=r.b,i=r.a,o=i===void 0?1:i;return bn(e)&&bn(t)&&bn(n)?nC({r:Number(e),g:Number(t),b:Number(n),a:Number(o)}):null},"rgb"],[function(r){var e=r.h,t=r.s,n=r.l,i=r.a,o=i===void 0?1:i;if(!bn(e)||!bn(t)||!bn(n))return null;var s=iC({h:Number(e),s:Number(t),l:Number(n),a:Number(o)});return sC(s)},"hsl"],[function(r){var e=r.h,t=r.s,n=r.v,i=r.a,o=i===void 0?1:i;if(!bn(e)||!bn(t)||!bn(n))return null;var s=function(a){return{h:cC(a.h),s:dr(a.s,0,100),v:dr(a.v,0,100),a:dr(a.a)}}({h:Number(e),s:Number(t),v:Number(n),a:Number(o)});return dC(s)},"hsv"]]},aC=function(r,e){for(var t=0;t<e.length;t++){var n=e[t][0](r);if(n)return[n,e[t][1]]}return[null,void 0]},Lk=function(r){return typeof r=="string"?aC(r.trim(),Vg.string):typeof r=="object"&&r!==null?aC(r,Vg.object):[null,void 0]};var jg=function(r,e){var t=gl(r);return{h:t.h,s:dr(t.s+100*e,0,100),l:t.l,a:t.a}},Hg=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},lC=function(r,e){var t=gl(r);return{h:t.h,s:t.s,l:dr(t.l+100*e,0,100),a:t.a}},$g=function(){function r(e){this.parsed=Lk(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return this.parsed!==null},r.prototype.brightness=function(){return it(Hg(this.rgba),2)},r.prototype.isDark=function(){return Hg(this.rgba)<.5},r.prototype.isLight=function(){return Hg(this.rgba)>=.5},r.prototype.toHex=function(){return e=Ug(this.rgba),t=e.r,n=e.g,i=e.b,s=(o=e.a)<1?Sh(it(255*o)):"","#"+Sh(t)+Sh(n)+Sh(i)+s;var e,t,n,i,o,s},r.prototype.toRgb=function(){return Ug(this.rgba)},r.prototype.toRgbString=function(){return e=Ug(this.rgba),t=e.r,n=e.g,i=e.b,(o=e.a)<1?"rgba("+t+", "+n+", "+i+", "+o+")":"rgb("+t+", "+n+", "+i+")";var e,t,n,i,o},r.prototype.toHsl=function(){return oC(gl(this.rgba))},r.prototype.toHslString=function(){return e=oC(gl(this.rgba)),t=e.h,n=e.s,i=e.l,(o=e.a)<1?"hsla("+t+", "+n+"%, "+i+"%, "+o+")":"hsl("+t+", "+n+"%, "+i+"%)";var e,t,n,i,o},r.prototype.toHsv=function(){return e=hC(this.rgba),{h:it(e.h),s:it(e.s),v:it(e.v),a:it(e.a,3)};var e},r.prototype.invert=function(){return Ar({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},r.prototype.saturate=function(e){return e===void 0&&(e=.1),Ar(jg(this.rgba,e))},r.prototype.desaturate=function(e){return e===void 0&&(e=.1),Ar(jg(this.rgba,-e))},r.prototype.grayscale=function(){return Ar(jg(this.rgba,-1))},r.prototype.lighten=function(e){return e===void 0&&(e=.1),Ar(lC(this.rgba,e))},r.prototype.darken=function(e){return e===void 0&&(e=.1),Ar(lC(this.rgba,-e))},r.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},r.prototype.alpha=function(e){return typeof e=="number"?Ar({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):it(this.rgba.a,3);var t},r.prototype.hue=function(e){var t=gl(this.rgba);return typeof e=="number"?Ar({h:e,s:t.s,l:t.l,a:t.a}):it(t.h)},r.prototype.isEqual=function(e){return this.toHex()===Ar(e).toHex()},r}(),Ar=function(r){return r instanceof $g?r:new $g(r)},uC=[],fC=function(r){r.forEach(function(e){uC.indexOf(e)<0&&(e($g,Vg),uC.push(e))})};function pC(r,e){var t={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var i in t)n[t[i]]=i;var o={};r.prototype.toName=function(s){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,u=n[this.toHex()];if(u)return u;if(s?.closest){var c=this.toRgb(),h=1/0,d="black";if(!o.length)for(var f in t)o[f]=new r(t[f]).toRgb();for(var p in t){var m=(a=c,l=o[p],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));m<h&&(h=m,d=p)}return d}},e.string.push([function(s){var a=s.toLowerCase(),l=a==="transparent"?"#0000":t[a];return l?new r(l).toRgb():null},"name"])}fC([pC]);var cs=class Ih{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof Ih)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?S({},e):e}isSourceEqual(e,t){let n=typeof e;if(n!==typeof t)return!1;if(n==="number"||n==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((i,o)=>i===t[o]);if(e!==null&&t!==null){let i=Object.keys(e),o=Object.keys(t);return i.length!==o.length?!1:i.every(s=>e[s]===t[s])}return e===t}toRgba(){let[e,t,n,i]=this._components;return{r:e,g:t,b:n,a:i}}toRgb(){let[e,t,n]=this._components;return{r:e,g:t,b:n}}toRgbaString(){let[e,t,n]=this.toUint8RgbArray();return`rgba(${e},${t},${n},${this.alpha})`}toUint8RgbArray(e){let[t,n,i]=this._components;return e=e??[],e[0]=Math.round(t*255),e[1]=Math.round(n*255),e[2]=Math.round(i*255),e}toRgbArray(e){e=e??[];let[t,n,i]=this._components;return e[0]=t,e[1]=n,e[2]=i,e}toNumber(){return this._int}toLittleEndianNumber(){let e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){let[t,n,i,o]=Ih.temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=n,this._components[2]*=i,this._components[3]*=o,this.refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,t=!0){if(e===1)return(255<<24)+this._int;if(e===0)return t?0:this._int;let n=this._int>>16&255,i=this._int>>8&255,o=this._int&255;return t&&(n=n*e+.5|0,i=i*e+.5|0,o=o*e+.5|0),(e*255<<24)+(n<<16)+(i<<8)+o}toHex(){let e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){let e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){let[t,n,i]=this._components;return this._components[0]=Math.round(t*e)/e,this._components[1]=Math.round(n*e)/e,this._components[2]=Math.round(i*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];let[t,n,i,o]=this._components;return e[0]=t,e[1]=n,e[2]=i,e[3]=o,e}normalize(e){let t,n,i,o;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){let s=e;t=(s>>16&255)/255,n=(s>>8&255)/255,i=(s&255)/255,o=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[t,n,i,o=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[t,n,i,o=255]=e,t/=255,n/=255,i/=255,o/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){let a=Ih.HEX_PATTERN.exec(e);a&&(e=`#${a[2]}`)}let s=Ar(e);s.isValid()&&({r:t,g:n,b:i,a:o}=s.rgba,t/=255,n/=255,i/=255)}if(t!==void 0)this._components[0]=t,this._components[1]=n,this._components[2]=i,this._components[3]=o,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);let[e,t,n]=this._components;this._int=(e*255<<16)+(t*255<<8)+(n*255|0)}_clamp(e,t=0,n=1){return typeof e=="number"?Math.min(Math.max(e,t),n):(e.forEach((i,o)=>{e[o]=Math.min(Math.max(i,t),n)}),e)}};cs.shared=new cs,cs.temp=new cs,cs.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;var te=cs;function mC(r,e=[]){return J("7.2.0","utils.hex2rgb is deprecated, use Color#toRgbArray instead"),te.shared.setValue(r).toRgbArray(e)}function gC(r){return J("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),te.shared.setValue(r).toHex()}function yC(r){return J("7.2.0","utils.string2hex is deprecated, use Color#toNumber instead"),te.shared.setValue(r).toNumber()}function vC(r){return J("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),te.shared.setValue(r).toNumber()}function kk(){let r=[],e=[];for(let n=0;n<32;n++)r[n]=n,e[n]=n;r[Y.NORMAL_NPM]=Y.NORMAL,r[Y.ADD_NPM]=Y.ADD,r[Y.SCREEN_NPM]=Y.SCREEN,e[Y.NORMAL]=Y.NORMAL_NPM,e[Y.ADD]=Y.ADD_NPM,e[Y.SCREEN]=Y.SCREEN_NPM;let t=[];return t.push(e),t.push(r),t}var yl=kk();function _C(r,e){return yl[e?1:0][r]}function xC(r,e,t,n=!0){return J("7.2.0","utils.premultiplyRgba has moved to Color.premultiply"),te.shared.setValue(r).premultiply(e,n).toArray(t??new Float32Array(4))}function EC(r,e){return J("7.2.0","utils.premultiplyTint has moved to Color.toPremultiplied"),te.shared.setValue(r).toPremultiplied(e)}function bC(r,e,t,n=!0){return J("7.2.0","utils.premultiplyTintToRgba has moved to Color.premultiply"),te.shared.setValue(r).premultiply(e,n).toArray(t??new Float32Array(4))}var Ah=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function wC(r,e=null){let t=r*6;if(e=e||new Uint16Array(t),e.length!==t)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${t}`);for(let n=0,i=0;n<t;n+=6,i+=4)e[n+0]=i+0,e[n+1]=i+1,e[n+2]=i+2,e[n+3]=i+0,e[n+4]=i+2,e[n+5]=i+3;return e}function Xn(r){if(r.BYTES_PER_ELEMENT===4)return r instanceof Float32Array?"Float32Array":r instanceof Uint32Array?"Uint32Array":"Int32Array";if(r.BYTES_PER_ELEMENT===2){if(r instanceof Uint16Array)return"Uint16Array"}else if(r.BYTES_PER_ELEMENT===1&&r instanceof Uint8Array)return"Uint8Array";return null}var Bk={Float32Array,Uint32Array,Int32Array,Uint8Array};function TC(r,e){let t=0,n=0,i={};for(let l=0;l<r.length;l++)n+=e[l],t+=r[l].length;let o=new ArrayBuffer(t*4),s=null,a=0;for(let l=0;l<r.length;l++){let u=e[l],c=r[l],h=Xn(c);i[h]||(i[h]=new Bk[h](o)),s=i[h];for(let d=0;d<c.length;d++){let f=(d/u|0)*n+a,p=d%u;s[f+p]=c[d]}a+=u}return new Float32Array(o)}function Yn(r){return r+=r===0?1:0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1}function vl(r){return!(r&r-1)&&!!r}function _l(r){let e=(r>65535?1:0)<<4;r>>>=e;let t=(r>255?1:0)<<3;return r>>>=t,e|=t,t=(r>15?1:0)<<2,r>>>=t,e|=t,t=(r>3?1:0)<<1,r>>>=t,e|=t,e|r>>1}function Mh(r,e,t){let n=r.length,i;if(e>=n||t===0)return;t=e+t>n?n-e:t;let o=n-t;for(i=e;i<o;++i)r[i]=r[i+t];r.length=o}function CC(r){return r===0?0:r<0?-1:1}var Uk=0;function Kr(){return++Uk}var Gg=class{constructor(r,e,t,n){this.left=r,this.top=e,this.right=t,this.bottom=n}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};Gg.EMPTY=new Gg(0,0,0,0);var xl=Gg;var El={},ot=Object.create(null),At=Object.create(null);function DC(){let r;for(r in ot)ot[r].destroy();for(r in At)At[r].destroy()}function SC(){let r;for(r in ot)delete ot[r];for(r in At)delete At[r]}var Rh=class{constructor(e,t,n){this._canvas=b.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=n||b.RESOLUTION,this.resize(e,t)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,t){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(t*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}};function IC(r,e,t){for(let n=0,i=4*t*e;n<e;++n,i+=4)if(r[i+3]!==0)return!1;return!0}function AC(r,e,t,n,i){let o=4*e;for(let s=n,a=n*o+4*t;s<=i;++s,a+=o)if(r[a+3]!==0)return!1;return!0}function Ph(r){let{width:e,height:t}=r,n=r.getContext("2d",{willReadFrequently:!0});if(n===null)throw new TypeError("Failed to get canvas 2D context");let i=n.getImageData(0,0,e,t).data,o=0,s=0,a=e-1,l=t-1;for(;s<t&&IC(i,e,s);)++s;if(s===t)return xl.EMPTY;for(;IC(i,e,l);)--l;for(;AC(i,e,o,s,l);)++o;for(;AC(i,e,a,s,l);)--a;return++a,++l,new xl(o,s,a,l)}function MC(r){let e=Ph(r),{width:t,height:n}=e,i=null;if(!e.isEmpty()){let o=r.getContext("2d");if(o===null)throw new TypeError("Failed to get canvas 2D context");i=o.getImageData(e.left,e.top,t,n)}return{width:t,height:n,data:i}}function RC(r){let e=Ah.exec(r);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}function Nh(r,e=globalThis.location){if(r.startsWith("data:"))return"";e=e||globalThis.location;let t=new URL(r,document.baseURI);return t.hostname!==e.hostname||t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}function bl(r,e=1){let t=b.RETINA_PREFIX?.exec(r);return t?parseFloat(t[1]):e}var E=(r=>(r.Renderer="renderer",r.Application="application",r.RendererSystem="renderer-webgl-system",r.RendererPlugin="renderer-webgl-plugin",r.CanvasRendererSystem="renderer-canvas-system",r.CanvasRendererPlugin="renderer-canvas-plugin",r.Asset="asset",r.LoadParser="load-parser",r.ResolveParser="resolve-parser",r.CacheParser="cache-parser",r.DetectionParser="detection-parser",r))(E||{}),zg=r=>{if(typeof r=="function"||typeof r=="object"&&r.extension){if(!r.extension)throw new Error("Extension class must have an extension object");r=fe(S({},typeof r.extension!="object"?{type:r.extension}:r.extension),{ref:r})}if(typeof r=="object")r=S({},r);else throw new Error("Invalid extension type");return typeof r.type=="string"&&(r.type=[r.type]),r},NC=(r,e)=>zg(r).priority??e,w={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...r){return r.map(zg).forEach(e=>{e.type.forEach(t=>this._removeHandlers[t]?.(e))}),this},add(...r){return r.map(zg).forEach(e=>{e.type.forEach(t=>{let n=this._addHandlers,i=this._queue;n[t]?n[t]?.(e):(i[t]=i[t]||[],i[t]?.push(e))})}),this},handle(r,e,t){let n=this._addHandlers,i=this._removeHandlers;if(n[r]||i[r])throw new Error(`Extension type ${r} already has a handler`);n[r]=e,i[r]=t;let o=this._queue;return o[r]&&(o[r]?.forEach(s=>e(s)),delete o[r]),this},handleByMap(r,e){return this.handle(r,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByList(r,e,t=-1){return this.handle(r,n=>{e.includes(n.ref)||(e.push(n.ref),e.sort((i,o)=>NC(o,t)-NC(i,t)))},n=>{let i=e.indexOf(n.ref);i!==-1&&e.splice(i,1)})}};var Kn=class{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}};var jk=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function Hk(r){let e="";for(let t=0;t<r;++t)t>0&&(e+=`
else `),t<r-1&&(e+=`if(test == ${t}.0){}`);return e}function Oh(r,e){if(r===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");let t=e.createShader(e.FRAGMENT_SHADER);for(;;){let n=jk.replace(/%forloop%/gi,Hk(r));if(e.shaderSource(t,n),e.compileShader(t),!e.getShaderParameter(t,e.COMPILE_STATUS))r=r/2|0;else break}return r}var Wg=0,qg=1,Xg=2,Yg=3,Zg=4,Kg=5,st=class r{constructor(){this.data=0,this.blendMode=Y.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<Wg)}set blend(e){!!(this.data&1<<Wg)!==e&&(this.data^=1<<Wg)}get offsets(){return!!(this.data&1<<qg)}set offsets(e){!!(this.data&1<<qg)!==e&&(this.data^=1<<qg)}get culling(){return!!(this.data&1<<Xg)}set culling(e){!!(this.data&1<<Xg)!==e&&(this.data^=1<<Xg)}get depthTest(){return!!(this.data&1<<Yg)}set depthTest(e){!!(this.data&1<<Yg)!==e&&(this.data^=1<<Yg)}get depthMask(){return!!(this.data&1<<Kg)}set depthMask(e){!!(this.data&1<<Kg)!==e&&(this.data^=1<<Kg)}get clockwiseFrontFace(){return!!(this.data&1<<Zg)}set clockwiseFrontFace(e){!!(this.data&1<<Zg)!==e&&(this.data^=1<<Zg)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==Y.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){let e=new r;return e.depthTest=!1,e.blend=!0,e}};st.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};var wl=[];function hs(r,e){if(!r)return null;let t="";if(typeof r=="string"){let n=/\.(\w{3,4})(?:$|\?|#)/i.exec(r);n&&(t=n[1].toLowerCase())}for(let n=wl.length-1;n>=0;--n){let i=wl[n];if(i.test&&i.test(r,t))return new i(r,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var He=class{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,t,n,i,o,s,a,l){if(arguments.length>8)throw new Error("max arguments reached");let{name:u,items:c}=this;this._aliasCount++;for(let h=0,d=c.length;h<d;h++)c[h][u](e,t,n,i,o,s,a,l);return c===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){let t=this.items.indexOf(e);return t!==-1&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}};Object.defineProperties(He.prototype,{dispatch:{value:He.prototype.emit},run:{value:He.prototype.emit}});var Qt=class{constructor(e=0,t=0){this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new He("setRealSize"),this.onUpdate=new He("update"),this.onError=new He("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,t){(e!==this._width||t!==this._height)&&(this._width=e,this._height=t,this.onResize.emit(e,t))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,t,n){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,t){return!1}};var Mr=class extends Qt{constructor(e,t){let{width:n,height:i}=t||{};if(!n||!i)throw new Error("BufferResource width or height invalid");super(n,i),this.data=e,this.unpackAlignment=t.unpackAlignment??4}upload(e,t,n){let i=e.gl;i.pixelStorei(i.UNPACK_ALIGNMENT,this.unpackAlignment),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===Oe.UNPACK);let o=t.realWidth,s=t.realHeight;return n.width===o&&n.height===s?i.texSubImage2D(t.target,0,0,0,o,s,t.format,n.type,this.data):(n.width=o,n.height=s,i.texImage2D(t.target,0,n.internalFormat,o,s,0,t.format,n.type,this.data)),!0}dispose(){this.data=null}static test(e){return e===null||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}};var Vk={scaleMode:ur.NEAREST,alphaMode:Oe.NPM},Qg=class ds extends Zn.default{constructor(e=null,t=null){super(),t=Object.assign({},ds.defaultOptions,t);let{alphaMode:n,mipmap:i,anisotropicLevel:o,scaleMode:s,width:a,height:l,wrapMode:u,format:c,type:h,target:d,resolution:f,resourceOptions:p}=t;e&&!(e instanceof Qt)&&(e=hs(e,p),e.internal=!0),this.resolution=f||b.RESOLUTION,this.width=Math.round((a||0)*this.resolution)/this.resolution,this.height=Math.round((l||0)*this.resolution)/this.resolution,this._mipmap=i,this.anisotropicLevel=o,this._wrapMode=u,this._scaleMode=s,this.format=c,this.type=h,this.target=d,this.alphaMode=n,this.uid=Kr(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=a>0&&l>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,t){let n;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),t!==void 0&&t!==this.mipmap&&(this.mipmap=t,n=!0),n&&this.dirtyStyleId++,this}setSize(e,t,n){return n=n||this.resolution,this.setRealSize(e*n,t*n,n)}setRealSize(e,t,n){return this.resolution=n||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=vl(this.realWidth)&&vl(this.realHeight)}setResolution(e){let t=this.resolution;return t===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete At[this.cacheId],delete ot[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),ds.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,t,n=b.STRICT_TEXTURE_CACHE){let i=typeof e=="string",o=null;if(i)o=e;else{if(!e._pixiId){let a=t?.pixiIdPrefix||"pixiid";e._pixiId=`${a}_${Kr()}`}o=e._pixiId}let s=At[o];if(i&&n&&!s)throw new Error(`The cacheId "${o}" does not exist in BaseTextureCache.`);return s||(s=new ds(e,t),s.cacheId=o,ds.addToCache(s,o)),s}static fromBuffer(e,t,n,i){e=e||new Float32Array(t*n*4);let o=new Mr(e,S({width:t,height:n},i?.resourceOptions)),s,a;return e instanceof Float32Array?(s=M.RGBA,a=H.FLOAT):e instanceof Int32Array?(s=M.RGBA_INTEGER,a=H.INT):e instanceof Uint32Array?(s=M.RGBA_INTEGER,a=H.UNSIGNED_INT):e instanceof Int16Array?(s=M.RGBA_INTEGER,a=H.SHORT):e instanceof Uint16Array?(s=M.RGBA_INTEGER,a=H.UNSIGNED_SHORT):e instanceof Int8Array?(s=M.RGBA,a=H.BYTE):(s=M.RGBA,a=H.UNSIGNED_BYTE),o.internal=!0,new ds(o,Object.assign({},Vk,{type:a,format:s},i))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),At[t]&&At[t]!==e&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),At[t]=e)}static removeFromCache(e){if(typeof e=="string"){let t=At[e];if(t){let n=t.textureCacheIds.indexOf(e);return n>-1&&t.textureCacheIds.splice(n,1),delete At[e],t}}else if(e?.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)delete At[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}};Qg.defaultOptions={mipmap:ft.POW2,anisotropicLevel:0,scaleMode:ur.LINEAR,wrapMode:Zt.CLAMP,alphaMode:Oe.UNPACK,target:_n.TEXTURE_2D,format:M.RGBA,type:H.UNSIGNED_BYTE},Qg._globalBatch=0;var G=Qg;var Qn=class{constructor(){this.texArray=null,this.blend=0,this.type=kt.TRIANGLES,this.start=0,this.size=0,this.data=null}};var $k=0,Ce=class r{constructor(e,t=!0,n=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=t,this.id=$k++,this.disposeRunner=new He("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?Bt.ELEMENT_ARRAY_BUFFER:Bt.ARRAY_BUFFER}get index(){return this.type===Bt.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new r(e)}};var fs=class r{constructor(e,t=0,n=!1,i=H.FLOAT,o,s,a,l=1){this.buffer=e,this.size=t,this.normalized=n,this.type=i,this.stride=o,this.start=s,this.instance=a,this.divisor=l}destroy(){this.buffer=null}static from(e,t,n,i,o){return new r(e,t,n,i,o)}};var Gk={Float32Array,Uint32Array,Int32Array,Uint8Array};function OC(r,e){let t=0,n=0,i={};for(let l=0;l<r.length;l++)n+=e[l],t+=r[l].length;let o=new ArrayBuffer(t*4),s=null,a=0;for(let l=0;l<r.length;l++){let u=e[l],c=r[l],h=Xn(c);i[h]||(i[h]=new Gk[h](o)),s=i[h];for(let d=0;d<c.length;d++){let f=(d/u|0)*n+a,p=d%u;s[f+p]=c[d]}a+=u}return new Float32Array(o)}var FC={5126:4,5123:2,5121:1},zk=0,Wk={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},Jt=class r{constructor(e=[],t={}){this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=zk++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new He("disposeGeometry"),this.refCount=0}addAttribute(e,t,n=0,i=!1,o,s,a,l=!1){if(!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof Ce||(t instanceof Array&&(t=new Float32Array(t)),t=new Ce(t));let u=e.split("|");if(u.length>1){for(let h=0;h<u.length;h++)this.addAttribute(u[h],t,n,i,o);return this}let c=this.buffers.indexOf(t);return c===-1&&(this.buffers.push(t),c=this.buffers.length-1),this.attributes[e]=new fs(c,n,i,o,s,a,l),this.instanced=this.instanced||l,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof Ce||(e instanceof Array&&(e=new Uint16Array(e)),e=new Ce(e)),e.type=Bt.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;let e=[],t=[],n=new Ce,i;for(i in this.attributes){let o=this.attributes[i],s=this.buffers[o.buffer];e.push(s.data),t.push(o.size*FC[o.type]/4),o.buffer=0}for(n.data=OC(e,t),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(let e in this.attributes){let t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){let e=new r;for(let t=0;t<this.buffers.length;t++)e.buffers[t]=new Ce(this.buffers[t].data.slice(0));for(let t in this.attributes){let n=this.attributes[t];e.attributes[t]=new fs(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=Bt.ELEMENT_ARRAY_BUFFER),e}static merge(e){let t=new r,n=[],i=[],o=[],s;for(let a=0;a<e.length;a++){s=e[a];for(let l=0;l<s.buffers.length;l++)i[l]=i[l]||0,i[l]+=s.buffers[l].data.length,o[l]=0}for(let a=0;a<s.buffers.length;a++)n[a]=new Wk[Xn(s.buffers[a].data)](i[a]),t.buffers[a]=new Ce(n[a]);for(let a=0;a<e.length;a++){s=e[a];for(let l=0;l<s.buffers.length;l++)n[l].set(s.buffers[l].data,o[l]),o[l]+=s.buffers[l].data.length}if(t.attributes=s.attributes,s.indexBuffer){t.indexBuffer=t.buffers[s.buffers.indexOf(s.indexBuffer)],t.indexBuffer.type=Bt.ELEMENT_ARRAY_BUFFER;let a=0,l=0,u=0,c=0;for(let h=0;h<s.buffers.length;h++)if(s.buffers[h]!==s.indexBuffer){c=h;break}for(let h in s.attributes){let d=s.attributes[h];(d.buffer|0)===c&&(l+=d.size*FC[d.type]/4)}for(let h=0;h<e.length;h++){let d=e[h].indexBuffer.data;for(let f=0;f<d.length;f++)t.indexBuffer.data[f+u]+=a;a+=e[h].buffers[c].data.length/l,u+=d.length}}return t}};var Hi=class extends Jt{constructor(e=!1){super(),this._buffer=new Ce(null,e,!1),this._indexBuffer=new Ce(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,H.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,H.FLOAT).addAttribute("aColor",this._buffer,4,!0,H.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,H.FLOAT).addIndex(this._indexBuffer)}};var Jn=Math.PI*2,Jg=180/Math.PI,ey=Math.PI/180,Se=(r=>(r[r.POLY=0]="POLY",r[r.RECT=1]="RECT",r[r.CIRC=2]="CIRC",r[r.ELIP=3]="ELIP",r[r.RREC=4]="RREC",r))(Se||{});var Z=class r{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new r(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}};Z.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};var Fh=[new Z,new Z,new Z,new Z],W=class r{constructor(e=0,t=0,n=0,i=0){this.x=Number(e),this.y=Number(t),this.width=Number(n),this.height=Number(i),this.type=Se.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new r(0,0,0,0)}clone(){return new r(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,t){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}intersects(e,t){if(!t){let R=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=R)return!1;let k=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>k}let n=this.left,i=this.right,o=this.top,s=this.bottom;if(i<=n||s<=o)return!1;let a=Fh[0].set(e.left,e.top),l=Fh[1].set(e.left,e.bottom),u=Fh[2].set(e.right,e.top),c=Fh[3].set(e.right,e.bottom);if(u.x<=a.x||l.y<=a.y)return!1;let h=Math.sign(t.a*t.d-t.b*t.c);if(h===0||(t.apply(a,a),t.apply(l,l),t.apply(u,u),t.apply(c,c),Math.max(a.x,l.x,u.x,c.x)<=n||Math.min(a.x,l.x,u.x,c.x)>=i||Math.max(a.y,l.y,u.y,c.y)<=o||Math.min(a.y,l.y,u.y,c.y)>=s))return!1;let d=h*(l.y-a.y),f=h*(a.x-l.x),p=d*n+f*o,m=d*i+f*o,y=d*n+f*s,v=d*i+f*s;if(Math.max(p,m,y,v)<=d*a.x+f*a.y||Math.min(p,m,y,v)>=d*c.x+f*c.y)return!1;let x=h*(a.y-u.y),g=h*(u.x-a.x),_=x*n+g*o,D=x*i+g*o,N=x*n+g*s,P=x*i+g*s;return!(Math.max(_,D,N,P)<=x*a.x+g*a.y||Math.min(_,D,N,P)>=x*c.x+g*c.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=e*2,this.height+=t*2,this}fit(e){let t=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),o=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(n-t,0),this.y=i,this.height=Math.max(o-i,0),this}ceil(e=1,t=.001){let n=Math.ceil((this.x+this.width-t)*e)/e,i=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=n-this.x,this.height=i-this.y,this}enlarge(e){let t=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),o=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=n-t,this.y=i,this.height=o-i,this}};W.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};var ps=class r{constructor(e=0,t=0,n=0){this.x=e,this.y=t,this.radius=n,this.type=Se.CIRC}clone(){return new r(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;let n=this.radius*this.radius,i=this.x-e,o=this.y-t;return i*=i,o*=o,i+o<=n}getBounds(){return new W(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}};ps.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};var ms=class r{constructor(e=0,t=0,n=0,i=0){this.x=e,this.y=t,this.width=n,this.height=i,this.type=Se.ELIP}clone(){return new r(this.x,this.y,this.width,this.height)}contains(e,t){if(this.width<=0||this.height<=0)return!1;let n=(e-this.x)/this.width,i=(t-this.y)/this.height;return n*=n,i*=i,n+i<=1}getBounds(){return new W(this.x-this.width,this.y-this.height,this.width,this.height)}};ms.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};var Qr=class r{constructor(...e){let t=Array.isArray(e[0])?e[0]:e;if(typeof t[0]!="number"){let n=[];for(let i=0,o=t.length;i<o;i++)n.push(t[i].x,t[i].y);t=n}this.points=t,this.type=Se.POLY,this.closeStroke=!0}clone(){let e=this.points.slice(),t=new r(e);return t.closeStroke=this.closeStroke,t}contains(e,t){let n=!1,i=this.points.length/2;for(let o=0,s=i-1;o<i;s=o++){let a=this.points[o*2],l=this.points[o*2+1],u=this.points[s*2],c=this.points[s*2+1];l>t!=c>t&&e<(u-a)*((t-l)/(c-l))+a&&(n=!n)}return n}};Qr.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((r,e)=>`${r}, ${e}`,"")}]`};var gs=class r{constructor(e=0,t=0,n=0,i=0,o=20){this.x=e,this.y=t,this.width=n,this.height=i,this.radius=o,this.type=Se.RREC}clone(){return new r(this.x,this.y,this.width,this.height,this.radius)}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){let n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+n&&t<=this.y+this.height-n||e>=this.x+n&&e<=this.x+this.width-n)return!0;let i=e-(this.x+n),o=t-(this.y+n),s=n*n;if(i*i+o*o<=s||(i=e-(this.x+this.width-n),i*i+o*o<=s)||(o=t-(this.y+this.height-n),i*i+o*o<=s)||(i=e-(this.x+n),i*i+o*o<=s))return!0}return!1}};gs.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};var le=class r{constructor(e=1,t=0,n=0,i=1,o=0,s=0){this.array=null,this.a=e,this.b=t,this.c=n,this.d=i,this.tx=o,this.ty=s}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,n,i,o,s){return this.a=e,this.b=t,this.c=n,this.d=i,this.tx=o,this.ty=s,this}toArray(e,t){this.array||(this.array=new Float32Array(9));let n=t||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}apply(e,t){t=t||new Z;let n=e.x,i=e.y;return t.x=this.a*n+this.c*i+this.tx,t.y=this.b*n+this.d*i+this.ty,t}applyInverse(e,t){t=t||new Z;let n=1/(this.a*this.d+this.c*-this.b),i=e.x,o=e.y;return t.x=this.d*n*i+-this.c*n*o+(this.ty*this.c-this.tx*this.d)*n,t.y=this.a*n*o+-this.b*n*i+(-this.ty*this.a+this.tx*this.b)*n,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){let t=Math.cos(e),n=Math.sin(e),i=this.a,o=this.c,s=this.tx;return this.a=i*t-this.b*n,this.b=i*n+this.b*t,this.c=o*t-this.d*n,this.d=o*n+this.d*t,this.tx=s*t-this.ty*n,this.ty=s*n+this.ty*t,this}append(e){let t=this.a,n=this.b,i=this.c,o=this.d;return this.a=e.a*t+e.b*i,this.b=e.a*n+e.b*o,this.c=e.c*t+e.d*i,this.d=e.c*n+e.d*o,this.tx=e.tx*t+e.ty*i+this.tx,this.ty=e.tx*n+e.ty*o+this.ty,this}setTransform(e,t,n,i,o,s,a,l,u){return this.a=Math.cos(a+u)*o,this.b=Math.sin(a+u)*o,this.c=-Math.sin(a-l)*s,this.d=Math.cos(a-l)*s,this.tx=e-(n*this.a+i*this.c),this.ty=t-(n*this.b+i*this.d),this}prepend(e){let t=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){let n=this.a,i=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){let t=this.a,n=this.b,i=this.c,o=this.d,s=e.pivot,a=-Math.atan2(-i,o),l=Math.atan2(n,t),u=Math.abs(a+l);return u<1e-5||Math.abs(Jn-u)<1e-5?(e.rotation=l,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=l),e.scale.x=Math.sqrt(t*t+n*n),e.scale.y=Math.sqrt(i*i+o*o),e.position.x=this.tx+(s.x*t+s.y*i),e.position.y=this.ty+(s.x*n+s.y*o),e}invert(){let e=this.a,t=this.b,n=this.c,i=this.d,o=this.tx,s=e*i-t*n;return this.a=i/s,this.b=-t/s,this.c=-n/s,this.d=e/s,this.tx=(n*this.ty-i*o)/s,this.ty=-(e*this.ty-t*o)/s,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){let e=new r;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}static get IDENTITY(){return new r}static get TEMP_MATRIX(){return new r}};le.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};var Vi=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],$i=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Gi=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],zi=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],ty=[],LC=[],Lh=Math.sign;function qk(){for(let r=0;r<16;r++){let e=[];ty.push(e);for(let t=0;t<16;t++){let n=Lh(Vi[r]*Vi[t]+Gi[r]*$i[t]),i=Lh($i[r]*Vi[t]+zi[r]*$i[t]),o=Lh(Vi[r]*Gi[t]+Gi[r]*zi[t]),s=Lh($i[r]*Gi[t]+zi[r]*zi[t]);for(let a=0;a<16;a++)if(Vi[a]===n&&$i[a]===i&&Gi[a]===o&&zi[a]===s){e.push(a);break}}}for(let r=0;r<16;r++){let e=new le;e.set(Vi[r],$i[r],Gi[r],zi[r],0,0),LC.push(e)}}qk();var Ae={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:r=>Vi[r],uY:r=>$i[r],vX:r=>Gi[r],vY:r=>zi[r],inv:r=>r&8?r&15:-r&7,add:(r,e)=>ty[r][e],sub:(r,e)=>ty[r][Ae.inv(e)],rotate180:r=>r^4,isVertical:r=>(r&3)===2,byDirection:(r,e)=>Math.abs(r)*2<=Math.abs(e)?e>=0?Ae.S:Ae.N:Math.abs(e)*2<=Math.abs(r)?r>0?Ae.E:Ae.W:e>0?r>0?Ae.SE:Ae.SW:r>0?Ae.NE:Ae.NW,matrixAppendRotationInv:(r,e,t=0,n=0)=>{let i=LC[Ae.inv(e)];i.tx=t,i.ty=n,r.append(i)}};var er=class r{constructor(e,t,n=0,i=0){this._x=n,this._y=i,this.cb=e,this.scope=t}clone(e=this.cb,t=this.scope){return new r(e,t,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}};er.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};var ry=class{constructor(){this.worldTransform=new le,this.localTransform=new le,this.position=new er(this.onChange,this,0,0),this.scale=new er(this.onChange,this,1,1),this.pivot=new er(this.onChange,this,0,0),this.skew=new er(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){let r=this.localTransform;this._localID!==this._currentLocalID&&(r.a=this._cx*this.scale.x,r.b=this._sx*this.scale.x,r.c=this._cy*this.scale.y,r.d=this._sy*this.scale.y,r.tx=this.position.x-(this.pivot.x*r.a+this.pivot.y*r.c),r.ty=this.position.y-(this.pivot.x*r.b+this.pivot.y*r.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(r){let e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==r._worldID){let t=r.worldTransform,n=this.worldTransform;n.a=e.a*t.a+e.b*t.c,n.b=e.a*t.b+e.b*t.d,n.c=e.c*t.a+e.d*t.c,n.d=e.c*t.b+e.d*t.d,n.tx=e.tx*t.a+e.ty*t.c+t.tx,n.ty=e.tx*t.b+e.ty*t.d+t.ty,this._parentID=r._worldID,this._worldID++}}setFromMatrix(r){r.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(r){this._rotation!==r&&(this._rotation=r,this.updateSkew())}};ry.IDENTITY=new ry;var Wi=ry;Wi.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var kC=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`;var BC=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function kh(r,e,t){let n=r.createShader(e);return r.shaderSource(n,t),r.compileShader(n),n}function ny(r){let e=new Array(r);for(let t=0;t<e.length;t++)e[t]=!1;return e}function Tl(r,e){switch(r){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return ny(2*e);case"bvec3":return ny(3*e);case"bvec4":return ny(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var Jr=[{test:r=>r.type==="float"&&r.size===1&&!r.isArray,code:r=>`
            if(uv["${r}"] !== ud["${r}"].value)
            {
                ud["${r}"].value = uv["${r}"]
                gl.uniform1f(ud["${r}"].location, uv["${r}"])
            }
            `},{test:(r,e)=>(r.type==="sampler2D"||r.type==="samplerCube"||r.type==="sampler2DArray")&&r.size===1&&!r.isArray&&(e==null||e.castToBaseTexture!==void 0),code:r=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${r}"], t);

            if(ud["${r}"].value !== t)
            {
                ud["${r}"].value = t;
                gl.uniform1i(ud["${r}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(r,e)=>r.type==="mat3"&&r.size===1&&!r.isArray&&e.a!==void 0,code:r=>`
            gl.uniformMatrix3fv(ud["${r}"].location, false, uv["${r}"].toArray(true));
            `,codeUbo:r=>`
                var ${r}_matrix = uv.${r}.toArray(true);

                data[offset] = ${r}_matrix[0];
                data[offset+1] = ${r}_matrix[1];
                data[offset+2] = ${r}_matrix[2];
        
                data[offset + 4] = ${r}_matrix[3];
                data[offset + 5] = ${r}_matrix[4];
                data[offset + 6] = ${r}_matrix[5];
        
                data[offset + 8] = ${r}_matrix[6];
                data[offset + 9] = ${r}_matrix[7];
                data[offset + 10] = ${r}_matrix[8];
            `},{test:(r,e)=>r.type==="vec2"&&r.size===1&&!r.isArray&&e.x!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${r}"].location, v.x, v.y);
                }`,codeUbo:r=>`
                v = uv.${r};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:r=>r.type==="vec2"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${r}"].location, v[0], v[1]);
                }
            `},{test:(r,e)=>r.type==="vec4"&&r.size===1&&!r.isArray&&e.width!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${r}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(r,e)=>r.type==="vec4"&&r.size===1&&!r.isArray&&e.red!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${r}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(r,e)=>r.type==="vec3"&&r.size===1&&!r.isArray&&e.red!==void 0,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${r}"].location, v.red, v.green, v.blue)
                }`,codeUbo:r=>`
                    v = uv.${r};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:r=>r.type==="vec4"&&r.size===1&&!r.isArray,code:r=>`
                cv = ud["${r}"].value;
                v = uv["${r}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${r}"].location, v[0], v[1], v[2], v[3])
                }`}];var Xk={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},Yk={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function iy(r,e){let t=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(let n in r.uniforms){let i=e[n];if(!i){r.uniforms[n]?.group===!0&&(r.uniforms[n].ubo?t.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${n}, '${n}');
                    `):t.push(`
                        renderer.shader.syncUniformGroup(uv.${n}, syncData);
                    `));continue}let o=r.uniforms[n],s=!1;for(let a=0;a<Jr.length;a++)if(Jr[a].test(i,o)){t.push(Jr[a].code(n,o)),s=!0;break}if(!s){let a=(i.size===1&&!i.isArray?Xk:Yk)[i.type].replace("location",`ud["${n}"].location`);t.push(`
            cu = ud["${n}"];
            cv = cu.value;
            v = uv["${n}"];
            ${a};`)}}return new Function("ud","uv","renderer","syncData",t.join(`
`))}var UC={},Bh=UC;function Uh(){if(Bh===UC||Bh?.isContextLost()){let r=b.ADAPTER.createCanvas(),e;b.PREFER_ENV>=Yt.WEBGL2&&(e=r.getContext("webgl2",{})),e||(e=r.getContext("webgl",{})||r.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),Bh=e}return Bh}var jh;function oy(){if(!jh){jh=St.MEDIUM;let r=Uh();if(r&&r.getShaderPrecisionFormat){let e=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);e&&(jh=e.precision?St.HIGH:St.MEDIUM)}}return jh}function jC(r,e){let t=r.getShaderSource(e).split(`
`).map((u,c)=>`${c}: ${u}`),n=r.getShaderInfoLog(e),i=n.split(`
`),o={},s=i.map(u=>parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(u=>u&&!o[u]?(o[u]=!0,!0):!1),a=[""];s.forEach(u=>{t[u-1]=`%c${t[u-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});let l=t.join(`
`);a[0]=l,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function sy(r,e,t,n){r.getProgramParameter(e,r.LINK_STATUS)||(r.getShaderParameter(t,r.COMPILE_STATUS)||jC(r,t),r.getShaderParameter(n,r.COMPILE_STATUS)||jC(r,n),console.error("PixiJS Error: Could not initialize shader."),r.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(e)))}var Zk={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Cl(r){return Zk[r]}var Hh=null,HC={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Dl(r,e){if(!Hh){let t=Object.keys(HC);Hh={};for(let n=0;n<t.length;++n){let i=t[n];Hh[r[i]]=HC[i]}}return Hh[e]}function Vh(r,e,t){if(r.substring(0,9)!=="precision"){let n=e;return e===St.HIGH&&t!==St.HIGH&&(n=St.MEDIUM),`precision ${n} float;
${r}`}else if(t!==St.HIGH&&r.substring(0,15)==="precision highp")return r.replace("precision highp","precision mediump");return r}var Sl;function $h(){if(typeof Sl=="boolean")return Sl;try{Sl=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Sl=!1}return Sl}var Kk=0,Gh={},ay=class ys{constructor(e,t,n="pixi-shader",i={}){this.extra={},this.id=Kk++,this.vertexSrc=e||ys.defaultVertexSrc,this.fragmentSrc=t||ys.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=i,this.vertexSrc.substring(0,8)!=="#version"&&(n=n.replace(/\s+/g,"-"),Gh[n]?(Gh[n]++,n+=`-${Gh[n]}`):Gh[n]=1,this.vertexSrc=`#define SHADER_NAME ${n}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${n}
${this.fragmentSrc}`,this.vertexSrc=Vh(this.vertexSrc,ys.defaultVertexPrecision,St.HIGH),this.fragmentSrc=Vh(this.fragmentSrc,ys.defaultFragmentPrecision,oy())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return BC}static get defaultFragmentSrc(){return kC}static from(e,t,n){let i=e+t,o=El[i];return o||(El[i]=o=new ys(e,t,n)),o}};ay.defaultVertexPrecision=St.HIGH,ay.defaultFragmentPrecision=cr.apple.device?St.HIGH:St.MEDIUM;var xt=ay;var Qk=0,Mt=class r{constructor(e,t,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Qk++,this.static=!!t,this.ubo=!!n,e instanceof Ce?(this.buffer=e,this.buffer.type=Bt.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new Ce(new Float32Array(1)),this.buffer.type=Bt.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,t,n){if(!this.ubo)this.uniforms[e]=new r(t,n);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(e,t,n){return new r(e,t,n)}static uboFrom(e,t){return new r(e,t??!0,!0)}};var pt=class r{constructor(e,t){this.uniformBindCount=0,this.program=e,t?t instanceof Mt?this.uniformGroup=t:this.uniformGroup=new Mt(t):this.uniformGroup=new Mt({}),this.disposeRunner=new He("disposeShader")}checkUniformExists(e,t){if(t.uniforms[e])return!0;for(let n in t.uniforms){let i=t.uniforms[n];if(i.group===!0&&this.checkUniformExists(e,i))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,t,n){let i=xt.from(e,t);return new r(i,n)}};var Il=class{constructor(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},!t.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!t.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){let n=new Int32Array(e);for(let o=0;o<e;o++)n[o]=o;this.defaultGroupCache[e]=Mt.from({uSamplers:n},!0);let i=this.fragTemplate;i=i.replace(/%count%/gi,`${e}`),i=i.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new xt(this.vertexSrc,i)}let t={tint:new Float32Array([1,1,1,1]),translationMatrix:new le,default:this.defaultGroupCache[e]};return new pt(this.programCache[e],t)}generateSampleSrc(e){let t="";t+=`
`,t+=`
`;for(let n=0;n<e;n++)n>0&&(t+=`
else `),n<e-1&&(t+=`if(vTextureId < ${n}.5)`),t+=`
{`,t+=`
	color = texture2D(uSamplers[${n}], vTextureCoord);`,t+=`
}`;return t+=`
`,t+=`
`,t}};var ei=class{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}};function VC(){return!cr.apple.device}function $C(r){let e=!0,t=b.ADAPTER.getNavigator();if(cr.tablet||cr.phone){if(cr.apple.device){let n=t.userAgent.match(/OS (\d+)_(\d+)?/);n&&parseInt(n[1],10)<11&&(e=!1)}if(cr.android.device){let n=t.userAgent.match(/Android\s([0-9.]*)/);n&&parseInt(n[1],10)<7&&(e=!1)}}return e?r:4}var Rr=class{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}};var GC=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`;var zC=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;var Al=class Pr extends Rr{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=Hi,this.vertexSize=6,this.state=st.for2d(),this.size=Pr.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??$C(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??VC(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return J("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return zC}static get defaultFragmentTemplate(){return GC}setShaderGenerator({vertex:e=Pr.defaultVertexSrc,fragment:t=Pr.defaultFragmentTemplate}={}){this.shaderGenerator=new Il(e,t)}contextChange(){let e=this.renderer.gl;b.PREFER_ENV===Yt.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),Pr.defaultMaxTextures),this.maxTextures=Oh(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){let{_drawCallPool:e,_textureArrayPool:t}=Pr,n=this.size/4,i=Math.floor(n/this.maxTextures)+1;for(;e.length<n;)e.push(new Qn);for(;t.length<i;)t.push(new ei);for(let o=0;o<this.maxTextures;o++)this._tempBoundTextures[o]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){let{_bufferedTextures:e,maxTextures:t}=this,n=Pr._textureArrayPool,i=this.renderer.batch,o=this._tempBoundTextures,s=this.renderer.textureGC.count,a=++G._globalBatch,l=0,u=n[0],c=0;i.copyBoundTextures(o,t);for(let h=0;h<this._bufferSize;++h){let d=e[h];e[h]=null,d._batchEnabled!==a&&(u.count>=t&&(i.boundArray(u,o,a,t),this.buildDrawCalls(u,c,h),c=h,u=n[++l],++a),d._batchEnabled=a,d.touched=s,u.elements[u.count++]=d)}u.count>0&&(i.boundArray(u,o,a,t),this.buildDrawCalls(u,c,this._bufferSize),++l,++a);for(let h=0;h<o.length;h++)o[h]=null;G._globalBatch=a}buildDrawCalls(e,t,n){let{_bufferedElements:i,_attributeBuffer:o,_indexBuffer:s,vertexSize:a}=this,l=Pr._drawCallPool,u=this._dcIndex,c=this._aIndex,h=this._iIndex,d=l[u];d.start=this._iIndex,d.texArray=e;for(let f=t;f<n;++f){let p=i[f],m=p._texture.baseTexture,y=yl[m.alphaMode?1:0][p.blendMode];i[f]=null,t<f&&d.blend!==y&&(d.size=h-d.start,t=f,d=l[++u],d.texArray=e,d.start=h),this.packInterleavedGeometry(p,o,s,c,h),c+=p.vertexData.length/2*a,h+=p.indices.length,d.blend=y}t<n&&(d.size=h-d.start,++u),this._dcIndex=u,this._aIndex=c,this._iIndex=h}bindAndClearTexArray(e){let t=this.renderer.texture;for(let n=0;n<e.count;n++)t.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0}updateGeometry(){let{_packedGeometries:e,_attributeBuffer:t,_indexBuffer:n}=this;Pr.canUploadSameBuffer?(e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){let e=this._dcIndex,{gl:t,state:n}=this.renderer,i=Pr._drawCallPool,o=null;for(let s=0;s<e;s++){let{texArray:a,type:l,size:u,start:c,blend:h}=i[s];o!==a&&(o=a,this.bindAndClearTexArray(a)),this.state.blendMode=h,n.set(this.state),t.drawElements(l,u,t.UNSIGNED_SHORT,c*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Pr.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){let t=Yn(Math.ceil(e/8)),n=_l(t),i=t*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);let o=this._aBuffers[i];return o||(this._aBuffers[i]=o=new Kn(i*this.vertexSize*4)),o}getIndexBuffer(e){let t=Yn(Math.ceil(e/12)),n=_l(t),i=t*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);let o=this._iBuffers[n];return o||(this._iBuffers[n]=o=new Uint16Array(i)),o}packInterleavedGeometry(e,t,n,i,o){let{uint32View:s,float32View:a}=t,l=i/this.vertexSize,u=e.uvs,c=e.indices,h=e.vertexData,d=e._texture.baseTexture._batchLocation,f=Math.min(e.worldAlpha,1),p=te.shared.setValue(e._tintRGB).toPremultiplied(f,e._texture.baseTexture.alphaMode>0);for(let m=0;m<h.length;m+=2)a[i++]=h[m],a[i++]=h[m+1],a[i++]=u[m],a[i++]=u[m+1],s[i++]=p,a[i++]=d;for(let m=0;m<c.length;m++)n[o++]=l+c[m]}};Al.defaultBatchSize=4096,Al.extension={name:"batch",type:E.RendererPlugin},Al._drawCallPool=[],Al._textureArrayPool=[];var wn=Al;w.add(wn);var WC=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`;var qC=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;var ly=class Ml extends pt{constructor(e,t,n){let i=xt.from(e||Ml.defaultVertexSrc,t||Ml.defaultFragmentSrc);super(i,n),this.padding=0,this.resolution=Ml.defaultResolution,this.multisample=Ml.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new st}apply(e,t,n,i,o){e.applyFilter(this,t,n,i)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return qC}static get defaultFragmentSrc(){return WC}};ly.defaultResolution=1,ly.defaultMultisample=we.NONE;var Ie=ly;var Tn=class{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new te(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;let{backgroundColor:t,background:n,backgroundAlpha:i}=e,o=n??t;o!==void 0&&(this.color=o),this.alpha=i}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}};Tn.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},Tn.extension={type:[E.RendererSystem,E.CanvasRendererSystem],name:"background"};w.add(Tn);var vs=class{constructor(e){this.renderer=e,this.emptyRenderer=new Rr(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,t){let{boundTextures:n}=this.renderer.texture;for(let i=t-1;i>=0;--i)e[i]=n[i]||null,e[i]&&(e[i]._batchLocation=i)}boundArray(e,t,n,i){let{elements:o,ids:s,count:a}=e,l=0;for(let u=0;u<a;u++){let c=o[u],h=c._batchLocation;if(h>=0&&h<i&&t[h]===c){s[u]=h;continue}for(;l<i;){let d=t[l];if(d&&d._batchEnabled===n&&d._batchLocation===l){l++;continue}s[u]=l,c._batchLocation=l,t[l]=c;break}}}destroy(){this.renderer=null}};vs.extension={type:E.RendererSystem,name:"batch"};w.add(vs);var XC=0,Cn=class{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=XC++}init(e){if(e.context)this.initFromContext(e.context);else{let t=this.renderer.background.alpha<1,n=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:t,premultipliedAlpha:n,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=XC++,this.renderer.runners.contextChange.emit(e);let t=this.renderer.view;t.addEventListener!==void 0&&(t.addEventListener("webglcontextlost",this.handleContextLost,!1),t.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){let t=this.createContext(this.renderer.view,e);this.initFromContext(t)}createContext(e,t){let n;if(b.PREFER_ENV>=Yt.WEBGL2&&(n=e.getContext("webgl2",t)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl}getExtensions(){let{gl:e}=this,t={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){let e=this.renderer.view;this.renderer=null,e.removeEventListener!==void 0&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){let t=e.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),t&&!t.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");let i=n||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}};Cn.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},Cn.extension={type:E.RendererSystem,name:"context"};w.add(Cn);var ti=class{constructor(e,t){if(this.width=Math.round(e),this.height=Math.round(t),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new He("disposeFramebuffer"),this.multisample=we.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,t){return this.colorTextures[e]=t||new G(null,{scaleMode:ur.NEAREST,resolution:1,mipmap:ft.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new G(null,{scaleMode:ur.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:ft.OFF,format:M.DEPTH_COMPONENT,type:H.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,t){if(e=Math.round(e),t=Math.round(t),!e||!t)throw new Error("Framebuffer width and height must not be zero");if(!(e===this.width&&t===this.height)){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(let n=0;n<this.colorTextures.length;n++){let i=this.colorTextures[n],o=i.resolution;i.setSize(e/o,t/o)}if(this.depthTexture){let n=this.depthTexture.resolution;this.depthTexture.setSize(e/n,t/n)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}};var qi=class extends G{constructor(e={}){if(typeof e=="number"){let t=arguments[0],n=arguments[1],i=arguments[2],o=arguments[3];e={width:t,height:n,scaleMode:i,resolution:o}}e.width=e.width??100,e.height=e.height??100,e.multisample??(e.multisample=we.NONE),super(null,e),this.mipmap=ft.OFF,this.valid=!0,this._clear=new te([0,0,0,0]),this.framebuffer=new ti(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t){this.framebuffer.resize(e*this.resolution,t*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}};var Je=class extends Qt{constructor(e){let t=e,n=t.naturalWidth||t.videoWidth||t.displayWidth||t.width,i=t.naturalHeight||t.videoHeight||t.displayHeight||t.height;super(n,i),this.source=e,this.noSubImage=!1}static crossOrigin(e,t,n){n===void 0&&!t.startsWith("data:")?e.crossOrigin=Nh(t):n!==!1&&(e.crossOrigin=typeof n=="string"?n:"anonymous")}upload(e,t,n,i){let o=e.gl,s=t.realWidth,a=t.realHeight;if(i=i||this.source,typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement){if(!i.complete||i.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement&&i.readyState<=1)return!1;return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===Oe.UNPACK),!this.noSubImage&&t.target===o.TEXTURE_2D&&n.width===s&&n.height===a?o.texSubImage2D(o.TEXTURE_2D,0,0,0,t.format,n.type,i):(n.width=s,n.height=a,o.texImage2D(t.target,0,n.internalFormat,t.format,n.type,i)),!0}update(){if(this.destroyed)return;let e=this.source,t=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(t,n),super.update()}dispose(){this.source=null}};var Xi=class extends Je{constructor(e,t){if(t=t||{},typeof e=="string"){let n=new Image;Je.crossOrigin(n,e,t.crossorigin),n.src=e,e=n}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(t.createBitmap??b.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof t.alphaMode=="number"?t.alphaMode:null,this.bitmap=null,this._load=null,t.autoLoad!==!1&&this.load()}load(e){return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise((t,n)=>{let i=this.source;this.url=i.src;let o=()=>{this.destroyed||(i.onload=null,i.onerror=null,this.update(),this._load=null,this.createBitmap?t(this.process()):t(this))};i.complete&&i.src?o():(i.onload=o,i.onerror=s=>{n(s),this.onError.emit(s)})}),this._load)}process(){let e=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);let t=globalThis.createImageBitmap,n=!e.crossOrigin||e.crossOrigin==="anonymous";return this._process=fetch(e.src,{mode:n?"cors":"no-cors"}).then(i=>i.blob()).then(i=>t(i,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Oe.UNPACK?"premultiply":"none"})).then(i=>this.destroyed?Promise.reject():(this.bitmap=i,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,t,n){if(typeof this.alphaMode=="number"&&(t.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,t,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,t,n,this.bitmap),!this.preserveBitmap){let i=!0,o=t._glTextures;for(let s in o){let a=o[s];if(a!==n&&a.dirtyId!==t.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&(typeof e=="string"||e instanceof HTMLImageElement)}};var Yi=class{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,t,n){let i=t.width,o=t.height;if(n){let s=e.width/2/i,a=e.height/2/o,l=e.x/i+s,u=e.y/o+a;n=Ae.add(n,Ae.NW),this.x0=l+s*Ae.uX(n),this.y0=u+a*Ae.uY(n),n=Ae.add(n,2),this.x1=l+s*Ae.uX(n),this.y1=u+a*Ae.uY(n),n=Ae.add(n,2),this.x2=l+s*Ae.uX(n),this.y2=u+a*Ae.uY(n),n=Ae.add(n,2),this.x3=l+s*Ae.uX(n),this.y3=u+a*Ae.uY(n)}else this.x0=e.x/i,this.y0=e.y/o,this.x1=(e.x+e.width)/i,this.y1=e.y/o,this.x2=(e.x+e.width)/i,this.y2=(e.y+e.height)/o,this.x3=e.x/i,this.y3=(e.y+e.height)/o;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}};Yi.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};var YC=new Yi;function zh(r){r.destroy=function(){},r.on=function(){},r.once=function(){},r.emit=function(){}}var q=class r extends Zn.default{constructor(e,t,n,i,o,s,a){if(super(),this.noFrame=!1,t||(this.noFrame=!0,t=new W(0,0,1,1)),e instanceof r&&(e=e.baseTexture),this.baseTexture=e,this._frame=t,this.trim=i,this.valid=!1,this.destroyed=!1,this._uvs=YC,this.uvMatrix=null,this.orig=n||t,this._rotate=Number(o||0),o===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=s?new Z(s.x,s.y):new Z(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=t:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){let{resource:t}=this.baseTexture;t?.url&&ot[t.url]&&r.removeFromCache(t.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,r.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){let e=this._frame.clone(),t=this._frame===this.orig?e:this.orig.clone(),n=new r(this.baseTexture,!this.noFrame&&e,t,this.trim?.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(n._frame=e),n}updateUvs(){this._uvs===YC&&(this._uvs=new Yi),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,t={},n=b.STRICT_TEXTURE_CACHE){let i=typeof e=="string",o=null;if(i)o=e;else if(e instanceof G){if(!e.cacheId){let a=t?.pixiIdPrefix||"pixiid";e.cacheId=`${a}-${Kr()}`,G.addToCache(e,e.cacheId)}o=e.cacheId}else{if(!e._pixiId){let a=t?.pixiIdPrefix||"pixiid";e._pixiId=`${a}_${Kr()}`}o=e._pixiId}let s=ot[o];if(i&&n&&!s)throw new Error(`The cacheId "${o}" does not exist in TextureCache.`);return!s&&!(e instanceof G)?(t.resolution||(t.resolution=bl(e)),s=new r(new G(e,t)),s.baseTexture.cacheId=o,G.addToCache(s.baseTexture,o),r.addToCache(s,o)):!s&&e instanceof G&&(s=new r(e),r.addToCache(s,o)),s}static fromURL(e,t){let n=Object.assign({autoLoad:!1},t?.resourceOptions),i=r.from(e,Object.assign({resourceOptions:n},t),!1),o=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):o.load().then(()=>Promise.resolve(i))}static fromBuffer(e,t,n,i){return new r(G.fromBuffer(e,t,n,i))}static fromLoader(e,t,n,i){let o=new G(e,Object.assign({scaleMode:G.defaultOptions.scaleMode,resolution:bl(t)},i)),{resource:s}=o;s instanceof Xi&&(s.url=t);let a=new r(o);return n||(n=t),G.addToCache(a.baseTexture,n),r.addToCache(a,n),n!==t&&(G.addToCache(a.baseTexture,t),r.addToCache(a,t)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),ot[t]&&ot[t]!==e&&console.warn(`Texture added to the cache with an id [${t}] that already had an entry`),ot[t]=e)}static removeFromCache(e){if(typeof e=="string"){let t=ot[e];if(t){let n=t.textureCacheIds.indexOf(e);return n>-1&&t.textureCacheIds.splice(n,1),delete ot[e],t}}else if(e?.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)ot[e.textureCacheIds[t]]===e&&delete ot[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;let{x:t,y:n,width:i,height:o}=e,s=t+i>this.baseTexture.width,a=n+o>this.baseTexture.height;if(s||a){let l=s&&a?"and":"or",u=`X: ${t} + ${i} = ${t+i} > ${this.baseTexture.width}`,c=`Y: ${n} + ${o} = ${n+o} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${u} ${l} ${c}`)}this.valid=i&&o&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return r._EMPTY||(r._EMPTY=new r(new G),zh(r._EMPTY),zh(r._EMPTY.baseTexture)),r._EMPTY}static get WHITE(){if(!r._WHITE){let e=b.ADAPTER.createCanvas(16,16),t=e.getContext("2d");e.width=16,e.height=16,t.fillStyle="white",t.fillRect(0,0,16,16),r._WHITE=new r(G.from(e)),zh(r._WHITE),zh(r._WHITE.baseTexture)}return r._WHITE}};var fr=class r extends q{constructor(e,t){super(e,t),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t,n=!0){let i=this.baseTexture.resolution,o=Math.round(e*i)/i,s=Math.round(t*i)/i;this.valid=o>0&&s>0,this._frame.width=this.orig.width=o,this._frame.height=this.orig.height=s,n&&this.baseTexture.resize(o,s),this.updateUvs()}setResolution(e){let{baseTexture:t}=this;t.resolution!==e&&(t.setResolution(e),this.resize(t.width,t.height,!1))}static create(e){return new r(new qi(e))}};var uy=(()=>{class r{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,n,i=we.NONE){let o=new qi(Object.assign({width:t,height:n,resolution:1,multisample:i},this.textureOptions));return new fr(o)}getOptimalTexture(t,n,i=1,o=we.NONE){let s;t=Math.max(Math.ceil(t*i-1e-6),1),n=Math.max(Math.ceil(n*i-1e-6),1),!this.enableFullScreen||t!==this._pixelsWidth||n!==this._pixelsHeight?(t=Yn(t),n=Yn(n),s=((t&65535)<<16|n&65535)>>>0,o>1&&(s+=o*4294967296)):s=o>1?-o:-1,this.texturePool[s]||(this.texturePool[s]=[]);let a=this.texturePool[s].pop();return a||(a=this.createTexture(t,n,o)),a.filterPoolKey=s,a.setResolution(i),a}getFilterTexture(t,n,i){let o=this.getOptimalTexture(t.width,t.height,n||t.resolution,i||we.NONE);return o.filterFrame=t.filterFrame,o}returnTexture(t){let n=t.filterPoolKey;t.filterFrame=null,this.texturePool[n].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=t!==!1,t)for(let n in this.texturePool){let i=this.texturePool[n];if(i)for(let o=0;o<i.length;o++)i[o].destroy(!0)}this.texturePool={}}setScreenSize(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(let n in this.texturePool){if(!(Number(n)<0))continue;let i=this.texturePool[n];if(i)for(let o=0;o<i.length;o++)i[o].destroy(!0);this.texturePool[n]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}}return r.SCREEN_KEY=-1,r})();var Rl=class extends Jt{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}};var Zi=class extends Jt{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Ce(this.vertices),this.uvBuffer=new Ce(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,t){let n=0,i=0;return this.uvs[0]=n,this.uvs[1]=i,this.uvs[2]=n+t.width/e.width,this.uvs[3]=i,this.uvs[4]=n+t.width/e.width,this.uvs[5]=i+t.height/e.height,this.uvs[6]=n,this.uvs[7]=i+t.height/e.height,n=t.x,i=t.y,this.vertices[0]=n,this.vertices[1]=i,this.vertices[2]=n+t.width,this.vertices[3]=i,this.vertices[4]=n+t.width,this.vertices[5]=i+t.height,this.vertices[6]=n,this.vertices[7]=i+t.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}};var Pl=class{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=we.NONE,this.sourceFrame=new W,this.destinationFrame=new W,this.bindingSourceFrame=new W,this.bindingDestinationFrame=new W,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}};var Wh=[new Z,new Z,new Z,new Z],cy=new le,_s=class{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new uy,this.statePool=[],this.quad=new Rl,this.quadUv=new Zi,this.tempRect=new W,this.activeState={},this.globalUniforms=new Mt({outputFrame:new W,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,t){let n=this.renderer,i=this.defaultFilterStack,o=this.statePool.pop()||new Pl,s=n.renderTexture,a,l;if(s.current){let y=s.current;a=y.resolution,l=y.multisample}else a=n.resolution,l=n.multisample;let u=t[0].resolution||a,c=t[0].multisample??l,h=t[0].padding,d=t[0].autoFit,f=t[0].legacy??!0;for(let y=1;y<t.length;y++){let v=t[y];u=Math.min(u,v.resolution||a),c=Math.min(c,v.multisample??l),h=this.useMaxPadding?Math.max(h,v.padding):h+v.padding,d=d&&v.autoFit,f=f||(v.legacy??!0)}i.length===1&&(this.defaultFilterStack[0].renderTexture=s.current),i.push(o),o.resolution=u,o.multisample=c,o.legacy=f,o.target=e,o.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),o.sourceFrame.pad(h);let p=this.tempRect.copyFrom(s.sourceFrame);n.projection.transform&&this.transformAABB(cy.copyFrom(n.projection.transform).invert(),p),d?(o.sourceFrame.fit(p),(o.sourceFrame.width<=0||o.sourceFrame.height<=0)&&(o.sourceFrame.width=0,o.sourceFrame.height=0)):o.sourceFrame.intersects(p)||(o.sourceFrame.width=0,o.sourceFrame.height=0),this.roundFrame(o.sourceFrame,s.current?s.current.resolution:n.resolution,s.sourceFrame,s.destinationFrame,n.projection.transform),o.renderTexture=this.getOptimalFilterTexture(o.sourceFrame.width,o.sourceFrame.height,u,c),o.filters=t,o.destinationFrame.width=o.renderTexture.width,o.destinationFrame.height=o.renderTexture.height;let m=this.tempRect;m.x=0,m.y=0,m.width=o.sourceFrame.width,m.height=o.sourceFrame.height,o.renderTexture.filterFrame=o.sourceFrame,o.bindingSourceFrame.copyFrom(s.sourceFrame),o.bindingDestinationFrame.copyFrom(s.destinationFrame),o.transform=n.projection.transform,n.projection.transform=null,s.bind(o.renderTexture,o.sourceFrame,m),n.framebuffer.clear(0,0,0,0)}pop(){let e=this.defaultFilterStack,t=e.pop(),n=t.filters;this.activeState=t;let i=this.globalUniforms.uniforms;i.outputFrame=t.sourceFrame,i.resolution=t.resolution;let o=i.inputSize,s=i.inputPixel,a=i.inputClamp;if(o[0]=t.destinationFrame.width,o[1]=t.destinationFrame.height,o[2]=1/o[0],o[3]=1/o[1],s[0]=Math.round(o[0]*t.resolution),s[1]=Math.round(o[1]*t.resolution),s[2]=1/s[0],s[3]=1/s[1],a[0]=.5*s[2],a[1]=.5*s[3],a[2]=t.sourceFrame.width*o[2]-.5*s[2],a[3]=t.sourceFrame.height*o[3]-.5*s[3],t.legacy){let u=i.filterArea;u[0]=t.destinationFrame.width,u[1]=t.destinationFrame.height,u[2]=t.sourceFrame.x,u[3]=t.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();let l=e[e.length-1];if(this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,t.renderTexture,l.renderTexture,Kt.BLEND,t),this.returnFilterTexture(t.renderTexture);else{let u=t.renderTexture,c=this.getOptimalFilterTexture(u.width,u.height,t.resolution);c.filterFrame=u.filterFrame;let h=0;for(h=0;h<n.length-1;++h){h===1&&t.multisample>1&&(c=this.getOptimalFilterTexture(u.width,u.height,t.resolution),c.filterFrame=u.filterFrame),n[h].apply(this,u,c,Kt.CLEAR,t);let d=u;u=c,c=d}n[h].apply(this,u,l.renderTexture,Kt.BLEND,t),h>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(u),this.returnFilterTexture(c)}t.clear(),this.statePool.push(t)}bindAndClear(e,t=Kt.CLEAR){let{renderTexture:n,state:i}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e?.filterFrame){let s=this.tempRect;s.x=0,s.y=0,s.width=e.filterFrame.width,s.height=e.filterFrame.height,n.bind(e,e.filterFrame,s)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);let o=i.stateId&1||this.forceClear;(t===Kt.CLEAR||t===Kt.BLIT&&o)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,t,n,i){let o=this.renderer;o.state.set(e.state),this.bindAndClear(n,i),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,o.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),o.geometry.bind(this.quadUv),o.geometry.draw(kt.TRIANGLES)):(o.geometry.bind(this.quad),o.geometry.draw(kt.TRIANGLE_STRIP))}calculateSpriteMatrix(e,t){let{sourceFrame:n,destinationFrame:i}=this.activeState,{orig:o}=t._texture,s=e.set(i.width,0,0,i.height,n.x,n.y),a=t.worldTransform.copyTo(le.TEMP_MATRIX);return a.invert(),s.prepend(a),s.scale(1/o.width,1/o.height),s.translate(t.anchor.x,t.anchor.y),s}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,t,n=1,i=we.NONE){return this.texturePool.getOptimalTexture(e,t,n,i)}getFilterTexture(e,t,n){if(typeof e=="number"){let o=e;e=t,t=o}e=e||this.activeState.renderTexture;let i=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution,n||we.NONE);return i.filterFrame=e.filterFrame,i}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,t){let n=Wh[0],i=Wh[1],o=Wh[2],s=Wh[3];n.set(t.left,t.top),i.set(t.left,t.bottom),o.set(t.right,t.top),s.set(t.right,t.bottom),e.apply(n,n),e.apply(i,i),e.apply(o,o),e.apply(s,s);let a=Math.min(n.x,i.x,o.x,s.x),l=Math.min(n.y,i.y,o.y,s.y),u=Math.max(n.x,i.x,o.x,s.x),c=Math.max(n.y,i.y,o.y,s.y);t.x=a,t.y=l,t.width=u-a,t.height=c-l}roundFrame(e,t,n,i,o){if(!(e.width<=0||e.height<=0||n.width<=0||n.height<=0)){if(o){let{a:s,b:a,c:l,d:u}=o;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(s)>1e-4||Math.abs(u)>1e-4))return}o=o?cy.copyFrom(o):cy.identity(),o.translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.transformAABB(o,e),e.ceil(t),this.transformAABB(o.invert(),e)}}};_s.extension={type:E.RendererSystem,name:"filter"};w.add(_s);var Nl=class{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=we.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}};var Jk=new W,xs=class{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new ti(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);let e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new W,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let t=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;b.PREFER_ENV===Yt.WEBGL_LEGACY&&(t=null,n=null),t?e.drawBuffers=i=>t.drawBuffersWEBGL(i):(this.hasMRT=!1,e.drawBuffers=()=>{}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,t,n=0){let{gl:i}=this;if(e){let o=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,i.bindFramebuffer(i.FRAMEBUFFER,o.framebuffer)),o.mipLevel!==n&&(e.dirtyId++,e.dirtyFormat++,o.mipLevel=n),o.dirtyId!==e.dirtyId&&(o.dirtyId=e.dirtyId,o.dirtyFormat!==e.dirtyFormat?(o.dirtyFormat=e.dirtyFormat,o.dirtySize=e.dirtySize,this.updateFramebuffer(e,n)):o.dirtySize!==e.dirtySize&&(o.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let s=0;s<e.colorTextures.length;s++){let a=e.colorTextures[s];this.renderer.texture.unbind(a.parentTextureArray||a)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){let s=t.width>>n,a=t.height>>n,l=s/t.width;this.setViewport(t.x*l,t.y*l,s,a)}else{let s=e.width>>n,a=e.height>>n;this.setViewport(0,0,s,a)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,t,n,i){let o=this.viewport;e=Math.round(e),t=Math.round(t),n=Math.round(n),i=Math.round(i),(o.width!==n||o.height!==i||o.x!==e||o.y!==t)&&(o.x=e,o.y=t,o.width=n,o.height=i,this.gl.viewport(e,t,n,i))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,t,n,i,o=ih.COLOR|ih.DEPTH){let{gl:s}=this;s.clearColor(e,t,n,i),s.clear(o)}initFramebuffer(e){let{gl:t}=this,n=new Nl(t.createFramebuffer());return n.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(e),e.disposeRunner.add(this),n}resizeFramebuffer(e){let{gl:t}=this,n=e.glFramebuffers[this.CONTEXT_UID];if(n.stencil){t.bindRenderbuffer(t.RENDERBUFFER,n.stencil);let s;this.renderer.context.webGLVersion===1?s=t.DEPTH_STENCIL:e.depth&&e.stencil?s=t.DEPTH24_STENCIL8:e.depth?s=t.DEPTH_COMPONENT24:s=t.STENCIL_INDEX8,n.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,n.multisample,s,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,s,e.width,e.height)}let i=e.colorTextures,o=i.length;t.drawBuffers||(o=Math.min(o,1));for(let s=0;s<o;s++){let a=i[s],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),s===0&&n.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,n.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,n.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,t){let{gl:n}=this,i=e.glFramebuffers[this.CONTEXT_UID],o=e.colorTextures,s=o.length;n.drawBuffers||(s=Math.min(s,1)),i.multisample>1&&this.canMultisampleFramebuffer(e)?i.msaaBuffer=i.msaaBuffer||n.createRenderbuffer():i.msaaBuffer&&(n.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));let a=[];for(let l=0;l<s;l++){let u=o[l],c=u.parentTextureArray||u;this.renderer.texture.bind(c,0),l===0&&i.msaaBuffer?(n.bindRenderbuffer(n.RENDERBUFFER,i.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,c._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,i.msaaBuffer)):(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+l,u.target,c._glTextures[this.CONTEXT_UID].texture,t),a.push(n.COLOR_ATTACHMENT0+l))}if(a.length>1&&n.drawBuffers(a),e.depthTexture&&this.writeDepthTexture){let l=e.depthTexture;this.renderer.texture.bind(l,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,t)}if((e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)){i.stencil=i.stencil||n.createRenderbuffer();let l,u;this.renderer.context.webGLVersion===1?(l=n.DEPTH_STENCIL_ATTACHMENT,u=n.DEPTH_STENCIL):e.depth&&e.stencil?(l=n.DEPTH_STENCIL_ATTACHMENT,u=n.DEPTH24_STENCIL8):e.depth?(l=n.DEPTH_ATTACHMENT,u=n.DEPTH_COMPONENT24):(l=n.STENCIL_ATTACHMENT,u=n.STENCIL_INDEX8),n.bindRenderbuffer(n.RENDERBUFFER,i.stencil),i.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,u,e.width,e.height):n.renderbufferStorage(n.RENDERBUFFER,u,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,l,n.RENDERBUFFER,i.stencil)}else i.stencil&&(n.deleteRenderbuffer(i.stencil),i.stencil=null)}canMultisampleFramebuffer(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){let{msaaSamples:t}=this,n=we.NONE;if(e<=1||t===null)return n;for(let i=0;i<t.length;i++)if(t[i]<=e){n=t[i];break}return n===1&&(n=we.NONE),n}blit(e,t,n){let{current:i,renderer:o,gl:s,CONTEXT_UID:a}=this;if(o.context.webGLVersion!==2||!i)return;let l=i.glFramebuffers[a];if(!l)return;if(!e){if(!l.msaaBuffer)return;let c=i.colorTextures[0];if(!c)return;l.blitFramebuffer||(l.blitFramebuffer=new ti(i.width,i.height),l.blitFramebuffer.addColorTexture(0,c)),e=l.blitFramebuffer,e.colorTextures[0]!==c&&(e.colorTextures[0]=c,e.dirtyId++,e.dirtyFormat++),(e.width!==i.width||e.height!==i.height)&&(e.width=i.width,e.height=i.height,e.dirtyId++,e.dirtySize++)}t||(t=Jk,t.width=i.width,t.height=i.height),n||(n=t);let u=t.width===n.width&&t.height===n.height;this.bind(e),s.bindFramebuffer(s.READ_FRAMEBUFFER,l.framebuffer),s.blitFramebuffer(t.left,t.top,t.right,t.bottom,n.left,n.top,n.right,n.bottom,s.COLOR_BUFFER_BIT,u?s.NEAREST:s.LINEAR),s.bindFramebuffer(s.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,t){let n=e.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(!n)return;delete e.glFramebuffers[this.CONTEXT_UID];let o=this.managedFramebuffers.indexOf(e);o>=0&&this.managedFramebuffers.splice(o,1),e.disposeRunner.remove(this),t||(i.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&i.deleteRenderbuffer(n.msaaBuffer),n.stencil&&i.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&this.disposeFramebuffer(n.blitFramebuffer,t)}disposeAll(e){let t=this.managedFramebuffers;this.managedFramebuffers=[];for(let n=0;n<t.length;n++)this.disposeFramebuffer(t[n],e)}forceStencil(){let e=this.current;if(!e)return;let t=e.glFramebuffers[this.CONTEXT_UID];if(!t||t.stencil&&e.stencil)return;e.stencil=!0;let n=e.width,i=e.height,o=this.gl,s=t.stencil=o.createRenderbuffer();o.bindRenderbuffer(o.RENDERBUFFER,s);let a,l;this.renderer.context.webGLVersion===1?(a=o.DEPTH_STENCIL_ATTACHMENT,l=o.DEPTH_STENCIL):e.depth?(a=o.DEPTH_STENCIL_ATTACHMENT,l=o.DEPTH24_STENCIL8):(a=o.STENCIL_ATTACHMENT,l=o.STENCIL_INDEX8),t.msaaBuffer?o.renderbufferStorageMultisample(o.RENDERBUFFER,t.multisample,l,n,i):o.renderbufferStorage(o.RENDERBUFFER,l,n,i),o.framebufferRenderbuffer(o.FRAMEBUFFER,a,o.RENDERBUFFER,s)}reset(){this.current=this.unknownFramebuffer,this.viewport=new W}destroy(){this.renderer=null}};xs.extension={type:E.RendererSystem,name:"framebuffer"};w.add(xs);var hy={5126:4,5123:2,5121:1},Es=class{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);let e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,t.webGLVersion!==2){let n=this.renderer.context.extensions.vertexArrayObject;b.PREFER_ENV===Yt.WEBGL_LEGACY&&(n=null),n?(e.createVertexArray=()=>n.createVertexArrayOES(),e.bindVertexArray=i=>n.bindVertexArrayOES(i),e.deleteVertexArray=i=>n.deleteVertexArrayOES(i)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(t.webGLVersion!==2){let n=e.getExtension("ANGLE_instanced_arrays");n?(e.vertexAttribDivisor=(i,o)=>n.vertexAttribDivisorANGLE(i,o),e.drawElementsInstanced=(i,o,s,a,l)=>n.drawElementsInstancedANGLE(i,o,s,a,l),e.drawArraysInstanced=(i,o,s,a)=>n.drawArraysInstancedANGLE(i,o,s,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=t.webGLVersion===2||!!t.extensions.uint32ElementIndex}bind(e,t){t=t||this.renderer.shader.shader;let{gl:n}=this,i=e.glVertexArrayObjects[this.CONTEXT_UID],o=!1;i||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=i={},o=!0);let s=i[t.program.id]||this.initGeometryVao(e,t,o);this._activeGeometry=e,this._activeVao!==s&&(this._activeVao=s,this.hasVao?n.bindVertexArray(s):this.activateVao(e,t.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){let e=this._activeGeometry,t=this.renderer.buffer;for(let n=0;n<e.buffers.length;n++){let i=e.buffers[n];t.update(i)}}checkCompatibility(e,t){let n=e.attributes,i=t.attributeData;for(let o in i)if(!n[o])throw new Error(`shader and geometry incompatible, geometry missing the "${o}" attribute`)}getSignature(e,t){let n=e.attributes,i=t.attributeData,o=["g",e.id];for(let s in n)i[s]&&o.push(s,i[s].location);return o.join("-")}initGeometryVao(e,t,n=!0){let i=this.gl,o=this.CONTEXT_UID,s=this.renderer.buffer,a=t.program;a.glPrograms[o]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,a);let l=this.getSignature(e,a),u=e.glVertexArrayObjects[this.CONTEXT_UID],c=u[l];if(c)return u[a.id]=c,c;let h=e.buffers,d=e.attributes,f={},p={};for(let m in h)f[m]=0,p[m]=0;for(let m in d)!d[m].size&&a.attributeData[m]?d[m].size=a.attributeData[m].size:d[m].size||console.warn(`PIXI Geometry attribute '${m}' size cannot be determined (likely the bound shader does not have the attribute)`),f[d[m].buffer]+=d[m].size*hy[d[m].type];for(let m in d){let y=d[m],v=y.size;y.stride===void 0&&(f[y.buffer]===v*hy[y.type]?y.stride=0:y.stride=f[y.buffer]),y.start===void 0&&(y.start=p[y.buffer],p[y.buffer]+=v*hy[y.type])}c=i.createVertexArray(),i.bindVertexArray(c);for(let m=0;m<h.length;m++){let y=h[m];s.bind(y),n&&y._glBuffers[o].refCount++}return this.activateVao(e,a),u[a.id]=c,u[l]=c,i.bindVertexArray(null),s.unbind(Bt.ARRAY_BUFFER),c}disposeGeometry(e,t){if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];let n=e.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,o=e.buffers,s=this.renderer?.buffer;if(e.disposeRunner.remove(this),!!n){if(s)for(let a=0;a<o.length;a++){let l=o[a]._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!t&&s.dispose(o[a],t))}if(!t){for(let a in n)if(a[0]==="g"){let l=n[a];this._activeVao===l&&this.unbind(),i.deleteVertexArray(l)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){let t=Object.keys(this.managedGeometries);for(let n=0;n<t.length;n++)this.disposeGeometry(this.managedGeometries[t[n]],e)}activateVao(e,t){let n=this.gl,i=this.CONTEXT_UID,o=this.renderer.buffer,s=e.buffers,a=e.attributes;e.indexBuffer&&o.bind(e.indexBuffer);let l=null;for(let u in a){let c=a[u],h=s[c.buffer],d=h._glBuffers[i];if(t.attributeData[u]){l!==d&&(o.bind(h),l=d);let f=t.attributeData[u].location;if(n.enableVertexAttribArray(f),n.vertexAttribPointer(f,c.size,c.type||n.FLOAT,c.normalized,c.stride,c.start),c.instance)if(this.hasInstance)n.vertexAttribDivisor(f,c.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,t,n,i){let{gl:o}=this,s=this._activeGeometry;if(s.indexBuffer){let a=s.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?o.UNSIGNED_SHORT:o.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?s.instanced?o.drawElementsInstanced(e,t||s.indexBuffer.data.length,l,(n||0)*a,i||1):o.drawElements(e,t||s.indexBuffer.data.length,l,(n||0)*a):console.warn("unsupported index buffer type: uint32")}else s.instanced?o.drawArraysInstanced(e,n,t||s.getSize(),i||1):o.drawArrays(e,n,t||s.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}};Es.extension={type:E.RendererSystem,name:"geometry"};w.add(Es);var ZC=new le,ri=class{constructor(e,t){this._texture=e,this.mapCoord=new le,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof t>"u"?.5:t,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,t){t===void 0&&(t=e);let n=this.mapCoord;for(let i=0;i<e.length;i+=2){let o=e[i],s=e[i+1];t[i]=o*n.a+s*n.c+n.tx,t[i+1]=o*n.b+s*n.d+n.ty}return t}update(e){let t=this._texture;if(!t||!t.valid||!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;let n=t._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);let i=t.orig,o=t.trim;o&&(ZC.set(i.width/o.width,0,0,i.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(ZC));let s=t.baseTexture,a=this.uClampFrame,l=this.clampMargin/s.resolution,u=this.clampOffset;return a[0]=(t._frame.x+l+u)/s.width,a[1]=(t._frame.y+l+u)/s.height,a[2]=(t._frame.x+t._frame.width-l+u)/s.width,a[3]=(t._frame.y+t._frame.height-l+u)/s.height,this.uClampOffset[0]=u/s.realWidth,this.uClampOffset[1]=u/s.realHeight,this.isSimple=t._frame.width===s.width&&t._frame.height===s.height&&t.rotate===0,!0}};var KC=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`;var QC=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;var Ol=class extends Ie{constructor(e,t,n){let i=null;typeof e!="string"&&t===void 0&&n===void 0&&(i=e,e=void 0,t=void 0,n=void 0),super(e||QC,t||KC,n),this.maskSprite=i,this.maskMatrix=new le}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,t,n,i){let o=this._maskSprite,s=o._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new ri(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,o).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=o.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,e.applyFilter(this,t,n,i))}};var Fl=class{constructor(e=null){this.type=Be.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Ie.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=Be.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}};var bs=class{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,t){let n=t;if(!n.isMaskData){let o=this.maskDataPool.pop()||new Fl;o.pooled=!0,o.maskObject=t,n=o}let i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(i),n._colorMask=i?i._colorMask:15,n.autoDetect&&this.detect(n),n._target=e,n.type!==Be.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case Be.SCISSOR:this.renderer.scissor.push(n);break;case Be.STENCIL:this.renderer.stencil.push(n);break;case Be.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break;case Be.COLOR:this.pushColorMask(n);break;default:break}n.type===Be.SPRITE&&this.maskStack.push(n)}pop(e){let t=this.maskStack.pop();if(!(!t||t._target!==e)){if(t.enabled)switch(t.type){case Be.SCISSOR:this.renderer.scissor.pop(t);break;case Be.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case Be.SPRITE:this.popSpriteMask(t);break;case Be.COLOR:this.popColorMask(t);break;default:break}if(t.reset(),t.pooled&&this.maskDataPool.push(t),this.maskStack.length!==0){let n=this.maskStack[this.maskStack.length-1];n.type===Be.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}}detect(e){let t=e.maskObject;t?t.isSprite?e.type=Be.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=Be.SCISSOR:e.type=Be.STENCIL:e.type=Be.COLOR}pushSpriteMask(e){let{maskObject:t}=e,n=e._target,i=e._filters;i||(i=this.alphaMaskPool[this.alphaMaskIndex],i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new Ol])),i[0].resolution=e.resolution,i[0].multisample=e.multisample,i[0].maskSprite=t;let o=n.filterArea;n.filterArea=t.getBounds(!0),this.renderer.filter.push(n,i),n.filterArea=o,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){let t=e._colorMask,n=e._colorMask=t&e.colorMask;n!==t&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}popColorMask(e){let t=e._colorMask,n=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;n!==t&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}destroy(){this.renderer=null}};bs.extension={type:E.RendererSystem,name:"mask"};w.add(bs);var ws=class{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){let{gl:t}=this.renderer,n=this.getStackLength();this.maskStack=e;let i=this.getStackLength();i!==n&&(i===0?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}};var JC=new le,eD=[],tD=class qh extends ws{constructor(e){super(e),this.glConst=b.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){let e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;let t=e._scissorRect,{maskObject:n}=e,{renderer:i}=this,o=i.renderTexture,s=n.getBounds(!0,eD.pop()??new W);this.roundFrameToPixels(s,o.current?o.current.resolution:i.resolution,o.sourceFrame,o.destinationFrame,i.projection.transform),t&&s.fit(t),e._scissorRectLocal=s}static isMatrixRotated(e){if(!e)return!1;let{a:t,b:n,c:i,d:o}=e;return(Math.abs(n)>1e-4||Math.abs(i)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(o)>1e-4)}testScissor(e){let{maskObject:t}=e;if(!t.isFastRect||!t.isFastRect()||qh.isMatrixRotated(t.worldTransform)||qh.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);let n=e._scissorRectLocal;return n.width>0&&n.height>0}roundFrameToPixels(e,t,n,i,o){qh.isMatrixRotated(o)||(o=o?JC.copyFrom(o):JC.identity(),o.translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.renderer.filter.transformAABB(o,e),e.fit(i),e.x=Math.round(e.x*t),e.y=Math.round(e.y*t),e.width=Math.round(e.width*t),e.height=Math.round(e.height*t))}push(e){e._scissorRectLocal||this.calcScissorRect(e);let{gl:t}=this.renderer;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){let{gl:t}=this.renderer;e&&eD.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){let e=this.maskStack[this.maskStack.length-1]._scissorRect,t;this.renderer.renderTexture.current?t=e.y:t=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)}};tD.extension={type:E.RendererSystem,name:"scissor"};var dy=tD;w.add(dy);var Ts=class extends ws{constructor(e){super(e),this.glConst=b.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){let e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){let t=e.maskObject,{gl:n}=this.renderer,i=e._stencilCounter;i===0&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),e._stencilCounter++;let o=e._colorMask;o!==0&&(e._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilFunc(n.EQUAL,i,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,o!==0&&(e._colorMask=o,n.colorMask((o&1)!==0,(o&2)!==0,(o&4)!==0,(o&8)!==0)),this._useCurrent()}pop(e){let t=this.renderer.gl;if(this.getStackLength()===0)t.disable(t.STENCIL_TEST);else{let n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,i=n?n._colorMask:15;i!==0&&(n._colorMask=0,t.colorMask(!1,!1,!1,!1)),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,i!==0&&(n._colorMask=i,t.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)),this._useCurrent()}}_useCurrent(){let e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}};Ts.extension={type:E.RendererSystem,name:"stencil"};w.add(Ts);var Cs=class{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return J("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract}},prepare:{enumerable:!1,get(){return J("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare}},interaction:{enumerable:!1,get(){return J("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events}}})}init(){let e=this.rendererPlugins;for(let t in e)this.plugins[t]=new e[t](this.renderer)}destroy(){for(let e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}};Cs.extension={type:[E.RendererSystem,E.CanvasRendererSystem],name:"_plugin"};w.add(Cs);var Ds=class{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new le,this.transform=null}update(e,t,n,i){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,i),this.transform&&this.projectionMatrix.append(this.transform);let o=this.renderer;o.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,o.globalUniforms.update(),o.shader.shader&&o.shader.syncUniformGroup(o.shader.shader.uniforms.globals)}calculateProjection(e,t,n,i){let o=this.projectionMatrix,s=i?-1:1;o.identity(),o.a=1/t.width*2,o.d=s*(1/t.height*2),o.tx=-1-t.x*o.a,o.ty=-s-t.y*o.d}setTransform(e){}destroy(){this.renderer=null}};Ds.extension={type:E.RendererSystem,name:"projection"};w.add(Ds);var eB=new Wi,rD=new W,Ss=class{constructor(e){this.renderer=e,this._tempMatrix=new le}generateTexture(e,t){let u=t||{},{region:n}=u,i=Cu(u,["region"]),o=n?.copyTo(rD)||e.getLocalBounds(rD,!0),s=i.resolution||this.renderer.resolution;o.width=Math.max(o.width,1/s),o.height=Math.max(o.height,1/s),i.width=o.width,i.height=o.height,i.resolution=s,i.multisample??(i.multisample=this.renderer.multisample);let a=fr.create(i);this._tempMatrix.tx=-o.x,this._tempMatrix.ty=-o.y;let l=e.transform;return e.transform=eB,this.renderer.render(e,{renderTexture:a,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=l,a}destroy(){}};Ss.extension={type:[E.RendererSystem,E.CanvasRendererSystem],name:"textureGenerator"};w.add(Ss);var Ki=new W,Ll=new W,Is=class{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new W,this.destinationFrame=new W,this.viewportFrame=new W}contextChange(){let e=this.renderer?.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,t,n){let i=this.renderer;this.current=e;let o,s,a;e?(o=e.baseTexture,a=o.resolution,t||(Ki.width=e.frame.width,Ki.height=e.frame.height,t=Ki),n||(Ll.x=e.frame.x,Ll.y=e.frame.y,Ll.width=t.width,Ll.height=t.height,n=Ll),s=o.framebuffer):(a=i.resolution,t||(Ki.width=i._view.screen.width,Ki.height=i._view.screen.height,t=Ki),n||(n=Ki,n.width=t.width,n.height=t.height));let l=this.viewportFrame;l.x=n.x*a,l.y=n.y*a,l.width=n.width*a,l.height=n.height*a,e||(l.y=i.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(s,l),this.renderer.projection.update(n,t,a,!s),e?this.renderer.mask.setMaskStack(o.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(n)}clear(e,t){let n=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,i=te.shared.setValue(e||n);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&i.premultiply(i.alpha);let o=this.destinationFrame,s=this.current?this.current.baseTexture:this.renderer._view.screen,a=o.width!==s.width||o.height!==s.height;if(a){let{x:l,y:u,width:c,height:h}=this.viewportFrame;l=Math.round(l),u=Math.round(u),c=Math.round(c),h=Math.round(h),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(l,u,c,h)}this.renderer.framebuffer.clear(i.red,i.green,i.blue,i.alpha,t),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}};Is.extension={type:E.RendererSystem,name:"renderTexture"};w.add(Is);var kl=class{constructor(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}};function nD(r,e){let t={},n=e.getProgramParameter(r,e.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){let o=e.getActiveAttrib(r,i);if(o.name.startsWith("gl_"))continue;let s=Dl(e,o.type),a={type:s,name:o.name,size:Cl(s),location:e.getAttribLocation(r,o.name)};t[o.name]=a}return t}function iD(r,e){let t={},n=e.getProgramParameter(r,e.ACTIVE_UNIFORMS);for(let i=0;i<n;i++){let o=e.getActiveUniform(r,i),s=o.name.replace(/\[.*?\]$/,""),a=!!o.name.match(/\[.*?\]$/),l=Dl(e,o.type);t[s]={name:s,index:i,type:l,size:o.size,isArray:a,value:Tl(l,o.size)}}return t}function fy(r,e){let t=kh(r,r.VERTEX_SHADER,e.vertexSrc),n=kh(r,r.FRAGMENT_SHADER,e.fragmentSrc),i=r.createProgram();r.attachShader(i,t),r.attachShader(i,n);let o=e.extra?.transformFeedbackVaryings;if(o&&(typeof r.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):r.transformFeedbackVaryings(i,o.names,o.bufferMode==="separate"?r.SEPARATE_ATTRIBS:r.INTERLEAVED_ATTRIBS)),r.linkProgram(i),r.getProgramParameter(i,r.LINK_STATUS)||sy(r,i,t,n),e.attributeData=nD(i,r),e.uniformData=iD(i,r),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){let a=Object.keys(e.attributeData);a.sort((l,u)=>l>u?1:-1);for(let l=0;l<a.length;l++)e.attributeData[a[l]].location=l,r.bindAttribLocation(i,l,a[l]);r.linkProgram(i)}r.deleteShader(t),r.deleteShader(n);let s={};for(let a in e.uniformData){let l=e.uniformData[a];s[a]={location:r.getUniformLocation(i,a),value:Tl(l.type,l.size)}}return new kl(i,s)}function tB(r,e,t,n,i){t.buffer.update(i)}var rB={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},oD={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function sD(r){let e=r.map(o=>({data:o,offset:0,dataLen:0,dirty:0})),t=0,n=0,i=0;for(let o=0;o<e.length;o++){let s=e[o];if(t=oD[s.data.type],s.data.size>1&&(t=Math.max(t,16)*s.data.size),s.dataLen=t,n%t!==0&&n<16){let a=n%t%16;n+=a,i+=a}n+t>16?(i=Math.ceil(i/16)*16,s.offset=i,i+=t,n=t):(s.offset=i,n+=t,i+=t)}return i=Math.ceil(i/16)*16,{uboElements:e,size:i}}function aD(r,e){let t=[];for(let n in r)e[n]&&t.push(e[n]);return t.sort((n,i)=>n.index-i.index),t}function py(r,e){if(!r.autoManage)return{size:0,syncFunc:tB};let t=aD(r.uniforms,e),{uboElements:n,size:i}=sD(t),o=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let s=0;s<n.length;s++){let a=n[s],l=r.uniforms[a.data.name],u=a.data.name,c=!1;for(let h=0;h<Jr.length;h++){let d=Jr[h];if(d.codeUbo&&d.test(a.data,l)){o.push(`offset = ${a.offset/4};`,Jr[h].codeUbo(a.data.name,l)),c=!0;break}}if(!c)if(a.data.size>1){let h=Cl(a.data.type),d=Math.max(oD[a.data.type]/16,1),f=h/d,p=(4-f%4)%4;o.push(`
                cv = ud.${u}.value;
                v = uv.${u};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*d}; i++)
                {
                    for(var j = 0; j < ${f}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${p};
                }

                `)}else{let h=rB[a.data.type];o.push(`
                cv = ud.${u}.value;
                v = uv.${u};
                offset = ${a.offset/4};
                ${h};
                `)}}return o.push(`
       renderer.buffer.update(buffer);
    `),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",o.join(`
`))}}var nB=0,Xh={textureCount:0,uboCount:0},As=class{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=nB++}systemCheck(){if(!$h())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,t){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;let n=e.program,i=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==n&&(this.program=n,this.gl.useProgram(i.program)),t||(Xh.textureCount=0,Xh.uboCount=0,this.syncUniformGroup(e.uniformGroup,Xh)),i}setUniforms(e){let t=this.shader.program,n=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(n.uniformData,e,this.renderer)}syncUniformGroup(e,t){let n=this.getGlProgram();(!e.static||e.dirtyId!==n.uniformDirtyGroups[e.id])&&(n.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,n,t))}syncUniforms(e,t,n){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,n)}createSyncGroups(e){let t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=iy(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,t){let n=this.getGlProgram();if(!e.static||e.dirtyId!==0||!n.uniformGroups[e.id]){e.dirtyId=0;let i=n.uniformGroups[e.id]||this.createSyncBufferGroup(e,n,t);e.buffer.update(),i(n.uniformData,e.uniforms,this.renderer,Xh,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,n.uniformBufferBindings[t])}createSyncBufferGroup(e,t,n){let{gl:i}=this.renderer;this.renderer.buffer.bind(e.buffer);let o=this.gl.getUniformBlockIndex(t.program,n);t.uniformBufferBindings[n]=this.shader.uniformBindCount,i.uniformBlockBinding(t.program,o,this.shader.uniformBindCount),this.shader.uniformBindCount++;let s=this.getSignature(e,this.shader.program.uniformData,"ubo"),a=this._uboCache[s];if(a||(a=this._uboCache[s]=py(e,this.shader.program.uniformData)),e.autoManage){let l=new Float32Array(a.size/4);e.buffer.update(l)}return t.uniformGroups[e.id]=a.syncFunc,t.uniformGroups[e.id]}getSignature(e,t,n){let i=e.uniforms,o=[`${n}-`];for(let s in i)o.push(s),t[s]&&o.push(t[s].type);return o.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){let t=this.gl,n=e.program,i=fy(t,n);return n.glPrograms[this.renderer.CONTEXT_UID]=i,i}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}};As.extension={type:E.RendererSystem,name:"shader"};w.add(As);var Dn=class{constructor(e){this.renderer=e}run(e){let{renderer:t}=this;t.runners.init.emit(t.options),e.hello&&console.log(`PixiJS 7.4.3 - ${t.rendererLogId} - https://pixijs.com`),t.resize(t.screen.width,t.screen.height)}destroy(){}};Dn.defaultOptions={hello:!1},Dn.extension={type:[E.RendererSystem,E.CanvasRendererSystem],name:"startup"};w.add(Dn);function lD(r,e=[]){return e[Y.NORMAL]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Y.ADD]=[r.ONE,r.ONE],e[Y.MULTIPLY]=[r.DST_COLOR,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Y.SCREEN]=[r.ONE,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Y.OVERLAY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Y.DARKEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Y.LIGHTEN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Y.COLOR_DODGE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Y.COLOR_BURN]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Y.HARD_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Y.SOFT_LIGHT]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Y.DIFFERENCE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Y.EXCLUSION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Y.HUE]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Y.SATURATION]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Y.COLOR]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Y.LUMINOSITY]=[r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Y.NONE]=[0,0],e[Y.NORMAL_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Y.ADD_NPM]=[r.SRC_ALPHA,r.ONE,r.ONE,r.ONE],e[Y.SCREEN_NPM]=[r.SRC_ALPHA,r.ONE_MINUS_SRC_COLOR,r.ONE,r.ONE_MINUS_SRC_ALPHA],e[Y.SRC_IN]=[r.DST_ALPHA,r.ZERO],e[Y.SRC_OUT]=[r.ONE_MINUS_DST_ALPHA,r.ZERO],e[Y.SRC_ATOP]=[r.DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],e[Y.DST_OVER]=[r.ONE_MINUS_DST_ALPHA,r.ONE],e[Y.DST_IN]=[r.ZERO,r.SRC_ALPHA],e[Y.DST_OUT]=[r.ZERO,r.ONE_MINUS_SRC_ALPHA],e[Y.DST_ATOP]=[r.ONE_MINUS_DST_ALPHA,r.SRC_ALPHA],e[Y.XOR]=[r.ONE_MINUS_DST_ALPHA,r.ONE_MINUS_SRC_ALPHA],e[Y.SUBTRACT]=[r.ONE,r.ONE,r.ONE,r.ONE,r.FUNC_REVERSE_SUBTRACT,r.FUNC_ADD],e}var iB=0,oB=1,sB=2,aB=3,lB=4,uB=5,uD=class my{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Y.NONE,this._blendEq=!1,this.map=[],this.map[iB]=this.setBlend,this.map[oB]=this.setOffset,this.map[sB]=this.setCullFace,this.map[aB]=this.setDepthTest,this.map[lB]=this.setFrontFace,this.map[uB]=this.setDepthMask,this.checks=[],this.defaultState=new st,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=lD(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let t=this.stateId^e.data,n=0;for(;t;)t&1&&this.map[n].call(this,!!(e.data&1<<n)),t=t>>1,n++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e=e||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(my.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(my.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;let t=this.blendModes[e],n=this.gl;t.length===2?n.blendFunc(t[0],t[1]):n.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,n.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,t){let n=this.checks.indexOf(e);t&&n===-1?this.checks.push(e):!t&&n!==-1&&this.checks.splice(n,1)}static checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};uD.extension={type:E.RendererSystem,name:"state"};var gy=uD;w.add(gy);var Ms=class extends Zn.default{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);let t=(e.priority??[]).filter(i=>e.systems[i]),n=[...t,...Object.keys(e.systems).filter(i=>!t.includes(i))];for(let i of n)this.addSystem(e.systems[i],i)}addRunners(...e){e.forEach(t=>{this.runners[t]=new He(t)})}addSystem(e,t){let n=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=n,this._systemsHash[t]=n;for(let i in this.runners)this.runners[i].add(n);return this}emitWithCustomOptions(e,t){let n=Object.keys(this._systemsHash);e.items.forEach(i=>{let o=n.find(s=>this._systemsHash[s]===i);i[e.name](t[o])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}};var Bl=class Yh{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=Yh.defaultMaxIdle,this.checkCountMax=Yh.defaultCheckCountMax,this.mode=Yh.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==oh.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){let e=this.renderer.texture,t=e.managedTextures,n=!1;for(let i=0;i<t.length;i++){let o=t[i];o.resource&&this.count-o.touched>this.maxIdle&&(e.destroyTexture(o,!0),t[i]=null,n=!0)}if(n){let i=0;for(let o=0;o<t.length;o++)t[o]!==null&&(t[i++]=t[o]);t.length=i}}unload(e){let t=this.renderer.texture,n=e._texture;n&&!n.framebuffer&&t.destroyTexture(n);for(let i=e.children.length-1;i>=0;i--)this.unload(e.children[i])}destroy(){this.renderer=null}};Bl.defaultMode=oh.AUTO,Bl.defaultMaxIdle=60*60,Bl.defaultCheckCountMax=60*10,Bl.extension={type:E.RendererSystem,name:"textureGC"};var en=Bl;w.add(en);var Qi=class{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=H.UNSIGNED_BYTE,this.internalFormat=M.RGBA,this.samplerType=0}};function cD(r){let e;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?e={[r.RGB]:B.FLOAT,[r.RGBA]:B.FLOAT,[r.ALPHA]:B.FLOAT,[r.LUMINANCE]:B.FLOAT,[r.LUMINANCE_ALPHA]:B.FLOAT,[r.R8]:B.FLOAT,[r.R8_SNORM]:B.FLOAT,[r.RG8]:B.FLOAT,[r.RG8_SNORM]:B.FLOAT,[r.RGB8]:B.FLOAT,[r.RGB8_SNORM]:B.FLOAT,[r.RGB565]:B.FLOAT,[r.RGBA4]:B.FLOAT,[r.RGB5_A1]:B.FLOAT,[r.RGBA8]:B.FLOAT,[r.RGBA8_SNORM]:B.FLOAT,[r.RGB10_A2]:B.FLOAT,[r.RGB10_A2UI]:B.FLOAT,[r.SRGB8]:B.FLOAT,[r.SRGB8_ALPHA8]:B.FLOAT,[r.R16F]:B.FLOAT,[r.RG16F]:B.FLOAT,[r.RGB16F]:B.FLOAT,[r.RGBA16F]:B.FLOAT,[r.R32F]:B.FLOAT,[r.RG32F]:B.FLOAT,[r.RGB32F]:B.FLOAT,[r.RGBA32F]:B.FLOAT,[r.R11F_G11F_B10F]:B.FLOAT,[r.RGB9_E5]:B.FLOAT,[r.R8I]:B.INT,[r.R8UI]:B.UINT,[r.R16I]:B.INT,[r.R16UI]:B.UINT,[r.R32I]:B.INT,[r.R32UI]:B.UINT,[r.RG8I]:B.INT,[r.RG8UI]:B.UINT,[r.RG16I]:B.INT,[r.RG16UI]:B.UINT,[r.RG32I]:B.INT,[r.RG32UI]:B.UINT,[r.RGB8I]:B.INT,[r.RGB8UI]:B.UINT,[r.RGB16I]:B.INT,[r.RGB16UI]:B.UINT,[r.RGB32I]:B.INT,[r.RGB32UI]:B.UINT,[r.RGBA8I]:B.INT,[r.RGBA8UI]:B.UINT,[r.RGBA16I]:B.INT,[r.RGBA16UI]:B.UINT,[r.RGBA32I]:B.INT,[r.RGBA32UI]:B.UINT,[r.DEPTH_COMPONENT16]:B.FLOAT,[r.DEPTH_COMPONENT24]:B.FLOAT,[r.DEPTH_COMPONENT32F]:B.FLOAT,[r.DEPTH_STENCIL]:B.FLOAT,[r.DEPTH24_STENCIL8]:B.FLOAT,[r.DEPTH32F_STENCIL8]:B.FLOAT}:e={[r.RGB]:B.FLOAT,[r.RGBA]:B.FLOAT,[r.ALPHA]:B.FLOAT,[r.LUMINANCE]:B.FLOAT,[r.LUMINANCE_ALPHA]:B.FLOAT,[r.DEPTH_STENCIL]:B.FLOAT},e}function hD(r){let e;return"WebGL2RenderingContext"in globalThis&&r instanceof globalThis.WebGL2RenderingContext?e={[H.UNSIGNED_BYTE]:{[M.RGBA]:r.RGBA8,[M.RGB]:r.RGB8,[M.RG]:r.RG8,[M.RED]:r.R8,[M.RGBA_INTEGER]:r.RGBA8UI,[M.RGB_INTEGER]:r.RGB8UI,[M.RG_INTEGER]:r.RG8UI,[M.RED_INTEGER]:r.R8UI,[M.ALPHA]:r.ALPHA,[M.LUMINANCE]:r.LUMINANCE,[M.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[H.BYTE]:{[M.RGBA]:r.RGBA8_SNORM,[M.RGB]:r.RGB8_SNORM,[M.RG]:r.RG8_SNORM,[M.RED]:r.R8_SNORM,[M.RGBA_INTEGER]:r.RGBA8I,[M.RGB_INTEGER]:r.RGB8I,[M.RG_INTEGER]:r.RG8I,[M.RED_INTEGER]:r.R8I},[H.UNSIGNED_SHORT]:{[M.RGBA_INTEGER]:r.RGBA16UI,[M.RGB_INTEGER]:r.RGB16UI,[M.RG_INTEGER]:r.RG16UI,[M.RED_INTEGER]:r.R16UI,[M.DEPTH_COMPONENT]:r.DEPTH_COMPONENT16},[H.SHORT]:{[M.RGBA_INTEGER]:r.RGBA16I,[M.RGB_INTEGER]:r.RGB16I,[M.RG_INTEGER]:r.RG16I,[M.RED_INTEGER]:r.R16I},[H.UNSIGNED_INT]:{[M.RGBA_INTEGER]:r.RGBA32UI,[M.RGB_INTEGER]:r.RGB32UI,[M.RG_INTEGER]:r.RG32UI,[M.RED_INTEGER]:r.R32UI,[M.DEPTH_COMPONENT]:r.DEPTH_COMPONENT24},[H.INT]:{[M.RGBA_INTEGER]:r.RGBA32I,[M.RGB_INTEGER]:r.RGB32I,[M.RG_INTEGER]:r.RG32I,[M.RED_INTEGER]:r.R32I},[H.FLOAT]:{[M.RGBA]:r.RGBA32F,[M.RGB]:r.RGB32F,[M.RG]:r.RG32F,[M.RED]:r.R32F,[M.DEPTH_COMPONENT]:r.DEPTH_COMPONENT32F},[H.HALF_FLOAT]:{[M.RGBA]:r.RGBA16F,[M.RGB]:r.RGB16F,[M.RG]:r.RG16F,[M.RED]:r.R16F},[H.UNSIGNED_SHORT_5_6_5]:{[M.RGB]:r.RGB565},[H.UNSIGNED_SHORT_4_4_4_4]:{[M.RGBA]:r.RGBA4},[H.UNSIGNED_SHORT_5_5_5_1]:{[M.RGBA]:r.RGB5_A1},[H.UNSIGNED_INT_2_10_10_10_REV]:{[M.RGBA]:r.RGB10_A2,[M.RGBA_INTEGER]:r.RGB10_A2UI},[H.UNSIGNED_INT_10F_11F_11F_REV]:{[M.RGB]:r.R11F_G11F_B10F},[H.UNSIGNED_INT_5_9_9_9_REV]:{[M.RGB]:r.RGB9_E5},[H.UNSIGNED_INT_24_8]:{[M.DEPTH_STENCIL]:r.DEPTH24_STENCIL8},[H.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[M.DEPTH_STENCIL]:r.DEPTH32F_STENCIL8}}:e={[H.UNSIGNED_BYTE]:{[M.RGBA]:r.RGBA,[M.RGB]:r.RGB,[M.ALPHA]:r.ALPHA,[M.LUMINANCE]:r.LUMINANCE,[M.LUMINANCE_ALPHA]:r.LUMINANCE_ALPHA},[H.UNSIGNED_SHORT_5_6_5]:{[M.RGB]:r.RGB},[H.UNSIGNED_SHORT_4_4_4_4]:{[M.RGBA]:r.RGBA},[H.UNSIGNED_SHORT_5_5_5_1]:{[M.RGBA]:r.RGBA}},e}var Rs=class{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new G,this.hasIntegerTextures=!1}contextChange(){let e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=hD(e),this.samplerTypes=cD(e);let t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(let i=0;i<t;i++)this.boundTextures[i]=null;this.emptyTextures={};let n=new Qi(e.createTexture());e.bindTexture(e.TEXTURE_2D,n.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=n,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Qi(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let i=0;i<6;i++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let i=0;i<this.boundTextures.length;i++)this.bind(null,i)}bind(e,t=0){let{gl:n}=this;if(e=e?.castToBaseTexture(),e?.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;let i=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),n.bindTexture(e.target,i.texture)),i.dirtyId!==e.dirtyId?(this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),this.updateTexture(e)):i.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[t]=e}else this.currentLocation!==t&&(this.currentLocation=t,n.activeTexture(n.TEXTURE0+t)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[t]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){let{gl:t,boundTextures:n}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let i=0;i<n.length;i++)n[i]===this.unknownTexture&&this.bind(null,i)}for(let i=0;i<n.length;i++)n[i]===e&&(this.currentLocation!==i&&(t.activeTexture(t.TEXTURE0+i),this.currentLocation=i),t.bindTexture(e.target,this.emptyTextures[e.target].texture),n[i]=null)}ensureSamplerType(e){let{boundTextures:t,hasIntegerTextures:n,CONTEXT_UID:i}=this;if(n)for(let o=e-1;o>=0;--o){let s=t[o];s&&s._glTextures[i].samplerType!==B.FLOAT&&this.renderer.texture.unbind(s)}}initTexture(e){let t=new Qi(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t}initTextureType(e,t){t.internalFormat=this.internalFormats[e.type]?.[e.format]??e.format,t.samplerType=this.samplerTypes[t.internalFormat]??B.FLOAT,this.webGLVersion===2&&e.type===H.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=e.type}updateTexture(e){let t=e._glTextures[this.CONTEXT_UID];if(!t)return;let n=this.renderer;if(this.initTextureType(e,t),e.resource?.upload(n,e,t))t.samplerType!==B.FLOAT&&(this.hasIntegerTextures=!0);else{let i=e.realWidth,o=e.realHeight,s=n.gl;(t.width!==i||t.height!==o||t.dirtyId<0)&&(t.width=i,t.height=o,s.texImage2D(e.target,0,t.internalFormat,i,o,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}destroyTexture(e,t){let{gl:n}=this;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),n.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){let i=this.managedTextures.indexOf(e);i!==-1&&Mh(this.managedTextures,i,1)}}updateTextureStyle(e){let t=e._glTextures[this.CONTEXT_UID];t&&((e.mipmap===ft.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?t.mipmap=!1:t.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?t.wrapMode=Zt.CLAMP:t.wrapMode=e.wrapMode,e.resource?.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)}setStyle(e,t){let n=this.gl;if(t.mipmap&&e.mipmap!==ft.ON_MANUAL&&n.generateMipmap(e.target),n.texParameteri(e.target,n.TEXTURE_WRAP_S,t.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===ur.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);let i=this.renderer.context.extensions.anisotropicFiltering;if(i&&e.anisotropicLevel>0&&e.scaleMode===ur.LINEAR){let o=Math.min(e.anisotropicLevel,n.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY_EXT,o)}}else n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===ur.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,e.scaleMode===ur.LINEAR?n.LINEAR:n.NEAREST)}destroy(){this.renderer=null}};Rs.extension={type:E.RendererSystem,name:"texture"};w.add(Rs);var Ps=class{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){let{gl:t,CONTEXT_UID:n}=this,i=e._glTransformFeedbacks[n]||this.createGLTransformFeedback(e);t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,i)}unbind(){let{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,t){let{gl:n,renderer:i}=this;t&&i.shader.bind(t),n.beginTransformFeedback(e)}endTransformFeedback(){let{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){let{gl:t,renderer:n,CONTEXT_UID:i}=this,o=t.createTransformFeedback();e._glTransformFeedbacks[i]=o,t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,o);for(let s=0;s<e.buffers.length;s++){let a=e.buffers[s];a&&(n.buffer.update(a),a._glBuffers[i].refCount++,t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,s,a._glBuffers[i].buffer||null))}return t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),o}disposeTransformFeedback(e,t){let n=e._glTransformFeedbacks[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this);let o=this.renderer.buffer;if(o)for(let s=0;s<e.buffers.length;s++){let a=e.buffers[s];if(!a)continue;let l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!t&&o.dispose(a,t))}n&&(t||i.deleteTransformFeedback(n),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}};Ps.extension={type:E.RendererSystem,name:"transformFeedback"};w.add(Ps);var Sn=class{constructor(e){this.renderer=e}init(e){this.screen=new W(0,0,e.width,e.height),this.element=e.view||b.ADAPTER.createCanvas(),this.resolution=e.resolution||b.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,t){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(t*this.resolution);let n=this.element.width/this.resolution,i=this.element.height/this.resolution;this.screen.width=n,this.screen.height=i,this.autoDensity&&(this.element.style.width=`${n}px`,this.element.style.height=`${i}px`),this.renderer.emit("resize",n,i),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){e&&this.element.parentNode?.removeChild(this.element),this.renderer=null,this.element=null,this.screen=null}};Sn.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},Sn.extension={type:[E.RendererSystem,E.CanvasRendererSystem],name:"_view"};w.add(Sn);b.PREFER_ENV=Yt.WEBGL2;b.STRICT_TEXTURE_CACHE=!1;b.RENDER_OPTIONS=S(S(S(S({},Cn.defaultOptions),Tn.defaultOptions),Sn.defaultOptions),Dn.defaultOptions);Object.defineProperties(b,{WRAP_MODE:{get(){return G.defaultOptions.wrapMode},set(r){J("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),G.defaultOptions.wrapMode=r}},SCALE_MODE:{get(){return G.defaultOptions.scaleMode},set(r){J("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),G.defaultOptions.scaleMode=r}},MIPMAP_TEXTURES:{get(){return G.defaultOptions.mipmap},set(r){J("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),G.defaultOptions.mipmap=r}},ANISOTROPIC_LEVEL:{get(){return G.defaultOptions.anisotropicLevel},set(r){J("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),G.defaultOptions.anisotropicLevel=r}},FILTER_RESOLUTION:{get(){return J("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Ie.defaultResolution},set(r){Ie.defaultResolution=r}},FILTER_MULTISAMPLE:{get(){return J("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Ie.defaultMultisample},set(r){Ie.defaultMultisample=r}},SPRITE_MAX_TEXTURES:{get(){return wn.defaultMaxTextures},set(r){J("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),wn.defaultMaxTextures=r}},SPRITE_BATCH_SIZE:{get(){return wn.defaultBatchSize},set(r){J("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),wn.defaultBatchSize=r}},CAN_UPLOAD_SAME_BUFFER:{get(){return wn.canUploadSameBuffer},set(r){J("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),wn.canUploadSameBuffer=r}},GC_MODE:{get(){return en.defaultMode},set(r){J("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),en.defaultMode=r}},GC_MAX_IDLE:{get(){return en.defaultMaxIdle},set(r){J("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),en.defaultMaxIdle=r}},GC_MAX_CHECK_COUNT:{get(){return en.defaultCheckCountMax},set(r){J("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),en.defaultCheckCountMax=r}},PRECISION_VERTEX:{get(){return xt.defaultVertexPrecision},set(r){J("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),xt.defaultVertexPrecision=r}},PRECISION_FRAGMENT:{get(){return xt.defaultFragmentPrecision},set(r){J("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),xt.defaultFragmentPrecision=r}}});var Ut=(r=>(r[r.INTERACTION=50]="INTERACTION",r[r.HIGH=25]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-25]="LOW",r[r.UTILITY=-50]="UTILITY",r))(Ut||{});var Ns=class{constructor(e,t=null,n=0,i=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=t,this.priority=n,this.once=i}match(e,t=null){return this.fn===e&&this.context===t}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));let t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);let t=this.next;return this.next=e?null:t,this.previous=null,t}};var dD=class tr{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Ns(null,null,1/0),this.deltaMS=1/tr.targetFPMS,this.elapsedMS=1/tr.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,n=Ut.NORMAL){return this._addListener(new Ns(e,t,n))}addOnce(e,t,n=Ut.NORMAL){return this._addListener(new Ns(e,t,n,!0))}_addListener(e){let t=this._head.next,n=this._head;if(!t)e.connect(n);else{for(;t;){if(e.priority>t.priority){e.connect(n);break}n=t,t=t.next}e.previous||e.connect(n)}return this._startIfPossible(),this}remove(e,t){let n=this._head.next;for(;n;)n.match(e,t)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){let o=e-this._lastFrame|0;if(o<this._minElapsedMS)return;this._lastFrame=e-o%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*tr.targetFPMS;let n=this._head,i=n.next;for(;i;)i=i.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){let t=Math.min(this.maxFPS,e),n=Math.min(Math.max(0,t)/1e3,tr.targetFPMS);this._maxElapsedMS=1/n}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{let t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!tr._shared){let e=tr._shared=new tr;e.autoStart=!0,e._protected=!0}return tr._shared}static get system(){if(!tr._system){let e=tr._system=new tr;e.autoStart=!0,e._protected=!0}return tr._system}};dD.targetFPMS=.06;var Pe=dD;Object.defineProperties(b,{TARGET_FPMS:{get(){return Pe.targetFPMS},set(r){J("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Pe.targetFPMS=r}}});var Ul=class{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,Ut.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Pe.shared:new Pe,e.autoStart&&this.start()}static destroy(){if(this._ticker){let e=this._ticker;this.ticker=null,e.destroy()}}};Ul.extension=E.Application;w.add(Ul);var fD=[];w.handleByList(E.Renderer,fD);function yy(r){for(let e of fD)if(e.test(r))return new e(r);throw new Error("Unable to auto-detect a suitable renderer.")}var pD=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`;var mD=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;var vy=pD,jl=mD;var Hl=class{constructor(e){this.renderer=e}contextChange(e){let t;if(this.renderer.context.webGLVersion===1){let n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else{let n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n)}t>=we.HIGH?this.multisample=we.HIGH:t>=we.MEDIUM?this.multisample=we.MEDIUM:t>=we.LOW?this.multisample=we.LOW:this.multisample=we.NONE}destroy(){}};Hl.extension={type:E.RendererSystem,name:"_multisample"};w.add(Hl);var Zh=class{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}};var Vl=class{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){let{gl:t,CONTEXT_UID:n}=this,i=e._glBuffers[n]||this.createGLBuffer(e);t.bindBuffer(e.type,i.buffer)}unbind(e){let{gl:t}=this;t.bindBuffer(e,null)}bindBufferBase(e,t){let{gl:n,CONTEXT_UID:i}=this;if(this.boundBufferBases[t]!==e){let o=e._glBuffers[i]||this.createGLBuffer(e);this.boundBufferBases[t]=e,n.bindBufferBase(n.UNIFORM_BUFFER,t,o.buffer)}}bindBufferRange(e,t,n){let{gl:i,CONTEXT_UID:o}=this;n=n||0;let s=e._glBuffers[o]||this.createGLBuffer(e);i.bindBufferRange(i.UNIFORM_BUFFER,t||0,s.buffer,n*256,256)}update(e){let{gl:t,CONTEXT_UID:n}=this,i=e._glBuffers[n]||this.createGLBuffer(e);if(e._updateID!==i.updateID)if(i.updateID=e._updateID,t.bindBuffer(e.type,i.buffer),i.byteLength>=e.data.byteLength)t.bufferSubData(e.type,0,e.data);else{let o=e.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;i.byteLength=e.data.byteLength,t.bufferData(e.type,e.data,o)}}dispose(e,t){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];let n=e._glBuffers[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this),n&&(t||i.deleteBuffer(n.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){let t=Object.keys(this.managedBuffers);for(let n=0;n<t.length;n++)this.dispose(this.managedBuffers[t[n]],e)}createGLBuffer(e){let{CONTEXT_UID:t,gl:n}=this;return e._glBuffers[t]=new Zh(n.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[t]}};Vl.extension={type:E.RendererSystem,name:"buffer"};w.add(Vl);var $l=class{constructor(e){this.renderer=e}render(e,t){let n=this.renderer,i,o,s,a;if(t&&(i=t.renderTexture,o=t.clear,s=t.transform,a=t.skipUpdateTransform),this.renderingToScreen=!i,n.runners.prerender.emit(),n.emit("prerender"),n.projection.transform=s,!n.context.isLost){if(i||(this.lastObjectRendered=e),!a){let l=e.enableTempParent();e.updateTransform(),e.disableTempParent(l)}n.renderTexture.bind(i),n.batch.currentRenderer.start(),(o??n.background.clearBeforeRender)&&n.renderTexture.clear(),e.render(n),n.batch.currentRenderer.flush(),i&&(t.blit&&n.framebuffer.blit(),i.baseTexture.update()),n.runners.postrender.emit(),n.projection.transform=null,n.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}};$l.extension={type:E.RendererSystem,name:"objectRenderer"};w.add($l);var Kh=class _y extends Ms{constructor(e){super(),this.type=Ym.WEBGL,e=Object.assign({},b.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new Mt({projectionMatrix:new le},!0);let t={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:_y.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(t),"useContextAlpha"in e&&(J("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=_y.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e?.forceCanvas?!1:Dh()}render(e,t){this.objectRenderer.render(e,t)}resize(e,t){this._view.resizeView(e,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return J("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return J("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return J("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return J("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){J("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return J("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){J("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return J("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,t){return this.textureGenerator.generateTexture(e,t)}};Kh.extension={type:E.Renderer,priority:1},Kh.__plugins={},Kh.__systems={};var Qh=Kh;w.handleByMap(E.RendererPlugin,Qh.__plugins);w.handleByMap(E.RendererSystem,Qh.__systems);w.add(Qh);var ni=class extends Qt{constructor(e,t){let{width:n,height:i}=t||{};super(n,i),this.items=[],this.itemDirtyIds=[];for(let o=0;o<e;o++){let s=new G;this.items.push(s),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,t){for(let n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof Qt?this.addResourceAt(e[n],n):this.addResourceAt(hs(e[n],t),n))}dispose(){for(let e=0,t=this.length;e<t;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,t){if(!this.items[t])throw new Error(`Index ${t} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[t].setResource(e),this}bind(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=e,this.items[t].on("update",e.update,e)}unbind(e){super.unbind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=null,this.items[t].off("update",e.update,e)}load(){if(this._load)return this._load;let e=this.items.map(t=>t.resource).filter(t=>t).map(t=>t.load());return this._load=Promise.all(e).then(()=>{let{realWidth:t,realHeight:n}=this.items[0];return this.resize(t,n),this.update(),Promise.resolve(this)}),this._load}};var Gl=class extends ni{constructor(e,t){let{width:n,height:i}=t||{},o,s;Array.isArray(e)?(o=e,s=e.length):s=e,super(s,{width:n,height:i}),o&&this.initFromArray(o,t)}addBaseTextureAt(e,t){if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(e){super.bind(e),e.target=_n.TEXTURE_2D_ARRAY}upload(e,t,n){let{length:i,itemDirtyIds:o,items:s}=this,{gl:a}=e;n.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,i,0,t.format,n.type,null);for(let l=0;l<i;l++){let u=s[l];o[l]<u.dirtyId&&(o[l]=u.dirtyId,u.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,u.resource.width,u.resource.height,1,t.format,n.type,u.resource.source))}return!0}};var zl=class extends Je{constructor(e){super(e)}static test(e){let{OffscreenCanvas:t}=globalThis;return t&&e instanceof t?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}};var gD=class Wl extends ni{constructor(e,t){let{width:n,height:i,autoLoad:o,linkBaseTexture:s}=t||{};if(e&&e.length!==Wl.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:n,height:i});for(let a=0;a<Wl.SIDES;a++)this.items[a].target=_n.TEXTURE_CUBE_MAP_POSITIVE_X+a;this.linkBaseTexture=s!==!1,e&&this.initFromArray(e,t),o!==!1&&this.load()}bind(e){super.bind(e),e.target=_n.TEXTURE_CUBE_MAP}addBaseTextureAt(e,t,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=_n.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this}upload(e,t,n){let i=this.itemDirtyIds;for(let o=0;o<Wl.SIDES;o++){let s=this.items[o];(i[o]<s.dirtyId||n.dirtyId<t.dirtyId)&&(s.valid&&s.resource?(s.resource.upload(e,s,n),i[o]=s.dirtyId):i[o]<-1&&(e.gl.texImage2D(s.target,0,n.internalFormat,t.realWidth,t.realHeight,0,t.format,n.type,null),i[o]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===Wl.SIDES}};gD.SIDES=6;var xy=gD;var ql=class r extends Je{constructor(e,t){t=t||{};let n,i,o;typeof e=="string"?(n=r.EMPTY,i=e,o=!0):(n=e,i=null,o=!1),super(n),this.url=i,this.crossOrigin=t.crossOrigin??!0,this.alphaMode=typeof t.alphaMode=="number"?t.alphaMode:null,this.ownsImageBitmap=t.ownsImageBitmap??o,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise((e,t)=>I(this,null,function*(){if(this.url===null){e(this);return}try{let n=yield b.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;let i=yield n.blob();if(this.destroyed)return;let o=yield createImageBitmap(i,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Oe.UNPACK?"premultiply":"none"});if(this.destroyed){o.close();return}this.source=o,this.update(),e(this)}catch(n){if(this.destroyed)return;t(n),this.onError.emit(n)}})),this._load)}upload(e,t,n){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(t.alphaMode=this.alphaMode),super.upload(e,t,n)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof e=="string"||e instanceof ImageBitmap)}static get EMPTY(){return r._EMPTY=r._EMPTY??b.ADAPTER.createCanvas(0,0),r._EMPTY}};var Ey=class Jh extends Je{constructor(e,t){t=t||{},super(b.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.update(),e(this)},Jh.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){let e=new Image;Je.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=t=>{this._resolve&&(e.onerror=null,this.onError.emit(t))},e.onload=()=>{if(!this._resolve)return;let t=e.width,n=e.height;if(!t||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let i=t*this.scale,o=n*this.scale;(this._overrideWidth||this._overrideHeight)&&(i=this._overrideWidth||this._overrideHeight/n*t,o=this._overrideHeight||this._overrideWidth/t*n),i=Math.round(i),o=Math.round(o);let s=this.source;s.width=i,s.height=o,s._pixiId=`canvas_${Kr()}`,s.getContext("2d").drawImage(e,0,0,t,n,0,0,i,o),this._resolve(),this._resolve=null}}static getSize(e){let t=Jh.SVG_SIZE.exec(e),n={};return t&&(n[t[1]]=Math.round(parseFloat(t[3])),n[t[5]]=Math.round(parseFloat(t[7]))),n}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,t){return t==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&Jh.SVG_XML.test(e)}};Ey.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,Ey.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;var Os=Ey;var ed=class extends Je{constructor(e){super(e)}static test(e){return!!globalThis.VideoFrame&&e instanceof globalThis.VideoFrame}};var by=class wy extends Je{constructor(e,t){if(t=t||{},!(e instanceof HTMLVideoElement)){let n=document.createElement("video");t.autoLoad!==!1&&n.setAttribute("preload","auto"),t.playsinline!==!1&&(n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline","")),t.muted===!0&&(n.setAttribute("muted",""),n.muted=!0),t.loop===!0&&n.setAttribute("loop",""),t.autoPlay!==!1&&n.setAttribute("autoplay",""),typeof e=="string"&&(e=[e]);let i=e[0].src||e[0];Je.crossOrigin(n,i,t.crossorigin);for(let o=0;o<e.length;++o){let s=document.createElement("source"),{src:a,mime:l}=e[o];if(a=a||e[o],a.startsWith("data:"))l=a.slice(5,a.indexOf(";"));else if(!a.startsWith("blob:")){let u=a.split("?").shift().toLowerCase(),c=u.slice(u.lastIndexOf(".")+1);l=l||wy.MIME_TYPES[c]||`video/${c}`}s.src=a,l&&(s.type=l),n.appendChild(s)}e=n}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),t.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){if(this._updateFPS){let t=Pe.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;let e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((t,n)=>{this.valid?t(this):(this._resolve=t,this._reject=n,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){let e=this.source;return!e.paused&&!e.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){let e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);let t=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!t&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._configureAutoUpdate();let e=this.source;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(Pe.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Pe.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Pe.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e,t){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||wy.TYPES.includes(t)}};by.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],by.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};var Xl=by;wl.push(ql,Xi,zl,Xl,ed,Os,Mr,xy,Gl);var tn=class{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?W.EMPTY:(e=e||new W(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,t){let{a:n,b:i,c:o,d:s,tx:a,ty:l}=e,u=n*t.x+o*t.y+a,c=i*t.x+s*t.y+l;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,c),this.maxY=Math.max(this.maxY,c)}addQuad(e){let t=this.minX,n=this.minY,i=this.maxX,o=this.maxY,s=e[0],a=e[1];t=s<t?s:t,n=a<n?a:n,i=s>i?s:i,o=a>o?a:o,s=e[2],a=e[3],t=s<t?s:t,n=a<n?a:n,i=s>i?s:i,o=a>o?a:o,s=e[4],a=e[5],t=s<t?s:t,n=a<n?a:n,i=s>i?s:i,o=a>o?a:o,s=e[6],a=e[7],t=s<t?s:t,n=a<n?a:n,i=s>i?s:i,o=a>o?a:o,this.minX=t,this.minY=n,this.maxX=i,this.maxY=o}addFrame(e,t,n,i,o){this.addFrameMatrix(e.worldTransform,t,n,i,o)}addFrameMatrix(e,t,n,i,o){let s=e.a,a=e.b,l=e.c,u=e.d,c=e.tx,h=e.ty,d=this.minX,f=this.minY,p=this.maxX,m=this.maxY,y=s*t+l*n+c,v=a*t+u*n+h;d=y<d?y:d,f=v<f?v:f,p=y>p?y:p,m=v>m?v:m,y=s*i+l*n+c,v=a*i+u*n+h,d=y<d?y:d,f=v<f?v:f,p=y>p?y:p,m=v>m?v:m,y=s*t+l*o+c,v=a*t+u*o+h,d=y<d?y:d,f=v<f?v:f,p=y>p?y:p,m=v>m?v:m,y=s*i+l*o+c,v=a*i+u*o+h,d=y<d?y:d,f=v<f?v:f,p=y>p?y:p,m=v>m?v:m,this.minX=d,this.minY=f,this.maxX=p,this.maxY=m}addVertexData(e,t,n){let i=this.minX,o=this.minY,s=this.maxX,a=this.maxY;for(let l=t;l<n;l+=2){let u=e[l],c=e[l+1];i=u<i?u:i,o=c<o?c:o,s=u>s?u:s,a=c>a?c:a}this.minX=i,this.minY=o,this.maxX=s,this.maxY=a}addVertices(e,t,n,i){this.addVerticesMatrix(e.worldTransform,t,n,i)}addVerticesMatrix(e,t,n,i,o=0,s=o){let a=e.a,l=e.b,u=e.c,c=e.d,h=e.tx,d=e.ty,f=this.minX,p=this.minY,m=this.maxX,y=this.maxY;for(let v=n;v<i;v+=2){let x=t[v],g=t[v+1],_=a*x+u*g+h,D=c*g+l*x+d;f=Math.min(f,_-o),m=Math.max(m,_+o),p=Math.min(p,D-s),y=Math.max(y,D+s)}this.minX=f,this.minY=p,this.maxX=m,this.maxY=y}addBounds(e){let t=this.minX,n=this.minY,i=this.maxX,o=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<n?e.minY:n,this.maxX=e.maxX>i?e.maxX:i,this.maxY=e.maxY>o?e.maxY:o}addBoundsMask(e,t){let n=e.minX>t.minX?e.minX:t.minX,i=e.minY>t.minY?e.minY:t.minY,o=e.maxX<t.maxX?e.maxX:t.maxX,s=e.maxY<t.maxY?e.maxY:t.maxY;if(n<=o&&i<=s){let a=this.minX,l=this.minY,u=this.maxX,c=this.maxY;this.minX=n<a?n:a,this.minY=i<l?i:l,this.maxX=o>u?o:u,this.maxY=s>c?s:c}}addBoundsMatrix(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,t){let n=e.minX>t.x?e.minX:t.x,i=e.minY>t.y?e.minY:t.y,o=e.maxX<t.x+t.width?e.maxX:t.x+t.width,s=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(n<=o&&i<=s){let a=this.minX,l=this.minY,u=this.maxX,c=this.maxY;this.minX=n<a?n:a,this.minY=i<l?i:l,this.maxX=o>u?o:u,this.maxY=s>c?s:c}}pad(e=0,t=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)}addFramePad(e,t,n,i,o,s){e-=o,t-=s,n+=o,i+=s,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>i?this.maxY:i}};var Ee=class r extends A.EventEmitter{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Wi,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new tn,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){let t=Object.keys(e);for(let n=0;n<t.length;++n){let i=t[n];Object.defineProperty(r.prototype,i,Object.getOwnPropertyDescriptor(e,i))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new W),t=this._boundsRect),this._bounds.getRectangle(t)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new W),e=this._localBoundsRect),this._localBounds||(this._localBounds=new tn);let t=this.transform,n=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=n?.worldAlpha??1,this.transform=this._tempDisplayObjectParent.transform;let i=this._bounds,o=this._boundsID;this._bounds=this._localBounds;let s=this.getBounds(!1,e);return this.parent=n,this.transform=t,this._bounds=i,this._bounds.updateID+=this._boundsID-o,s}toGlobal(e,t,n=!1){return n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)}toLocal(e,t,n,i){return t&&(e=t.toGlobal(e,n,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){this.parent?.removeChild(this)}setTransform(e=0,t=0,n=1,i=1,o=0,s=0,a=0,l=0,u=0){return this.position.x=e,this.position.y=t,this.scale.x=n||1,this.scale.y=i||1,this.rotation=o,this.skew.x=s,this.skew.y=a,this.pivot.x=l,this.pivot.y=u,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new td),this.tempDisplayObjectParent}enableTempParent(){let e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*Jg}set angle(e){this.transform.rotation=e*ey}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex!==e&&(this._zIndex=e,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){let t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount--,t._maskRefCount===0&&(t.renderable=!0,t.isMask=!1))}if(this._mask=e,this._mask){let t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount===0&&(t.renderable=!1,t.isMask=!0),t._maskRefCount++)}}}},td=class extends Ee{constructor(){super(...arguments),this.sortDirty=null}};Ee.prototype.displayObjectUpdateTransform=Ee.prototype.updateTransform;var cB=new le;function hB(r,e){return r.zIndex===e.zIndex?r._lastSortedIndex-e._lastSortedIndex:r.zIndex-e.zIndex}var yD=class Ty extends Ee{constructor(){super(),this.children=[],this.sortableChildren=Ty.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.addChild(e[t]);else{let t=e[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return e[0]}addChildAt(e,t){if(t<0||t>this.children.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}swapChildren(e,t){if(e===t)return;let n=this.getChildIndex(e),i=this.getChildIndex(t);this.children[n]=t,this.children[i]=e,this.onChildrenChange(n<i?n:i)}getChildIndex(e){let t=this.children.indexOf(e);if(t===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);let n=this.getChildIndex(e);A.removeItems(this.children,n,1),this.children.splice(t,0,e),this.onChildrenChange(t)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.removeChild(e[t]);else{let t=e[0],n=this.children.indexOf(t);if(n===-1)return null;t.parent=null,t.transform._parentID=-1,A.removeItems(this.children,n,1),this._boundsID++,this.onChildrenChange(n),t.emit("removed",this),this.emit("childRemoved",t,this,n)}return e[0]}removeChildAt(e){let t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,A.removeItems(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(e=0,t=this.children.length){let n=e,i=t,o=i-n,s;if(o>0&&o<=i){s=this.children.splice(n,o);for(let a=0;a<s.length;++a)s[a].parent=null,s[a].transform&&(s[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let a=0;a<s.length;++a)s[a].emit("removed",this),this.emit("childRemoved",s[a],this,a);return s}else if(o===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let t=0,n=this.children.length;t<n;++t){let i=this.children[t];i._lastSortedIndex=t,!e&&i.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(hB),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,t=this.children.length;e<t;++e){let n=this.children[e];n.visible&&n.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){let t=this.children[e];if(!(!t.visible||!t.renderable))if(t.calculateBounds(),t._mask){let n=t._mask.isMaskData?t._mask.maskObject:t._mask;n?(n.calculateBounds(),this._bounds.addBoundsMask(t._bounds,n._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,t=!1){let n=super.getLocalBounds(e);if(!t)for(let i=0,o=this.children.length;i<o;++i){let s=this.children[i];s.visible&&s.updateTransform()}return n}_calculateBounds(){}_renderWithCulling(e){let t=e.renderTexture.sourceFrame;if(!(t.width>0&&t.height>0))return;let n,i;this.cullArea?(n=this.cullArea,i=this.worldTransform):this._render!==Ty.prototype._render&&(n=this.getBounds(!0));let o=e.projection.transform;if(o&&(i?(i=cB.copyFrom(i),i.prepend(o)):i=o),n&&t.intersects(n,i))this._render(e);else if(this.cullArea)return;for(let s=0,a=this.children.length;s<a;++s){let l=this.children[s],u=l.cullable;l.cullable=u||!this.cullArea,l.render(e),l.cullable=u}}render(e){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters?.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let t=0,n=this.children.length;t<n;++t)this.children[t].render(e)}}renderAdvanced(e){let t=this.filters,n=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let o=0;o<t.length;o++)t[o].enabled&&this._enabledFilters.push(t[o])}let i=t&&this._enabledFilters?.length||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==Be.NONE));if(i&&e.batch.flush(),t&&this._enabledFilters?.length&&e.filter.push(this,this._enabledFilters),n&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let o=0,s=this.children.length;o<s;++o)this.children[o].render(e)}i&&e.batch.flush(),n&&e.mask.pop(this),t&&this._enabledFilters?.length&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;let t=typeof e=="boolean"?e:e?.children,n=this.removeChildren(0,this.children.length);if(t)for(let i=0;i<n.length;++i)n[i].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){let t=this.getLocalBounds().width;t!==0?this.scale.x=e/t:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){let t=this.getLocalBounds().height;t!==0?this.scale.y=e/t:this.scale.y=1,this._height=e}};yD.defaultSortableChildren=!1;var Ve=yD;Ve.prototype.containerUpdateTransform=Ve.prototype.updateTransform;Object.defineProperties(b,{SORTABLE_CHILDREN:{get(){return Ve.defaultSortableChildren},set(r){A.deprecation("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Ve.defaultSortableChildren=r}}});var Yl=new Z,dB=new Uint16Array([0,1,2,0,2,3]),rr=class r extends Ve{constructor(e){super(),this._anchor=new er(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new te(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=Y.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||q.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=dB,this.pluginName="batch",this.isSprite=!0,this._roundPixels=b.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=A.sign(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=A.sign(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){let e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;let t=this.transform.worldTransform,n=t.a,i=t.b,o=t.c,s=t.d,a=t.tx,l=t.ty,u=this.vertexData,c=e.trim,h=e.orig,d=this._anchor,f=0,p=0,m=0,y=0;if(c?(p=c.x-d._x*h.width,f=p+c.width,y=c.y-d._y*h.height,m=y+c.height):(p=-d._x*h.width,f=p+h.width,y=-d._y*h.height,m=y+h.height),u[0]=n*p+o*y+a,u[1]=s*y+i*p+l,u[2]=n*f+o*y+a,u[3]=s*y+i*f+l,u[4]=n*f+o*m+a,u[5]=s*m+i*f+l,u[6]=n*p+o*m+a,u[7]=s*m+i*p+l,this._roundPixels){let v=b.RESOLUTION;for(let x=0;x<u.length;++x)u[x]=Math.round(u[x]*v)/v}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;let e=this._texture,t=this.vertexTrimmedData,n=e.orig,i=this._anchor,o=this.transform.worldTransform,s=o.a,a=o.b,l=o.c,u=o.d,c=o.tx,h=o.ty,d=-i._x*n.width,f=d+n.width,p=-i._y*n.height,m=p+n.height;if(t[0]=s*d+l*p+c,t[1]=u*p+a*d+h,t[2]=s*f+l*p+c,t[3]=u*p+a*f+h,t[4]=s*f+l*m+c,t[5]=u*m+a*f+h,t[6]=s*d+l*m+c,t[7]=u*m+a*d+h,this._roundPixels){let y=b.RESOLUTION;for(let v=0;v<t.length;++v)t[v]=Math.round(t[v]*y)/y}}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){let e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return this.children.length===0?(this._localBounds||(this._localBounds=new tn),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new W),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,Yl);let t=this._texture.orig.width,n=this._texture.orig.height,i=-t*this.anchor.x,o=0;return Yl.x>=i&&Yl.x<i+t&&(o=-n*this.anchor.y,Yl.y>=o&&Yl.y<o+n)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof e=="boolean"?e:e?.texture){let t=typeof e=="boolean"?e:e?.baseTexture;this._texture.destroy(!!t)}this._texture=null}static from(e,t){let n=e instanceof q?e:q.from(e,t);return new r(n)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){let t=A.sign(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){let t=A.sign(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||q.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}};var vD=new le;Ee.prototype._cacheAsBitmap=!1;Ee.prototype._cacheData=null;Ee.prototype._cacheAsBitmapResolution=null;Ee.prototype._cacheAsBitmapMultisample=null;var Cy=class{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}};Object.defineProperties(Ee.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(r){r!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(r){r!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=r,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(r){if(this._cacheAsBitmap===r)return;this._cacheAsBitmap=r;let e;r?(this._cacheData||(this._cacheData=new Cy),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}});Ee.prototype._renderCached=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(r),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(r))};Ee.prototype._initCachedDisplayObject=function(r){if(this._cacheData?.sprite)return;let e=this.alpha;this.alpha=1,r.batch.flush();let t=this.getLocalBounds(new W,!0);if(this.filters?.length){let d=this.filters[0].padding;t.pad(d)}let n=this.cacheAsBitmapResolution||r.resolution;t.ceil(n),t.width=Math.max(t.width,1/n),t.height=Math.max(t.height,1/n);let i=r.renderTexture.current,o=r.renderTexture.sourceFrame.clone(),s=r.renderTexture.destinationFrame.clone(),a=r.projection.transform,l=fr.create({width:t.width,height:t.height,resolution:n,multisample:this.cacheAsBitmapMultisample??r.multisample}),u=`cacheAsBitmap_${A.uid()}`;this._cacheData.textureCacheId=u,G.addToCache(l.baseTexture,u),q.addToCache(l,u);let c=this.transform.localTransform.copyTo(vD).invert().translate(-t.x,-t.y);this.render=this._cacheData.originalRender,r.render(this,{renderTexture:l,clear:!0,transform:c,skipUpdateTransform:!1}),r.framebuffer.blit(),r.projection.transform=a,r.renderTexture.bind(i,o,s),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;let h=new rr(l);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-(t.x/t.width),h.anchor.y=-(t.y/t.height),h.alpha=e,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=h.containsPoint.bind(h)};Ee.prototype._renderCachedCanvas=function(r){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(r),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(r))};Ee.prototype._initCachedDisplayObjectCanvas=function(r){if(this._cacheData?.sprite)return;let e=this.getLocalBounds(new W,!0),t=this.alpha;this.alpha=1;let n=r.canvasContext.activeContext,i=r._projTransform,o=this.cacheAsBitmapResolution||r.resolution;e.ceil(o),e.width=Math.max(e.width,1/o),e.height=Math.max(e.height,1/o);let s=fr.create({width:e.width,height:e.height,resolution:o}),a=`cacheAsBitmap_${A.uid()}`;this._cacheData.textureCacheId=a,G.addToCache(s.baseTexture,a),q.addToCache(s,a);let l=vD;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=e.x,l.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,r.render(this,{renderTexture:s,clear:!0,transform:l,skipUpdateTransform:!1}),r.canvasContext.activeContext=n,r._projTransform=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;let u=new rr(s);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(e.x/e.width),u.anchor.y=-(e.y/e.height),u.alpha=t,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=r._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)};Ee.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};Ee.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};Ee.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,G.removeFromCache(this._cacheData.textureCacheId),q.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};Ee.prototype._cacheAsBitmapDestroy=function(r){this.cacheAsBitmap=!1,this.destroy(r)};Ee.prototype.name=null;Ve.prototype.getChildByName=function(r,e){for(let t=0,n=this.children.length;t<n;t++)if(this.children[t].name===r)return this.children[t];if(e)for(let t=0,n=this.children.length;t<n;t++){let i=this.children[t];if(!i.getChildByName)continue;let o=i.getChildByName(r,!0);if(o)return o}return null};Ee.prototype.getGlobalPosition=function(r=new Z,e=!1){return this.parent?this.parent.toGlobal(this.position,r,e):(r.x=this.position.x,r.y=this.position.y),r};var _D=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;var Zl=class extends Ie{constructor(e=1){super(vy,_D,{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}};var fB={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},pB=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function xD(r){let e=fB[r],t=e.length,n=pB,i="",o="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",s;for(let a=0;a<r;a++){let l=o.replace("%index%",a.toString());s=a,a>=t&&(s=r-a-1),l=l.replace("%value%",e[s].toString()),i+=l,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",r.toString()),n}var mB=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function ED(r,e){let t=Math.ceil(r/2),n=mB,i="",o;e?o="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":o="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let s=0;s<r;s++){let a=o.replace("%index%",s.toString());a=a.replace("%sampleIndex%",`${s-(t-1)}.0`),i+=a,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",r.toString()),n}var ii=class extends Ie{constructor(e,t=8,n=4,i=Ie.defaultResolution,o=5){let s=ED(o,e),a=xD(o);super(s,a),this.horizontal=e,this.resolution=i,this._quality=0,this.quality=n,this.blur=t}apply(e,t,n,i){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/t.width):this.uniforms.strength=1/n.height*(n.height/t.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/t.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/t.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,t,n,i);else{let o=e.getFilterTexture(),s=e.renderer,a=t,l=o;this.state.blend=!1,e.applyFilter(this,a,l,Kt.CLEAR);for(let u=1;u<this.passes-1;u++){e.bindAndClear(a,Kt.BLIT),this.uniforms.uSampler=l;let c=l;l=a,a=c,s.shader.bind(this),s.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,l,n,i),e.returnFilterTexture(o)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}};var Kl=class extends Ie{constructor(e=8,t=4,n=Ie.defaultResolution,i=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new ii(!0,e,t,n,i),this.blurYFilter=new ii(!1,e,t,n,i),this.resolution=n,this.quality=t,this.blur=e,this.repeatEdgePixels=!1}apply(e,t,n,i){let o=Math.abs(this.blurXFilter.strength),s=Math.abs(this.blurYFilter.strength);if(o&&s){let a=e.getFilterTexture();this.blurXFilter.apply(e,t,a,Kt.CLEAR),this.blurYFilter.apply(e,a,n,i),e.returnFilterTexture(a)}else s?this.blurYFilter.apply(e,t,n,i):this.blurXFilter.apply(e,t,n,i)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}};var bD=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;var Ji=class extends Ie{constructor(){let e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(jl,bD,e),this.alpha=1}_loadMatrix(e,t=!1){let n=e;t&&(this._multiply(n,this.uniforms.m,e),n=this._colorMatrix(n)),this.uniforms.m=n}_multiply(e,t,n){return e[0]=t[0]*n[0]+t[1]*n[5]+t[2]*n[10]+t[3]*n[15],e[1]=t[0]*n[1]+t[1]*n[6]+t[2]*n[11]+t[3]*n[16],e[2]=t[0]*n[2]+t[1]*n[7]+t[2]*n[12]+t[3]*n[17],e[3]=t[0]*n[3]+t[1]*n[8]+t[2]*n[13]+t[3]*n[18],e[4]=t[0]*n[4]+t[1]*n[9]+t[2]*n[14]+t[3]*n[19]+t[4],e[5]=t[5]*n[0]+t[6]*n[5]+t[7]*n[10]+t[8]*n[15],e[6]=t[5]*n[1]+t[6]*n[6]+t[7]*n[11]+t[8]*n[16],e[7]=t[5]*n[2]+t[6]*n[7]+t[7]*n[12]+t[8]*n[17],e[8]=t[5]*n[3]+t[6]*n[8]+t[7]*n[13]+t[8]*n[18],e[9]=t[5]*n[4]+t[6]*n[9]+t[7]*n[14]+t[8]*n[19]+t[9],e[10]=t[10]*n[0]+t[11]*n[5]+t[12]*n[10]+t[13]*n[15],e[11]=t[10]*n[1]+t[11]*n[6]+t[12]*n[11]+t[13]*n[16],e[12]=t[10]*n[2]+t[11]*n[7]+t[12]*n[12]+t[13]*n[17],e[13]=t[10]*n[3]+t[11]*n[8]+t[12]*n[13]+t[13]*n[18],e[14]=t[10]*n[4]+t[11]*n[9]+t[12]*n[14]+t[13]*n[19]+t[14],e[15]=t[15]*n[0]+t[16]*n[5]+t[17]*n[10]+t[18]*n[15],e[16]=t[15]*n[1]+t[16]*n[6]+t[17]*n[11]+t[18]*n[16],e[17]=t[15]*n[2]+t[16]*n[7]+t[17]*n[12]+t[18]*n[17],e[18]=t[15]*n[3]+t[16]*n[8]+t[17]*n[13]+t[18]*n[18],e[19]=t[15]*n[4]+t[16]*n[9]+t[17]*n[14]+t[18]*n[19]+t[19],e}_colorMatrix(e){let t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t}brightness(e,t){let n=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(n,t)}tint(e,t){let[n,i,o]=te.shared.setValue(e).toArray(),s=[n,0,0,0,0,0,i,0,0,0,0,0,o,0,0,0,0,0,1,0];this._loadMatrix(s,t)}greyscale(e,t){let n=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(n,t)}blackAndWhite(e){let t=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(t,e)}hue(e,t){e=(e||0)/180*Math.PI;let n=Math.cos(e),i=Math.sin(e),o=Math.sqrt,s=1/3,a=o(s),l=n+(1-n)*s,u=s*(1-n)-a*i,c=s*(1-n)+a*i,h=s*(1-n)+a*i,d=n+s*(1-n),f=s*(1-n)-a*i,p=s*(1-n)-a*i,m=s*(1-n)+a*i,y=n+s*(1-n),v=[l,u,c,0,0,h,d,f,0,0,p,m,y,0,0,0,0,0,1,0];this._loadMatrix(v,t)}contrast(e,t){let n=(e||0)+1,i=-.5*(n-1),o=[n,0,0,0,i,0,n,0,0,i,0,0,n,0,i,0,0,0,1,0];this._loadMatrix(o,t)}saturate(e=0,t){let n=e*2/3+1,i=(n-1)*-.5,o=[n,i,i,0,0,i,n,i,0,0,i,i,n,0,0,0,0,0,1,0];this._loadMatrix(o,t)}desaturate(){this.saturate(-1)}negative(e){let t=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(t,e)}sepia(e){let t=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(t,e)}technicolor(e){let t=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(t,e)}polaroid(e){let t=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(t,e)}toBGR(e){let t=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(t,e)}kodachrome(e){let t=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(t,e)}browni(e){let t=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(t,e)}vintage(e){let t=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(t,e)}colorTone(e,t,n,i,o){e=e||.2,t=t||.15,n=n||16770432,i=i||3375104;let s=te.shared,[a,l,u]=s.setValue(n).toArray(),[c,h,d]=s.setValue(i).toArray(),f=[.3,.59,.11,0,0,a,l,u,e,0,c,h,d,t,0,a-c,l-h,u-d,0,0];this._loadMatrix(f,o)}night(e,t){e=e||.1;let n=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(n,t)}predator(e,t){let n=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(n,t)}lsd(e){let t=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(t,e)}reset(){let e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}};Ji.prototype.grayscale=Ji.prototype.greyscale;var wD=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`;var TD=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;var Ql=class extends Ie{constructor(e,t){let n=new le;e.renderable=!1,super(TD,wD,{mapSampler:e._texture,filterMatrix:n,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=n,t==null&&(t=20),this.scale=new Z(t,t)}apply(e,t,n,i){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;let o=this.maskSprite.worldTransform,s=Math.sqrt(o.a*o.a+o.b*o.b),a=Math.sqrt(o.c*o.c+o.d*o.d);s!==0&&a!==0&&(this.uniforms.rotation[0]=o.a/s,this.uniforms.rotation[1]=o.b/s,this.uniforms.rotation[2]=o.c/a,this.uniforms.rotation[3]=o.d/a),e.applyFilter(this,t,n,i)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}};var CD=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`;var DD=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;var Jl=class extends Ie{constructor(){super(DD,CD)}};var SD=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;var eu=class extends Ie{constructor(e=.5,t=Math.random()){super(jl,SD,{uNoise:0,uSeed:0}),this.noise=e,this.seed=t}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}};var Dy={AlphaFilter:Zl,BlurFilter:Kl,BlurFilterPass:ii,ColorMatrixFilter:Ji,DisplacementFilter:Ql,FXAAFilter:Jl,NoiseFilter:eu};Object.entries(Dy).forEach(([r,e])=>{Object.defineProperty(Dy,r,{get(){return A.deprecation("7.1.0",`filters.${r} has moved to ${r}`),e}})});var Sy=class{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this.tickerAdded||!this.domElement||(Pe.system.add(this.tickerUpdate,this,Ut.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(Pe.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}let e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}tickerUpdate(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}},rn=new Sy;var In=class r{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=r.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Z,this.page=new Z,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,t,n){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,t,n,i,o){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}};var nn=class extends In{constructor(){super(...arguments),this.client=new Z,this.movement=new Z,this.offset=new Z,this.global=new Z,this.screen=new Z}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,t,n){return e.worldTransform.applyInverse(n||this.global,t)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,t,n,i,o,s,a,l,u,c,h,d,f,p,m){throw new Error("Method not implemented.")}};var Et=class extends nn{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}};var Nr=class extends nn{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}};Nr.DOM_DELTA_PIXEL=0,Nr.DOM_DELTA_LINE=1,Nr.DOM_DELTA_PAGE=2;var gB=2048,yB=new Z,Iy=new Z,tu=class{constructor(e){this.dispatch=new A.EventEmitter,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort((n,i)=>n.priority-i.priority)}dispatchEvent(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}mapEvent(e){if(!this.rootTarget)return;let t=this.mappingTable[e.type];if(t)for(let n=0,i=t.length;n<i;n++)t[n].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,t){rn.pauseUpdate=!0;let n=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",i=this[n](this.rootTarget,this.rootTarget.eventMode,yB.set(e,t),this.hitTestFn,this.hitPruneFn);return i&&i[0]}propagate(e,t){if(!e.target)return;let n=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let i=0,o=n.length-1;i<o;i++)if(e.currentTarget=n[i],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let i=n.length-2;i>=0;i--)if(e.currentTarget=n[i],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,t,n=this._allInteractiveElements){if(n.length===0)return;e.eventPhase=e.BUBBLING_PHASE;let i=Array.isArray(t)?t:[t];for(let o=n.length-1;o>=0;o--)i.forEach(s=>{e.currentTarget=n[o],this.notifyTarget(e,s)})}propagationPath(e){let t=[e];for(let n=0;n<gB&&e!==this.rootTarget;n++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent}return t.reverse(),t}hitTestMoveRecursive(e,t,n,i,o,s=!1){let a=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(rn.pauseUpdate=!1),e.interactiveChildren&&e.children){let c=e.children;for(let h=c.length-1;h>=0;h--){let d=c[h],f=this.hitTestMoveRecursive(d,this._isInteractive(t)?t:d.eventMode,n,i,o,s||o(e,n));if(f){if(f.length>0&&!f[f.length-1].parent)continue;let p=e.isInteractive();(f.length>0||p)&&(p&&this._allInteractiveElements.push(e),f.push(e)),this._hitElements.length===0&&(this._hitElements=f),a=!0}}}let l=this._isInteractive(t),u=e.isInteractive();return l&&u&&this._allInteractiveElements.push(e),s||this._hitElements.length>0?null:a?this._hitElements:l&&!o(e,n)&&i(e,n)?u?[e]:[]:null}hitTestRecursive(e,t,n,i,o){if(this._interactivePrune(e)||o(e,n))return null;if((e.eventMode==="dynamic"||t==="dynamic")&&(rn.pauseUpdate=!1),e.interactiveChildren&&e.children){let l=e.children;for(let u=l.length-1;u>=0;u--){let c=l[u],h=this.hitTestRecursive(c,this._isInteractive(t)?t:c.eventMode,n,i,o);if(h){if(h.length>0&&!h[h.length-1].parent)continue;let d=e.isInteractive();return(h.length>0||d)&&h.push(e),h}}}let s=this._isInteractive(t),a=e.isInteractive();return s&&i(e,n)?a?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!!(!e||e.isMask||!e.visible||!e.renderable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren||e.isMask)}hitPruneFn(e,t){if(e.hitArea&&(e.worldTransform.applyInverse(t,Iy),!e.hitArea.contains(Iy.x,Iy.y)))return!0;if(e._mask){let n=e._mask.isMaskData?e._mask.maskObject:e._mask;if(n&&!n.containsPoint?.(t))return!0}return!1}hitTestFn(e,t){return e.eventMode==="passive"?!1:e.hitArea?!0:e.containsPoint?e.containsPoint(t):!1}notifyTarget(e,t){t=t??e.type;let n=`on${t}`;e.currentTarget[n]?.(e);let i=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${t}capture`:t;this.notifyListeners(e,i),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,t)}mapPointerDown(e){if(!(e instanceof Et)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}let t=this.createPointerEvent(e);if(this.dispatchEvent(t,"pointerdown"),t.pointerType==="touch")this.dispatchEvent(t,"touchstart");else if(t.pointerType==="mouse"||t.pointerType==="pen"){let i=t.button===2;this.dispatchEvent(t,i?"rightdown":"mousedown")}let n=this.trackingData(e.pointerId);n.pressTargetsByButton[e.button]=t.composedPath(),this.freeEvent(t)}mapPointerMove(e){if(!(e instanceof Et)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;let t=this.createPointerEvent(e);this._isPointerMoveEvent=!1;let n=t.pointerType==="mouse"||t.pointerType==="pen",i=this.trackingData(e.pointerId),o=this.findMountedTarget(i.overTargets);if(i.overTargets?.length>0&&o!==t.target){let l=e.type==="mousemove"?"mouseout":"pointerout",u=this.createPointerEvent(e,l,o);if(this.dispatchEvent(u,"pointerout"),n&&this.dispatchEvent(u,"mouseout"),!t.composedPath().includes(o)){let c=this.createPointerEvent(e,"pointerleave",o);for(c.eventPhase=c.AT_TARGET;c.target&&!t.composedPath().includes(c.target);)c.currentTarget=c.target,this.notifyTarget(c),n&&this.notifyTarget(c,"mouseleave"),c.target=c.target.parent;this.freeEvent(c)}this.freeEvent(u)}if(o!==t.target){let l=e.type==="mousemove"?"mouseover":"pointerover",u=this.clonePointerEvent(t,l);this.dispatchEvent(u,"pointerover"),n&&this.dispatchEvent(u,"mouseover");let c=o?.parent;for(;c&&c!==this.rootTarget.parent&&c!==t.target;)c=c.parent;if(!c||c===this.rootTarget.parent){let h=this.clonePointerEvent(t,"pointerenter");for(h.eventPhase=h.AT_TARGET;h.target&&h.target!==o&&h.target!==this.rootTarget.parent;)h.currentTarget=h.target,this.notifyTarget(h),n&&this.notifyTarget(h,"mouseenter"),h.target=h.target.parent;this.freeEvent(h)}this.freeEvent(u)}let s=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?s.push("pointermove"):this.dispatchEvent(t,"pointermove"),a&&s.push("globalpointermove"),t.pointerType==="touch"&&(this.moveOnAll?s.splice(1,0,"touchmove"):this.dispatchEvent(t,"touchmove"),a&&s.push("globaltouchmove")),n&&(this.moveOnAll?s.splice(1,0,"mousemove"):this.dispatchEvent(t,"mousemove"),a&&s.push("globalmousemove"),this.cursor=t.target?.cursor),s.length>0&&this.all(t,s),this._allInteractiveElements.length=0,this._hitElements.length=0,i.overTargets=t.composedPath(),this.freeEvent(t)}mapPointerOver(e){if(!(e instanceof Et)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}let t=this.trackingData(e.pointerId),n=this.createPointerEvent(e),i=n.pointerType==="mouse"||n.pointerType==="pen";this.dispatchEvent(n,"pointerover"),i&&this.dispatchEvent(n,"mouseover"),n.pointerType==="mouse"&&(this.cursor=n.target?.cursor);let o=this.clonePointerEvent(n,"pointerenter");for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),i&&this.notifyTarget(o,"mouseenter"),o.target=o.target.parent;t.overTargets=n.composedPath(),this.freeEvent(n),this.freeEvent(o)}mapPointerOut(e){if(!(e instanceof Et)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}let t=this.trackingData(e.pointerId);if(t.overTargets){let n=e.pointerType==="mouse"||e.pointerType==="pen",i=this.findMountedTarget(t.overTargets),o=this.createPointerEvent(e,"pointerout",i);this.dispatchEvent(o),n&&this.dispatchEvent(o,"mouseout");let s=this.createPointerEvent(e,"pointerleave",i);for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),n&&this.notifyTarget(s,"mouseleave"),s.target=s.target.parent;t.overTargets=null,this.freeEvent(o),this.freeEvent(s)}this.cursor=null}mapPointerUp(e){if(!(e instanceof Et)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}let t=performance.now(),n=this.createPointerEvent(e);if(this.dispatchEvent(n,"pointerup"),n.pointerType==="touch")this.dispatchEvent(n,"touchend");else if(n.pointerType==="mouse"||n.pointerType==="pen"){let a=n.button===2;this.dispatchEvent(n,a?"rightup":"mouseup")}let i=this.trackingData(e.pointerId),o=this.findMountedTarget(i.pressTargetsByButton[e.button]),s=o;if(o&&!n.composedPath().includes(o)){let a=o;for(;a&&!n.composedPath().includes(a);){if(n.currentTarget=a,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch")this.notifyTarget(n,"touchendoutside");else if(n.pointerType==="mouse"||n.pointerType==="pen"){let l=n.button===2;this.notifyTarget(n,l?"rightupoutside":"mouseupoutside")}a=a.parent}delete i.pressTargetsByButton[e.button],s=a}if(s){let a=this.clonePointerEvent(n,"click");a.target=s,a.path=null,i.clicksByButton[e.button]||(i.clicksByButton[e.button]={clickCount:0,target:a.target,timeStamp:t});let l=i.clicksByButton[e.button];if(l.target===a.target&&t-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=t,a.detail=l.clickCount,a.pointerType==="mouse"){let u=a.button===2;this.dispatchEvent(a,u?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(n)}mapPointerUpOutside(e){if(!(e instanceof Et)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}let t=this.trackingData(e.pointerId),n=this.findMountedTarget(t.pressTargetsByButton[e.button]),i=this.createPointerEvent(e);if(n){let o=n;for(;o;)i.currentTarget=o,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch"?this.notifyTarget(i,"touchendoutside"):(i.pointerType==="mouse"||i.pointerType==="pen")&&this.notifyTarget(i,i.button===2?"rightupoutside":"mouseupoutside"),o=o.parent;delete t.pressTargetsByButton[e.button]}this.freeEvent(i)}mapWheel(e){if(!(e instanceof Nr)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}let t=this.createWheelEvent(e);this.dispatchEvent(t),this.freeEvent(t)}findMountedTarget(e){if(!e)return null;let t=e[0];for(let n=1;n<e.length&&e[n].parent===t;n++)t=e[n];return t}createPointerEvent(e,t,n){let i=this.allocateEvent(Et);return this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e,i.target=n??this.hitTest(i.global.x,i.global.y)??this._hitElements[0],typeof t=="string"&&(i.type=t),i}createWheelEvent(e){let t=this.allocateEvent(Nr);return this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e,t.target=this.hitTest(t.global.x,t.global.y),t}clonePointerEvent(e,t){let n=this.allocateEvent(Et);return n.nativeEvent=e.nativeEvent,n.originalEvent=e.originalEvent,this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.target=e.target,n.path=e.composedPath().slice(),n.type=t??n.type,n}copyWheelData(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}copyPointerData(e,t){e instanceof Et&&t instanceof Et&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}copyMouseData(e,t){e instanceof nn&&t instanceof nn&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.copyFrom(e.client),t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.copyFrom(e.movement),t.screen.copyFrom(e.screen),t.shiftKey=e.shiftKey,t.global.copyFrom(e.global))}copyData(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.copyFrom(e.layer),t.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);let t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=null,t.target=null,t}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");let t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}notifyListeners(e,t){let n=e.currentTarget._events[t];if(n&&e.currentTarget.isInteractive())if("fn"in n)n.once&&e.currentTarget.removeListener(t,n.fn,void 0,!0),n.fn.call(n.context,e);else for(let i=0,o=n.length;i<o&&!e.propagationImmediatelyStopped;i++)n[i].once&&e.currentTarget.removeListener(t,n[i].fn,void 0,!0),n[i].fn.call(n[i].context,e)}};var vB=1,_B={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Ay=class My{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new tu(null),rn.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Et(null),this.rootWheelEvent=new Nr(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy(S({},My.defaultEventFeatures),{set:(t,n,i)=>(n==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=i),t[n]=i,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){let{view:t,resolution:n}=this.renderer;this.setTargetElement(t),this.resolution=n,My._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this.currentCursor===e)return;this.currentCursor=e;let n=this.cursorStyles[e];if(n)switch(typeof n){case"string":t&&(this.domElement.style.cursor=n);break;case"function":n(e);break;case"object":t&&Object.assign(this.domElement.style,n);break}else t&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let n=0,i=t.length;n<i;n++){let o=t[n],s=this.bootstrapEvent(this.rootPointerEvent,o);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,rn.pointerMoved();let t=this.normalizeToPointerData(e);for(let n=0,i=t.length;n<i;n++){let o=this.bootstrapEvent(this.rootPointerEvent,t[n]);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);let n=t!==this.domElement?"outside":"",i=this.normalizeToPointerData(e);for(let o=0,s=i.length;o<s;o++){let a=this.bootstrapEvent(this.rootPointerEvent,i[o]);a.type+=n,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let t=this.normalizeToPointerData(e);for(let n=0,i=t.length;n<i;n++){let o=this.bootstrapEvent(this.rootPointerEvent,t[n]);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;let t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this.removeEvents(),this.domElement=e,rn.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;rn.addTickerListener();let e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;rn.removeTickerListener();let e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,t,n){let i=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},o=1/this.resolution;e.x=(t-i.left)*(this.domElement.width/i.width)*o,e.y=(n-i.top)*(this.domElement.height/i.height)*o}normalizeToPointerData(e){let t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let n=0,i=e.changedTouches.length;n<i;n++){let o=e.changedTouches[n];typeof o.button>"u"&&(o.button=0),typeof o.buttons>"u"&&(o.buttons=1),typeof o.isPrimary>"u"&&(o.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof o.width>"u"&&(o.width=o.radiusX||1),typeof o.height>"u"&&(o.height=o.radiusY||1),typeof o.tiltX>"u"&&(o.tiltX=0),typeof o.tiltY>"u"&&(o.tiltY=0),typeof o.pointerType>"u"&&(o.pointerType="touch"),typeof o.pointerId>"u"&&(o.pointerId=o.identifier||0),typeof o.pressure>"u"&&(o.pressure=o.force||.5),typeof o.twist>"u"&&(o.twist=0),typeof o.tangentialPressure>"u"&&(o.tangentialPressure=0),typeof o.layerX>"u"&&(o.layerX=o.offsetX=o.clientX),typeof o.layerY>"u"&&(o.layerY=o.offsetY=o.clientY),o.isNormalized=!0,o.type=e.type,t.push(o)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){let n=e;typeof n.isPrimary>"u"&&(n.isPrimary=!0),typeof n.width>"u"&&(n.width=1),typeof n.height>"u"&&(n.height=1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="mouse"),typeof n.pointerId>"u"&&(n.pointerId=vB),typeof n.pressure>"u"&&(n.pressure=.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),n.isNormalized=!0,t.push(n)}else t.push(e);return t}normalizeWheelEvent(e){let t=this.rootWheelEvent;return this.transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=_B[e.type]||e.type),e}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};Ay.extension={name:"events",type:[E.RendererSystem,E.CanvasRendererSystem]},Ay.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};var ru=Ay;w.add(ru);function ID(r){return r==="dynamic"||r==="static"}var AD={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??ID(ru.defaultEventMode)},set interactive(r){A.deprecation("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=r,this.eventMode=r?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??ru.defaultEventMode},set eventMode(r){this._internalInteractive=ID(r),this._internalEventMode=r},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(r,e,t){let n=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,i=typeof t=="object"?t.signal:void 0,o=typeof t=="object"?t.once===!0:!1,s=typeof e=="function"?void 0:e;r=n?`${r}capture`:r;let a=typeof e=="function"?e:e.handleEvent,l=this;i&&i.addEventListener("abort",()=>{l.off(r,a,s)}),o?l.once(r,a,s):l.on(r,a,s)},removeEventListener(r,e,t){let n=typeof t=="boolean"&&t||typeof t=="object"&&t.capture,i=typeof e=="function"?void 0:e;r=n?`${r}capture`:r,e=typeof e=="function"?e:e.handleEvent,this.off(r,e,i)},dispatchEvent(r){if(!(r instanceof In))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return r.defaultPrevented=!1,r.path=null,r.target=this,r.manager.dispatchEvent(r),!r.defaultPrevented}};Ee.mixin(AD);var Ry={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Ee.mixin(Ry);var xB=9,rd=100,EB=0,bB=0,MD=2,RD=1,wB=-1e3,TB=-1e3,CB=2,nu=class{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(A.isMobile.tablet||A.isMobile.phone)&&this.createTouchHook();let t=document.createElement("div");t.style.width=`${rd}px`,t.style.height=`${rd}px`,t.style.position="absolute",t.style.top=`${EB}px`,t.style.left=`${bB}px`,t.style.zIndex=MD.toString(),this.div=t,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){let e=document.createElement("button");e.style.width=`${RD}px`,e.style.height=`${RD}px`,e.style.position="absolute",e.style.top=`${wB}px`,e.style.left=`${TB}px`,e.style.zIndex=CB.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode?.appendChild(this.div))}deactivate(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode?.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);let t=e.children;if(t)for(let n=0;n<t.length;n++)this.updateAccessibleObjects(t[n])}update(){let e=performance.now();if(A.isMobile.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);let{x:t,y:n,width:i,height:o}=this.renderer.view.getBoundingClientRect(),{width:s,height:a,resolution:l}=this.renderer,u=i/s*l,c=o/a*l,h=this.div;h.style.left=`${t}px`,h.style.top=`${n}px`,h.style.width=`${s}px`,h.style.height=`${a}px`;for(let d=0;d<this.children.length;d++){let f=this.children[d];if(f.renderId!==this.renderId)f._accessibleActive=!1,A.removeItems(this.children,d,1),this.div.removeChild(f._accessibleDiv),this.pool.push(f._accessibleDiv),f._accessibleDiv=null,d--;else{h=f._accessibleDiv;let p=f.hitArea,m=f.worldTransform;f.hitArea?(h.style.left=`${(m.tx+p.x*m.a)*u}px`,h.style.top=`${(m.ty+p.y*m.d)*c}px`,h.style.width=`${p.width*m.a*u}px`,h.style.height=`${p.height*m.d*c}px`):(p=f.getBounds(),this.capHitArea(p),h.style.left=`${p.x*u}px`,h.style.top=`${p.y*c}px`,h.style.width=`${p.width*u}px`,h.style.height=`${p.height*c}px`,h.title!==f.accessibleTitle&&f.accessibleTitle!==null&&(h.title=f.accessibleTitle),h.getAttribute("aria-label")!==f.accessibleHint&&f.accessibleHint!==null&&h.setAttribute("aria-label",f.accessibleHint)),(f.accessibleTitle!==h.title||f.tabIndex!==h.tabIndex)&&(h.title=f.accessibleTitle,h.tabIndex=f.tabIndex,this.debug&&this.updateDebugHTML(h))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);let{width:t,height:n}=this.renderer;e.x+e.width>t&&(e.width=t-e.x),e.y+e.height>n&&(e.height=n-e.y)}addChild(e){let t=this.pool.pop();t||(t=document.createElement("button"),t.style.width=`${rd}px`,t.style.height=`${rd}px`,t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=MD.toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?t.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(t.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,t){let{displayObject:n}=e.target,i=this.renderer.events.rootBoundary,o=Object.assign(new In(i),{target:n});i.rootTarget=this.renderer.lastObjectRendered,t.forEach(s=>i.dispatchEvent(o,s))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode===xB&&this.activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}};nu.extension={name:"accessibility",type:[E.RendererPlugin,E.CanvasRendererPlugin]};w.add(nu);var PD=class Py{constructor(e){this.stage=new Ve,e=Object.assign({forceCanvas:!1},e),this.renderer=yy(e),Py._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer?.view}get screen(){return this.renderer?.screen}destroy(e,t){let n=Py._plugins.slice(0);n.reverse(),n.forEach(i=>{i.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};PD._plugins=[];var nd=PD;w.handleByList(E.Application,nd._plugins);var iu=class{static init(e){Object.defineProperty(this,"resizeTo",{set(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let t,n;if(this._resizeTo===globalThis.window)t=globalThis.innerWidth,n=globalThis.innerHeight;else{let{clientWidth:i,clientHeight:o}=this._resizeTo;t=i,n=o}this.renderer.resize(t,n),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}};iu.extension=E.Application;w.add(iu);var ND={loader:E.LoadParser,resolver:E.ResolveParser,cache:E.CacheParser,detection:E.DetectionParser};w.handle(E.Asset,r=>{let e=r.ref;Object.entries(ND).filter(([t])=>!!e[t]).forEach(([t,n])=>w.add(Object.assign(e[t],{extension:e[t].extension??n})))},r=>{let e=r.ref;Object.keys(ND).filter(t=>!!e[t]).forEach(t=>w.remove(e[t]))});var id=class{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}_next(){return I(this,null,function*(){if(this._assetList.length&&this._isActive){this._isLoading=!0;let e=[],t=Math.min(this._assetList.length,this._maxConcurrent);for(let n=0;n<t;n++)e.push(this._assetList.pop());yield this._loader.load(e),this._isLoading=!1,this._next()}})}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}};function jt(r,e){if(Array.isArray(e)){for(let t of e)if(r.startsWith(`data:${t}`))return!0;return!1}return r.startsWith(`data:${e}`)}function at(r,e){let t=r.split("?")[0],n=A.path.extname(t).toLowerCase();return Array.isArray(e)?e.includes(n):n===e}var mt=(r,e,t=!1)=>(Array.isArray(r)||(r=[r]),e?r.map(n=>typeof n=="string"||t?e(n):n):r);var eo=(r,e)=>{let t=e.split("?")[1];return t&&(r+=`?${t}`),r};function OD(r,e,t,n,i){let o=e[t];for(let s=0;s<o.length;s++){let a=o[s];t<e.length-1?OD(r.replace(n[t],a),e,t+1,n,i):i.push(r.replace(n[t],a))}}function od(r){let e=/\{(.*?)\}/g,t=r.match(e),n=[];if(t){let i=[];t.forEach(o=>{let s=o.substring(1,o.length-1).split(",");i.push(s)}),OD(r,i,0,t,n)}else n.push(r);return n}var An=r=>!Array.isArray(r);var Ny=class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){let t=this._cache.get(e);return t||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){let n=mt(e),i;for(let a=0;a<this.parsers.length;a++){let l=this.parsers[a];if(l.test(t)){i=l.getCacheableAssets(n,t);break}}i||(i={},n.forEach(a=>{i[a]=t}));let o=Object.keys(i),s={cacheKeys:o,keys:n};if(n.forEach(a=>{this._cacheMap.set(a,s)}),o.forEach(a=>{let l=i?i[a]:t;this._cache.has(a)&&this._cache.get(a)!==l&&console.warn("[Cache] already has key:",a),this._cache.set(a,i[a])}),t instanceof q){let a=t;n.forEach(l=>{a.baseTexture!==q.EMPTY.baseTexture&&G.addToCache(a.baseTexture,l),q.addToCache(a,l)})}}remove(e){if(!this._cacheMap.has(e)){console.warn(`[Assets] Asset id ${e} was not found in the Cache`);return}let t=this._cacheMap.get(e);t.cacheKeys.forEach(n=>{this._cache.delete(n)}),t.keys.forEach(n=>{this._cacheMap.delete(n)})}get parsers(){return this._parsers}},Or=new Ny;var sd=class{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,t,n)=>(this._parsersValidated=!1,e[t]=n,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,t){let n={promise:null,parser:null};return n.promise=I(this,null,function*(){let i=null,o=null;if(t.loadParser&&(o=this._parserHash[t.loadParser],o||console.warn(`[Assets] specified load parser "${t.loadParser}" not found while loading ${e}`)),!o){for(let s=0;s<this.parsers.length;s++){let a=this.parsers[s];if(a.load&&a.test?.(e,t,this)){o=a;break}}if(!o)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}i=yield o.load(e,t,this),n.parser=o;for(let s=0;s<this.parsers.length;s++){let a=this.parsers[s];a.parse&&a.parse&&(yield a.testParse?.(i,t,this))&&(i=(yield a.parse(i,t,this))||i,n.parser=a)}return i}),n}load(e,t){return I(this,null,function*(){this._parsersValidated||this._validateParsers();let n=0,i={},o=An(e),s=mt(e,u=>({alias:[u],src:u})),a=s.length,l=s.map(u=>I(this,null,function*(){let c=A.path.toAbsolute(u.src);if(!i[u.src])try{this.promiseCache[c]||(this.promiseCache[c]=this._getLoadPromiseAndParser(c,u)),i[u.src]=yield this.promiseCache[c].promise,t&&t(++n/a)}catch(h){throw delete this.promiseCache[c],delete i[u.src],new Error(`[Loader.load] Failed to load ${c}.
${h}`)}}));return yield Promise.all(l),o?i[s[0].src]:i})}unload(e){return I(this,null,function*(){let t=mt(e,n=>({alias:[n],src:n})).map(n=>I(this,null,function*(){let i=A.path.toAbsolute(n.src),o=this.promiseCache[i];if(o){let s=yield o.promise;delete this.promiseCache[i],o.parser?.unload?.(s,n,this)}}));yield Promise.all(t)})}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,t)=>(e[t.name]&&console.warn(`[Assets] loadParser name conflict "${t.name}"`),fe(S({},e),{[t.name]:t})),{})}};var Le=(r=>(r[r.Low=0]="Low",r[r.Normal=1]="Normal",r[r.High=2]="High",r))(Le||{});var DB=".json",SB="application/json",Oy={extension:{type:E.LoadParser,priority:Le.Low},name:"loadJson",test(r){return jt(r,SB)||at(r,DB)},load(r){return I(this,null,function*(){return yield(yield b.ADAPTER.fetch(r)).json()})}};w.add(Oy);var IB=".txt",AB="text/plain",Fy={name:"loadTxt",extension:{type:E.LoadParser,priority:Le.Low},test(r){return jt(r,AB)||at(r,IB)},load(r){return I(this,null,function*(){return yield(yield b.ADAPTER.fetch(r)).text()})}};w.add(Fy);var MB=["normal","bold","100","200","300","400","500","600","700","800","900"],RB=[".ttf",".otf",".woff",".woff2"],PB=["font/ttf","font/otf","font/woff","font/woff2"],NB=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function Ly(r){let e=A.path.extname(r),t=A.path.basename(r,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1)),n=t.length>0;for(let o of t)if(!o.match(NB)){n=!1;break}let i=t.join(" ");return n||(i=`"${i.replace(/[\\"]/g,"\\$&")}"`),i}var OB=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function FB(r){return OB.test(r)?r:encodeURI(r)}var ky={extension:{type:E.LoadParser,priority:Le.Low},name:"loadWebFont",test(r){return jt(r,PB)||at(r,RB)},load(r,e){return I(this,null,function*(){let t=b.ADAPTER.getFontFaceSet();if(t){let n=[],i=e.data?.family??Ly(r),o=e.data?.weights?.filter(a=>MB.includes(a))??["normal"],s=e.data??{};for(let a=0;a<o.length;a++){let l=o[a],u=new FontFace(i,`url(${FB(r)})`,fe(S({},s),{weight:l}));yield u.load(),t.add(u),n.push(u)}return n.length===1?n[0]:n}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null})},unload(r){(Array.isArray(r)?r:[r]).forEach(e=>b.ADAPTER.getFontFaceSet().delete(e))}};w.add(ky);var LB=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`,Fs=null,By=(()=>{class r{constructor(){Fs||(Fs=URL.createObjectURL(new Blob([LB],{type:"application/javascript"}))),this.worker=new Worker(Fs)}}return r.revokeObjectURL=function(){Fs&&(URL.revokeObjectURL(Fs),Fs=null)},r})();var kB=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`,Ls=null,FD=(()=>{class r{constructor(){Ls||(Ls=URL.createObjectURL(new Blob([kB],{type:"application/javascript"}))),this.worker=new Worker(Ls)}}return r.revokeObjectURL=function(){Ls&&(URL.revokeObjectURL(Ls),Ls=null)},r})();var LD=0,Uy,jy=class{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{let{worker:t}=new By;t.addEventListener("message",n=>{t.terminate(),By.revokeObjectURL(),e(n.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}_initWorkers(){return I(this,null,function*(){this._initialized||(this._initialized=!0)})}getWorker(){Uy===void 0&&(Uy=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<Uy&&(this._createdWorkers++,e=new FD().worker,e.addEventListener("message",t=>{this.complete(t.data),this.returnWorker(t.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){e.error!==void 0?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}_run(e,t){return I(this,null,function*(){yield this._initWorkers();let n=new Promise((i,o)=>{this.queue.push({id:e,arguments:t,resolve:i,reject:o})});return this.next(),n})}next(){if(!this.queue.length)return;let e=this.getWorker();if(!e)return;let t=this.queue.pop(),n=t.id;this.resolveHash[LD]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:LD++,id:n})}},Hy=new jy;function pr(r,e,t){r.resource.internal=!0;let n=new q(r),i=()=>{delete e.promiseCache[t],Or.has(t)&&Or.remove(t)};return n.baseTexture.once("destroyed",()=>{t in e.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),i())}),n.once("destroyed",()=>{r.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),i())}),n}var BB=[".jpeg",".jpg",".png",".webp",".avif"],UB=["image/jpeg","image/png","image/webp","image/avif"];function Vy(r){return I(this,null,function*(){let e=yield b.ADAPTER.fetch(r);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${r}: ${e.status} ${e.statusText}`);let t=yield e.blob();return yield createImageBitmap(t)})}var Mn={name:"loadTextures",extension:{type:E.LoadParser,priority:Le.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(r){return jt(r,UB)||at(r,BB)},load(r,e,t){return I(this,null,function*(){let n=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap,i;n?this.config.preferWorkers&&(yield Hy.isImageBitmapSupported())?i=yield Hy.loadImageBitmap(r):i=yield Vy(r):i=yield new Promise((a,l)=>{let u=new Image;u.crossOrigin=this.config.crossOrigin,u.src=r,u.complete?a(u):(u.onload=()=>a(u),u.onerror=c=>l(c))});let o=S({},e.data);o.resolution??(o.resolution=A.getResolutionOfUrl(r)),n&&o.resourceOptions?.ownsImageBitmap===void 0&&(o.resourceOptions=S({},o.resourceOptions),o.resourceOptions.ownsImageBitmap=!0);let s=new G(i,o);return s.resource.src=r,pr(s,t,r)})},unload(r){r.destroy(!0)}};w.add(Mn);var jB=".svg",HB="image/svg+xml",$y={extension:{type:E.LoadParser,priority:Le.High},name:"loadSVG",test(r){return jt(r,HB)||at(r,jB)},testParse(r){return I(this,null,function*(){return Os.test(r)})},parse(r,e,t){return I(this,null,function*(){let n=new Os(r,e?.data?.resourceOptions);yield n.load();let i=new G(n,S({resolution:A.getResolutionOfUrl(r)},e?.data));return i.resource.src=e.src,pr(i,t,e.src)})},load(r,e){return I(this,null,function*(){return(yield b.ADAPTER.fetch(r)).text()})},unload:Mn.unload};w.add($y);var VB=[".mp4",".m4v",".webm",".ogv"],$B=["video/mp4","video/webm","video/ogg"],Gy={name:"loadVideo",extension:{type:E.LoadParser,priority:Le.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(r){return jt(r,$B)||at(r,VB)},load(r,e,t){return I(this,null,function*(){let n,i=yield(yield b.ADAPTER.fetch(r)).blob(),o=URL.createObjectURL(i);try{let s=fe(S({autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline},e?.data?.resourceOptions),{autoLoad:!0}),a=new Xl(o,s);yield a.load();let l=new G(a,S({alphaMode:yield A.detectVideoAlphaMode(),resolution:A.getResolutionOfUrl(r)},e?.data));l.resource.src=r,n=pr(l,t,r),n.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(o)})}catch(s){throw URL.revokeObjectURL(o),s}return n})},unload(r){r.destroy(!0)}};w.add(Gy);var ad=class{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,t)=>`${e}${this._bundleIdConnector}${t}`,extractAssetIdFromBundle:(e,t)=>t.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{let t=e;this._defaultSearchParams=Object.keys(t).map(n=>`${encodeURIComponent(n)}=${encodeURIComponent(t[n])}`).join("&")}}getAlias(e){let{alias:t,name:n,src:i,srcs:o}=e;return mt(t||n||i||o,s=>typeof s=="string"?s:Array.isArray(s)?s.map(a=>a?.src??a?.srcs??a):s?.src||s?.srcs?s.src??s.srcs:s,!0)}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){let n=[];Array.isArray(t)?t.forEach(i=>{let o=i.src??i.srcs,s=i.alias??i.name,a;if(typeof s=="string"){let l=this._createBundleAssetId(e,s);n.push(l),a=[s,l]}else{let l=s.map(u=>this._createBundleAssetId(e,u));n.push(...l),a=[...s,...l]}this.add(fe(S({},i),{alias:a,src:o}))}):Object.keys(t).forEach(i=>{let o=[i,this._createBundleAssetId(e,i)];if(typeof t[i]=="string")this.add({alias:o,src:t[i]});else if(Array.isArray(t[i]))this.add({alias:o,src:t[i]});else{let s=t[i],a=s.src??s.srcs;this.add(fe(S({},s),{alias:o,src:Array.isArray(a)?a:[a]}))}n.push(...o)}),this._bundles[e]=n}add(e,t,n,i,o){let s=[];typeof e=="string"||Array.isArray(e)&&typeof e[0]=="string"?(A.deprecation("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),s.push({alias:e,src:t,data:n,format:i,loadParser:o})):Array.isArray(e)?s.push(...e):s.push(e);let a;a=l=>{this.hasKey(l)&&console.warn(`[Resolver] already has key: ${l} overwriting`)},mt(s).forEach(l=>{let{src:u,srcs:c}=l,{data:h,format:d,loadParser:f}=l,p=mt(u||c).map(v=>typeof v=="string"?od(v):Array.isArray(v)?v:[v]),m=this.getAlias(l);Array.isArray(m)?m.forEach(a):a(m);let y=[];p.forEach(v=>{v.forEach(x=>{let g={};if(typeof x!="object"){g.src=x;for(let _=0;_<this._parsers.length;_++){let D=this._parsers[_];if(D.test(x)){g=D.parse(x);break}}}else h=x.data??h,d=x.format??d,f=x.loadParser??f,g=S(S({},g),x);if(!m)throw new Error(`[Resolver] alias is undefined for this asset: ${g.src}`);g=this.buildResolvedAsset(g,{aliases:m,data:h,format:d,loadParser:f}),y.push(g)})}),m.forEach(v=>{this._assetMap[v]=y})})}resolveBundle(e){let t=An(e);e=mt(e);let n={};return e.forEach(i=>{let o=this._bundles[i];if(o){let s=this.resolve(o),a={};for(let l in s){let u=s[l];a[this._extractAssetIdFromBundle(i,l)]=u}n[i]=a}}),t?n[e[0]]:n}resolveUrl(e){let t=this.resolve(e);if(typeof e!="string"){let n={};for(let i in t)n[i]=t[i].src;return n}return t.src}resolve(e){let t=An(e);e=mt(e);let n={};return e.forEach(i=>{if(!this._resolverHash[i])if(this._assetMap[i]){let o=this._assetMap[i],s=o[0],a=this._getPreferredOrder(o);a?.priority.forEach(l=>{a.params[l].forEach(u=>{let c=o.filter(h=>h[l]?h[l]===u:!1);c.length&&(o=c)})}),this._resolverHash[i]=o[0]??s}else this._resolverHash[i]=this.buildResolvedAsset({alias:[i],src:i},{});n[i]=this._resolverHash[i]}),t?n[e[0]]:n}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let t=0;t<e.length;t++){let n=e[0],i=this._preferredOrder.find(o=>o.params.format.includes(n.format));if(i)return i}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;let t=/\?/.test(e)?"&":"?";return`${e}${t}${this._defaultSearchParams}`}buildResolvedAsset(e,t){let{aliases:n,data:i,loadParser:o,format:s}=t;return(this._basePath||this._rootPath)&&(e.src=A.path.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=n??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data=S(S({},i||{}),e.data),e.loadParser=o??e.loadParser,e.format=s??e.format??A.path.extname(e.src).slice(1),e.srcs=e.src,e.name=e.alias,e}};var ld=class{constructor(){this._detections=[],this._initialized=!1,this.resolver=new ad,this.loader=new sd,this.cache=Or,this._backgroundLoader=new id(this.loader),this._backgroundLoader.active=!0,this.reset()}init(){return I(this,arguments,function*(e={}){if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let o=e.manifest;typeof o=="string"&&(o=yield this.load(o)),this.resolver.addManifest(o)}let t=e.texturePreference?.resolution??1,n=typeof t=="number"?[t]:t,i=yield this._detectFormats({preferredFormats:e.texturePreference?.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:i,resolution:n}}),e.preferences&&this.setPreferences(e.preferences)})}add(e,t,n,i,o){this.resolver.add(e,t,n,i,o)}load(e,t){return I(this,null,function*(){this._initialized||(yield this.init());let n=An(e),i=mt(e).map(a=>{if(typeof a!="string"){let l=this.resolver.getAlias(a);return l.some(u=>!this.resolver.hasKey(u))&&this.add(a),Array.isArray(l)?l[0]:l}return this.resolver.hasKey(a)||this.add({alias:a,src:a}),a}),o=this.resolver.resolve(i),s=yield this._mapLoadToResolve(o,t);return n?s[i[0]]:s})}addBundle(e,t){this.resolver.addBundle(e,t)}loadBundle(e,t){return I(this,null,function*(){this._initialized||(yield this.init());let n=!1;typeof e=="string"&&(n=!0,e=[e]);let i=this.resolver.resolveBundle(e),o={},s=Object.keys(i),a=0,l=0,u=()=>{t?.(++a/l)},c=s.map(h=>{let d=i[h];return l+=Object.keys(d).length,this._mapLoadToResolve(d,u).then(f=>{o[h]=f})});return yield Promise.all(c),n?o[e[0]]:o})}backgroundLoad(e){return I(this,null,function*(){this._initialized||(yield this.init()),typeof e=="string"&&(e=[e]);let t=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(t))})}backgroundLoadBundle(e){return I(this,null,function*(){this._initialized||(yield this.init()),typeof e=="string"&&(e=[e]);let t=this.resolver.resolveBundle(e);Object.values(t).forEach(n=>{this._backgroundLoader.add(Object.values(n))})})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return Or.get(e);let t={};for(let n=0;n<e.length;n++)t[n]=Or.get(e[n]);return t}_mapLoadToResolve(e,t){return I(this,null,function*(){let n=Object.values(e),i=Object.keys(e);this._backgroundLoader.active=!1;let o=yield this.loader.load(n,t);this._backgroundLoader.active=!0;let s={};return n.forEach((a,l)=>{let u=o[a.src],c=[a.src];a.alias&&c.push(...a.alias),s[i[l]]=u,Or.set(c,u)}),s})}unload(e){return I(this,null,function*(){this._initialized||(yield this.init());let t=mt(e).map(i=>typeof i!="string"?i.src:i),n=this.resolver.resolve(t);yield this._unloadFromResolved(n)})}unloadBundle(e){return I(this,null,function*(){this._initialized||(yield this.init()),e=mt(e);let t=this.resolver.resolveBundle(e),n=Object.keys(t).map(i=>this._unloadFromResolved(t[i]));yield Promise.all(n)})}_unloadFromResolved(e){return I(this,null,function*(){let t=Object.values(e);t.forEach(n=>{Or.remove(n.src)}),yield this.loader.unload(t)})}_detectFormats(e){return I(this,null,function*(){let t=[];e.preferredFormats&&(t=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(let n of e.detections)e.skipDetections||(yield n.test())?t=yield n.add(t):e.skipDetections||(t=yield n.remove(t));return t=t.filter((n,i)=>t.indexOf(n)===i),t})}get detections(){return this._detections}get preferWorkers(){return Mn.config.preferWorkers}set preferWorkers(e){A.deprecation("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}setPreferences(e){this.loader.parsers.forEach(t=>{t.config&&Object.keys(t.config).filter(n=>n in e).forEach(n=>{t.config[n]=e[n]})})}},to=new ld;w.handleByList(E.LoadParser,to.loader.parsers).handleByList(E.ResolveParser,to.resolver.parsers).handleByList(E.CacheParser,to.cache.parsers).handleByList(E.DetectionParser,to.detections);var zy={extension:E.CacheParser,test:r=>Array.isArray(r)&&r.every(e=>e instanceof q),getCacheableAssets:(r,e)=>{let t={};return r.forEach(n=>{e.forEach((i,o)=>{t[n+(o===0?"":o+1)]=i})}),t}};w.add(zy);function ud(r){return I(this,null,function*(){if("Image"in globalThis)return new Promise(e=>{let t=new Image;t.onload=()=>{e(!0)},t.onerror=()=>{e(!1)},t.src=r});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{let e=yield(yield fetch(r)).blob();yield createImageBitmap(e)}catch{return!1}return!0}return!1})}var Wy={extension:{type:E.DetectionParser,priority:1},test:()=>I(void 0,null,function*(){return ud("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=")}),add:r=>I(void 0,null,function*(){return[...r,"avif"]}),remove:r=>I(void 0,null,function*(){return r.filter(e=>e!=="avif")})};w.add(Wy);var qy={extension:{type:E.DetectionParser,priority:0},test:()=>I(void 0,null,function*(){return ud("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=")}),add:r=>I(void 0,null,function*(){return[...r,"webp"]}),remove:r=>I(void 0,null,function*(){return r.filter(e=>e!=="webp")})};w.add(qy);var kD=["png","jpg","jpeg"],Xy={extension:{type:E.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:r=>I(void 0,null,function*(){return[...r,...kD]}),remove:r=>I(void 0,null,function*(){return r.filter(e=>!kD.includes(e))})};w.add(Xy);var GB="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function ks(r){return GB?!1:document.createElement("video").canPlayType(r)!==""}var Yy={extension:{type:E.DetectionParser,priority:0},test:()=>I(void 0,null,function*(){return ks("video/webm")}),add:r=>I(void 0,null,function*(){return[...r,"webm"]}),remove:r=>I(void 0,null,function*(){return r.filter(e=>e!=="webm")})};w.add(Yy);var Zy={extension:{type:E.DetectionParser,priority:0},test:()=>I(void 0,null,function*(){return ks("video/mp4")}),add:r=>I(void 0,null,function*(){return[...r,"mp4","m4v"]}),remove:r=>I(void 0,null,function*(){return r.filter(e=>e!=="mp4"&&e!=="m4v")})};w.add(Zy);var Ky={extension:{type:E.DetectionParser,priority:0},test:()=>I(void 0,null,function*(){return ks("video/ogg")}),add:r=>I(void 0,null,function*(){return[...r,"ogv"]}),remove:r=>I(void 0,null,function*(){return r.filter(e=>e!=="ogv")})};w.add(Ky);var Qy={extension:E.ResolveParser,test:Mn.test,parse:r=>({resolution:parseFloat(b.RETINA_PREFIX.exec(r)?.[1]??"1"),format:A.path.extname(r).slice(1),src:r})};w.add(Qy);var et=(r=>(r[r.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",r[r.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",r[r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",r[r.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",r[r.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",r[r.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",r[r.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",r[r.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",r[r.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",r[r.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",r[r.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",r[r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",r[r.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",r[r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",r[r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",r[r.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",r[r.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",r[r.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",r[r.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",r[r.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",r[r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",r[r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",r[r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",r))(et||{}),oi={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};var on,Bs;function BD(){Bs={bptc:on.getExtension("EXT_texture_compression_bptc"),astc:on.getExtension("WEBGL_compressed_texture_astc"),etc:on.getExtension("WEBGL_compressed_texture_etc"),s3tc:on.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:on.getExtension("WEBGL_compressed_texture_s3tc_srgb"),pvrtc:on.getExtension("WEBGL_compressed_texture_pvrtc")||on.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),etc1:on.getExtension("WEBGL_compressed_texture_etc1"),atc:on.getExtension("WEBGL_compressed_texture_atc")}}var Jy={extension:{type:E.DetectionParser,priority:2},test:()=>I(void 0,null,function*(){let r=b.ADAPTER.createCanvas().getContext("webgl");return r?(on=r,!0):(console.warn("WebGL not available for compressed textures."),!1)}),add:r=>I(void 0,null,function*(){Bs||BD();let e=[];for(let t in Bs)Bs[t]&&e.push(t);return[...e,...r]}),remove:r=>I(void 0,null,function*(){return Bs||BD(),r.filter(e=>!(e in Bs))})};w.add(Jy);var Us=class extends Mr{constructor(e,t={width:1,height:1,autoLoad:!0}){let n,i;typeof e=="string"?(n=e,i=new Uint8Array):(n=null,i=e),super(i,t),this.origin=n,this.buffer=i?new Kn(i):null,this._load=null,this.loaded=!1,this.origin!==null&&t.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(e=>e.blob()).then(e=>e.arrayBuffer()).then(e=>(this.data=new Uint32Array(e),this.buffer=new Kn(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),this)),this._load)}};var Rn=class r extends Us{constructor(e,t){super(e,t),this.format=t.format,this.levels=t.levels||1,this._width=t.width,this._height=t.height,this._extension=r._formatToExtension(this.format),(t.levelBuffers||this.buffer)&&(this._levelBuffers=t.levelBuffers||r._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,t,n){let i=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;i.pixelStorei(i.UNPACK_ALIGNMENT,4);for(let o=0,s=this.levels;o<s;o++){let{levelID:a,levelWidth:l,levelHeight:u,levelBuffer:c}=this._levelBuffers[o];i.compressedTexImage2D(i.TEXTURE_2D,a,this.format,l,u,0,c)}return!0}onBlobLoaded(){this._levelBuffers=r._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=35916&&e<=35919)return"s3tc_sRGB";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e===36196)return"etc1";if(e===35986||e===35987||e===34798)return"atc";if(e>=36492&&e<=36495)return"bptc";if(e===37808)return"astc";throw new Error(`Invalid (compressed) texture format given: ${e}`)}static _createLevelBuffers(e,t,n,i,o,s,a){let l=new Array(n),u=e.byteOffset,c=s,h=a,d=c+i-1&~(i-1),f=h+o-1&~(o-1),p=d*f*oi[t];for(let m=0;m<n;m++)l[m]={levelID:m,levelWidth:n>1?c:d,levelHeight:n>1?h:f,levelBuffer:new Uint8Array(e.buffer,u,p)},u+=p,c=c>>1||1,h=h>>1||1,d=c+i-1&~(i-1),f=h+o-1&~(o-1),p=d*f*oi[t];return l}};var ev=4,cd=124,zB=32,UD=20,WB=542327876,hd={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},qB={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},dd={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},XB=1,YB=2,ZB=4,KB=64,QB=512,JB=131072,e2=827611204,t2=861165636,r2=894720068,n2=808540228,i2=4,o2={[e2]:et.COMPRESSED_RGBA_S3TC_DXT1_EXT,[t2]:et.COMPRESSED_RGBA_S3TC_DXT3_EXT,[r2]:et.COMPRESSED_RGBA_S3TC_DXT5_EXT},s2={70:et.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:et.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:et.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:et.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:et.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:et.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:et.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:et.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:et.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:et.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:et.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:et.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:et.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function fd(r){let e=new Uint32Array(r);if(e[0]!==WB)throw new Error("Invalid DDS file magic word");let t=new Uint32Array(r,0,cd/Uint32Array.BYTES_PER_ELEMENT),n=t[hd.HEIGHT],i=t[hd.WIDTH],o=t[hd.MIPMAP_COUNT],s=new Uint32Array(r,hd.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,zB/Uint32Array.BYTES_PER_ELEMENT),a=s[XB];if(a&ZB){let l=s[qB.FOURCC];if(l!==n2){let x=o2[l],g=ev+cd,_=new Uint8Array(r,g);return[new Rn(_,{format:x,width:i,height:n,levels:o})]}let u=ev+cd,c=new Uint32Array(e.buffer,u,UD/Uint32Array.BYTES_PER_ELEMENT),h=c[dd.DXGI_FORMAT],d=c[dd.RESOURCE_DIMENSION],f=c[dd.MISC_FLAG],p=c[dd.ARRAY_SIZE],m=s2[h];if(m===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${h}`);if(f===i2)throw new Error("DDSParser does not support cubemap textures");if(d===6)throw new Error("DDSParser does not supported 3D texture data");let y=new Array,v=ev+cd+UD;if(p===1)y.push(new Uint8Array(r,v));else{let x=oi[m],g=0,_=i,D=n;for(let P=0;P<o;P++){let R=Math.max(1,_+3&-4),k=Math.max(1,D+3&-4),$=R*k*x;g+=$,_=_>>>1,D=D>>>1}let N=v;for(let P=0;P<p;P++)y.push(new Uint8Array(r,N,g)),N+=g}return y.map(x=>new Rn(x,{format:m,width:i,height:n,levels:o}))}throw a&KB?new Error("DDSParser does not support uncompressed texture data."):a&QB?new Error("DDSParser does not supported YUV uncompressed texture data."):a&JB?new Error("DDSParser does not support single-channel (lumninance) texture data!"):a&YB?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}var jD=[171,75,84,88,32,49,49,187,13,10,26,10],a2=67305985,Fr={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},tv=64,pd={[H.UNSIGNED_BYTE]:1,[H.UNSIGNED_SHORT]:2,[H.INT]:4,[H.UNSIGNED_INT]:4,[H.FLOAT]:4,[H.HALF_FLOAT]:8},rv={[M.RGBA]:4,[M.RGB]:3,[M.RG]:2,[M.RED]:1,[M.LUMINANCE]:1,[M.LUMINANCE_ALPHA]:2,[M.ALPHA]:1},nv={[H.UNSIGNED_SHORT_4_4_4_4]:2,[H.UNSIGNED_SHORT_5_5_5_1]:2,[H.UNSIGNED_SHORT_5_6_5]:2};function md(r,e,t=!1){let n=new DataView(e);if(!l2(r,n))return null;let i=n.getUint32(Fr.ENDIANNESS,!0)===a2,o=n.getUint32(Fr.GL_TYPE,i),s=n.getUint32(Fr.GL_FORMAT,i),a=n.getUint32(Fr.GL_INTERNAL_FORMAT,i),l=n.getUint32(Fr.PIXEL_WIDTH,i),u=n.getUint32(Fr.PIXEL_HEIGHT,i)||1,c=n.getUint32(Fr.PIXEL_DEPTH,i)||1,h=n.getUint32(Fr.NUMBER_OF_ARRAY_ELEMENTS,i)||1,d=n.getUint32(Fr.NUMBER_OF_FACES,i),f=n.getUint32(Fr.NUMBER_OF_MIPMAP_LEVELS,i),p=n.getUint32(Fr.BYTES_OF_KEY_VALUE_DATA,i);if(u===0||c!==1)throw new Error("Only 2D textures are supported");if(d!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(h!==1)throw new Error("WebGL does not support array textures");let m=4,y=4,v=l+3&-4,x=u+3&-4,g=new Array(h),_=l*u;o===0&&(_=v*x);let D;if(o!==0?pd[o]?D=pd[o]*rv[s]:D=nv[o]:D=oi[a],D===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");let N=t?c2(n,p,i):null,P=_*D,R=l,k=u,$=v,F=x,L=tv+p;for(let T=0;T<f;T++){let C=n.getUint32(L,i),K=L+4;for(let ue=0;ue<h;ue++){let j=g[ue];j||(j=g[ue]=new Array(f)),j[T]={levelID:T,levelWidth:f>1||o!==0?R:$,levelHeight:f>1||o!==0?k:F,levelBuffer:new Uint8Array(e,K,P)},K+=P}L+=C+4,L=L%4!==0?L+4-L%4:L,R=R>>1||1,k=k>>1||1,$=R+m-1&~(m-1),F=k+y-1&~(y-1),P=$*F*D}return o!==0?{uncompressed:g.map(T=>{let C=T[0].levelBuffer,K=!1;return o===H.FLOAT?C=new Float32Array(T[0].levelBuffer.buffer,T[0].levelBuffer.byteOffset,T[0].levelBuffer.byteLength/4):o===H.UNSIGNED_INT?(K=!0,C=new Uint32Array(T[0].levelBuffer.buffer,T[0].levelBuffer.byteOffset,T[0].levelBuffer.byteLength/4)):o===H.INT&&(K=!0,C=new Int32Array(T[0].levelBuffer.buffer,T[0].levelBuffer.byteOffset,T[0].levelBuffer.byteLength/4)),{resource:new Mr(C,{width:T[0].levelWidth,height:T[0].levelHeight}),type:o,format:K?u2(s):s}}),kvData:N}:{compressed:g.map(T=>new Rn(null,{format:a,width:l,height:u,levels:f,levelBuffers:T})),kvData:N}}function l2(r,e){for(let t=0;t<jD.length;t++)if(e.getUint8(t)!==jD[t])return console.error(`${r} is not a valid *.ktx file!`),!1;return!0}function u2(r){switch(r){case M.RGBA:return M.RGBA_INTEGER;case M.RGB:return M.RGB_INTEGER;case M.RG:return M.RG_INTEGER;case M.RED:return M.RED_INTEGER;default:return r}}function c2(r,e,t){let n=new Map,i=0;for(;i<e;){let o=r.getUint32(tv+i,t),s=tv+i+4,a=3-(o+3)%4;if(o===0||o>e-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<o&&r.getUint8(s+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}let u=new TextDecoder().decode(new Uint8Array(r.buffer,s,l)),c=new DataView(r.buffer,s+l+1,o-l-1);n.set(u,c),i+=4+o+a}return n}var iv={extension:{type:E.LoadParser,priority:Le.High},name:"loadDDS",test(r){return at(r,".dds")},load(r,e,t){return I(this,null,function*(){let n=yield(yield b.ADAPTER.fetch(r)).arrayBuffer(),i=fd(n).map(o=>{let s=new G(o,S({mipmap:ft.OFF,alphaMode:Oe.NO_PREMULTIPLIED_ALPHA,resolution:A.getResolutionOfUrl(r)},e.data));return pr(s,t,r)});return i.length===1?i[0]:i})},unload(r){Array.isArray(r)?r.forEach(e=>e.destroy(!0)):r.destroy(!0)}};w.add(iv);var ov={extension:{type:E.LoadParser,priority:Le.High},name:"loadKTX",test(r){return at(r,".ktx")},load(r,e,t){return I(this,null,function*(){let n=yield(yield b.ADAPTER.fetch(r)).arrayBuffer(),{compressed:i,uncompressed:o,kvData:s}=md(r,n),a=i??o,l=S({mipmap:ft.OFF,alphaMode:Oe.NO_PREMULTIPLIED_ALPHA,resolution:A.getResolutionOfUrl(r)},e.data),u=a.map(c=>{a===o&&Object.assign(l,{type:c.type,format:c.format});let h=c.resource??c,d=new G(h,l);return d.ktxKeyValueData=s,pr(d,t,r)});return u.length===1?u[0]:u})},unload(r){Array.isArray(r)?r.forEach(e=>e.destroy(!0)):r.destroy(!0)}};w.add(ov);var h2=["s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"],sv={extension:E.ResolveParser,test:r=>{let e=A.path.extname(r).slice(1);return["basis","ktx","dds"].includes(e)},parse:r=>{let e=r.split("."),t=e.pop();if(["ktx","dds"].includes(t)){let n=e.pop();if(h2.includes(n))return{resolution:parseFloat(b.RETINA_PREFIX.exec(r)?.[1]??"1"),format:n,src:r}}return{resolution:parseFloat(b.RETINA_PREFIX.exec(r)?.[1]??"1"),format:t,src:r}}};w.add(sv);var gd=new W,d2=4,HD=class ou{constructor(e){this.renderer=e,this._rendererPremultipliedAlpha=!1}contextChange(){let e=this.renderer?.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}image(e,t,n,i){return I(this,null,function*(){let o=new Image;return o.src=yield this.base64(e,t,n,i),o})}base64(e,t,n,i){return I(this,null,function*(){let o=this.canvas(e,i);if(o.toBlob!==void 0)return new Promise((s,a)=>{o.toBlob(l=>{if(!l){a(new Error("ICanvas.toBlob failed!"));return}let u=new FileReader;u.onload=()=>s(u.result),u.onerror=a,u.readAsDataURL(l)},t,n)});if(o.toDataURL!==void 0)return o.toDataURL(t,n);if(o.convertToBlob!==void 0){let s=yield o.convertToBlob({type:t,quality:n});return new Promise((a,l)=>{let u=new FileReader;u.onload=()=>a(u.result),u.onerror=l,u.readAsDataURL(s)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")})}canvas(e,t){let{pixels:n,width:i,height:o,flipY:s,premultipliedAlpha:a}=this._rawPixels(e,t);s&&ou._flipY(n,i,o),a&&ou._unpremultiplyAlpha(n);let l=new A.CanvasRenderTarget(i,o,1),u=new ImageData(new Uint8ClampedArray(n.buffer),i,o);return l.context.putImageData(u,0,0),l.canvas}pixels(e,t){let{pixels:n,width:i,height:o,flipY:s,premultipliedAlpha:a}=this._rawPixels(e,t);return s&&ou._flipY(n,i,o),a&&ou._unpremultiplyAlpha(n),n}_rawPixels(e,t){let n=this.renderer;if(!n)throw new Error("The Extract has already been destroyed");let i,o=!1,s=!1,a,l=!1;e&&(e instanceof fr?a=e:(a=n.generateTexture(e,{region:t,resolution:n.resolution,multisample:n.multisample}),l=!0,t&&(gd.width=t.width,gd.height=t.height,t=gd)));let u=n.gl;if(a){if(i=a.baseTexture.resolution,t=t??a.frame,o=!1,s=a.baseTexture.alphaMode>0&&a.baseTexture.format===M.RGBA,!l){n.renderTexture.bind(a);let f=a.framebuffer.glFramebuffers[n.CONTEXT_UID];f.blitFramebuffer&&n.framebuffer.bind(f.blitFramebuffer)}}else i=n.resolution,t||(t=gd,t.width=n.width/i,t.height=n.height/i),o=!0,s=this._rendererPremultipliedAlpha,n.renderTexture.bind();let c=Math.max(Math.round(t.width*i),1),h=Math.max(Math.round(t.height*i),1),d=new Uint8Array(d2*c*h);return u.readPixels(Math.round(t.x*i),Math.round(t.y*i),c,h,u.RGBA,u.UNSIGNED_BYTE,d),l&&a?.destroy(!0),{pixels:d,width:c,height:h,flipY:o,premultipliedAlpha:s}}destroy(){this.renderer=null}static _flipY(e,t,n){let i=t<<2,o=n>>1,s=new Uint8Array(i);for(let a=0;a<o;a++){let l=a*i,u=(n-a-1)*i;s.set(e.subarray(l,l+i)),e.copyWithin(l,u,u+i),e.set(s,u)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));let t=e.length;for(let n=0;n<t;n+=4){let i=e[n+3];if(i!==0){let o=255.001/i;e[n]=e[n]*o+.5,e[n+1]=e[n+1]*o+.5,e[n+2]=e[n+2]*o+.5}}}};HD.extension={name:"extract",type:E.RendererSystem};var VD=HD;w.add(VD);var ro={build(r){let e=r.points,t,n,i,o,s,a;if(r.type===Se.CIRC){let p=r.shape;t=p.x,n=p.y,s=a=p.radius,i=o=0}else if(r.type===Se.ELIP){let p=r.shape;t=p.x,n=p.y,s=p.width,a=p.height,i=o=0}else{let p=r.shape,m=p.width/2,y=p.height/2;t=p.x+m,n=p.y+y,s=a=Math.max(0,Math.min(p.radius,Math.min(m,y))),i=m-s,o=y-a}if(!(s>=0&&a>=0&&i>=0&&o>=0)){e.length=0;return}let l=Math.ceil(2.3*Math.sqrt(s+a)),u=l*8+(i?4:0)+(o?4:0);if(e.length=u,u===0)return;if(l===0){e.length=8,e[0]=e[6]=t+i,e[1]=e[3]=n+o,e[2]=e[4]=t-i,e[5]=e[7]=n-o;return}let c=0,h=l*4+(i?2:0)+2,d=h,f=u;{let p=i+s,m=o,y=t+p,v=t-p,x=n+m;if(e[c++]=y,e[c++]=x,e[--h]=x,e[--h]=v,o){let g=n-m;e[d++]=v,e[d++]=g,e[--f]=g,e[--f]=y}}for(let p=1;p<l;p++){let m=Math.PI/2*(p/l),y=i+Math.cos(m)*s,v=o+Math.sin(m)*a,x=t+y,g=t-y,_=n+v,D=n-v;e[c++]=x,e[c++]=_,e[--h]=_,e[--h]=g,e[d++]=g,e[d++]=D,e[--f]=D,e[--f]=x}{let p=i,m=o+a,y=t+p,v=t-p,x=n+m,g=n-m;e[c++]=y,e[c++]=x,e[--f]=g,e[--f]=y,i&&(e[c++]=v,e[c++]=x,e[--f]=g,e[--f]=v)}},triangulate(r,e){let t=r.points,n=e.points,i=e.indices;if(t.length===0)return;let o=n.length/2,s=o,a,l;if(r.type!==Se.RREC){let c=r.shape;a=c.x,l=c.y}else{let c=r.shape;a=c.x+c.width/2,l=c.y+c.height/2}let u=r.matrix;n.push(r.matrix?u.a*a+u.c*l+u.tx:a,r.matrix?u.b*a+u.d*l+u.ty:l),o++,n.push(t[0],t[1]);for(let c=2;c<t.length;c+=2)n.push(t[c],t[c+1]),i.push(o++,s,o);i.push(s+1,s,o)}};function $D(r,e=!1){let t=r.length;if(t<6)return;let n=0;for(let i=0,o=r[t-2],s=r[t-1];i<t;i+=2){let a=r[i],l=r[i+1];n+=(a-o)*(l+s),o=a,s=l}if(!e&&n>0||e&&n<=0){let i=t/2;for(let o=i+i%2;o<t;o+=2){let s=t-o-2,a=t-o-1,l=o,u=o+1;[r[s],r[l]]=[r[l],r[s]],[r[a],r[u]]=[r[u],r[a]]}}}var su={build(r){r.points=r.shape.points.slice()},triangulate(r,e){let t=r.points,n=r.holes,i=e.points,o=e.indices;if(t.length>=6){$D(t,!1);let s=[];for(let u=0;u<n.length;u++){let c=n[u];$D(c.points,!0),s.push(t.length/2),t=t.concat(c.points)}let a=A.earcut(t,s,2);if(!a)return;let l=i.length/2;for(let u=0;u<a.length;u+=3)o.push(a[u]+l),o.push(a[u+1]+l),o.push(a[u+2]+l);for(let u=0;u<t.length;u++)i.push(t[u])}}};var av={build(r){let e=r.shape,t=e.x,n=e.y,i=e.width,o=e.height,s=r.points;s.length=0,i>=0&&o>=0&&s.push(t,n,t+i,n,t+i,n+o,t,n+o)},triangulate(r,e){let t=r.points,n=e.points;if(t.length===0)return;let i=n.length/2;n.push(t[0],t[1],t[2],t[3],t[6],t[7],t[4],t[5]),e.indices.push(i,i+1,i+2,i+1,i+2,i+3)}};var lv={build(r){ro.build(r)},triangulate(r,e){ro.triangulate(r,e)}};var bt=(r=>(r.MITER="miter",r.BEVEL="bevel",r.ROUND="round",r))(bt||{}),mr=(r=>(r.BUTT="butt",r.ROUND="round",r.SQUARE="square",r))(mr||{}),gr={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(r,e=20){if(!this.adaptive||!r||isNaN(r))return e;let t=Math.ceil(r/this.maxLength);return t<this.minSegments?t=this.minSegments:t>this.maxSegments&&(t=this.maxSegments),t}};var no=class{static curveTo(e,t,n,i,o,s){let a=s[s.length-2],l=s[s.length-1]-t,u=a-e,c=i-t,h=n-e,d=Math.abs(l*h-u*c);if(d<1e-8||o===0)return(s[s.length-2]!==e||s[s.length-1]!==t)&&s.push(e,t),null;let f=l*l+u*u,p=c*c+h*h,m=l*c+u*h,y=o*Math.sqrt(f)/d,v=o*Math.sqrt(p)/d,x=y*m/f,g=v*m/p,_=y*h+v*u,D=y*c+v*l,N=u*(v+x),P=l*(v+x),R=h*(y+g),k=c*(y+g),$=Math.atan2(P-D,N-_),F=Math.atan2(k-D,R-_);return{cx:_+e,cy:D+t,radius:o,startAngle:$,endAngle:F,anticlockwise:u*c>h*l}}static arc(e,t,n,i,o,s,a,l,u){let c=a-s,h=gr._segmentsCount(Math.abs(c)*o,Math.ceil(Math.abs(c)/Jn)*40),d=c/(h*2),f=d*2,p=Math.cos(d),m=Math.sin(d),y=h-1,v=y%1/y;for(let x=0;x<=y;++x){let g=x+v*x,_=d+s+f*g,D=Math.cos(_),N=-Math.sin(_);u.push((p*D+m*N)*o+n,(p*-N+m*D)*o+i)}}};var js=class{constructor(){this.reset()}begin(e,t,n){this.reset(),this.style=e,this.start=t,this.attribStart=n}end(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}};var Hs=class r{static curveLength(e,t,n,i,o,s,a,l){let u=0,c=0,h=0,d=0,f=0,p=0,m=0,y=0,v=0,x=0,g=0,_=e,D=t;for(let N=1;N<=10;++N)c=N/10,h=c*c,d=h*c,f=1-c,p=f*f,m=p*f,y=m*e+3*p*c*n+3*f*h*o+d*a,v=m*t+3*p*c*i+3*f*h*s+d*l,x=_-y,g=D-v,_=y,D=v,u+=Math.sqrt(x*x+g*g);return u}static curveTo(e,t,n,i,o,s,a){let l=a[a.length-2],u=a[a.length-1];a.length-=2;let c=gr._segmentsCount(r.curveLength(l,u,e,t,n,i,o,s)),h=0,d=0,f=0,p=0,m=0;a.push(l,u);for(let y=1,v=0;y<=c;++y)v=y/c,h=1-v,d=h*h,f=d*h,p=v*v,m=p*v,a.push(f*l+3*d*v*e+3*h*p*n+m*o,f*u+3*d*v*t+3*h*p*i+m*s)}};function GD(r,e,t,n,i,o,s,a){let l=r-t*i,u=e-n*i,c=r+t*o,h=e+n*o,d,f;s?(d=n,f=-t):(d=-n,f=t);let p=l+d,m=u+f,y=c+d,v=h+f;return a.push(p,m,y,v),2}function io(r,e,t,n,i,o,s,a){let l=t-r,u=n-e,c=Math.atan2(l,u),h=Math.atan2(i-r,o-e);a&&c<h?c+=Math.PI*2:!a&&c>h&&(h+=Math.PI*2);let d=c,f=h-c,p=Math.abs(f),m=Math.sqrt(l*l+u*u),y=(15*p*Math.sqrt(m)/Math.PI>>0)+1,v=f/y;if(d+=v,a){s.push(r,e,t,n);for(let x=1,g=d;x<y;x++,g+=v)s.push(r,e,r+Math.sin(g)*m,e+Math.cos(g)*m);s.push(r,e,i,o)}else{s.push(t,n,r,e);for(let x=1,g=d;x<y;x++,g+=v)s.push(r+Math.sin(g)*m,e+Math.cos(g)*m,r,e);s.push(i,o,r,e)}return y*2}function f2(r,e){let t=r.shape,n=r.points||t.points.slice(),i=e.closePointEps;if(n.length===0)return;let o=r.lineStyle,s=new Z(n[0],n[1]),a=new Z(n[n.length-2],n[n.length-1]),l=t.type!==Se.POLY||t.closeStroke,u=Math.abs(s.x-a.x)<i&&Math.abs(s.y-a.y)<i;if(l){n=n.slice(),u&&(n.pop(),n.pop(),a.set(n[n.length-2],n[n.length-1]));let j=(s.x+a.x)*.5,O=(a.y+s.y)*.5;n.unshift(j,O),n.push(j,O)}let c=e.points,h=n.length/2,d=n.length,f=c.length/2,p=o.width/2,m=p*p,y=o.miterLimit*o.miterLimit,v=n[0],x=n[1],g=n[2],_=n[3],D=0,N=0,P=-(x-_),R=v-g,k=0,$=0,F=Math.sqrt(P*P+R*R);P/=F,R/=F,P*=p,R*=p;let L=o.alignment,T=(1-L)*2,C=L*2;l||(o.cap===mr.ROUND?d+=io(v-P*(T-C)*.5,x-R*(T-C)*.5,v-P*T,x-R*T,v+P*C,x+R*C,c,!0)+2:o.cap===mr.SQUARE&&(d+=GD(v,x,P,R,T,C,!0,c))),c.push(v-P*T,x-R*T,v+P*C,x+R*C);for(let j=1;j<h-1;++j){v=n[(j-1)*2],x=n[(j-1)*2+1],g=n[j*2],_=n[j*2+1],D=n[(j+1)*2],N=n[(j+1)*2+1],P=-(x-_),R=v-g,F=Math.sqrt(P*P+R*R),P/=F,R/=F,P*=p,R*=p,k=-(_-N),$=g-D,F=Math.sqrt(k*k+$*$),k/=F,$/=F,k*=p,$*=p;let O=g-v,V=x-_,U=g-D,be=N-_,Me=O*U+V*be,$e=V*U-be*O,Ne=$e<0;if(Math.abs($e)<.001*Math.abs(Me)){c.push(g-P*T,_-R*T,g+P*C,_+R*C),Me>=0&&(o.join===bt.ROUND?d+=io(g,_,g-P*T,_-R*T,g-k*T,_-$*T,c,!1)+4:d+=2,c.push(g-k*C,_-$*C,g+k*T,_+$*T));continue}let gt=(-P+v)*(-R+_)-(-P+g)*(-R+x),Rt=(-k+D)*(-$+_)-(-k+g)*(-$+N),wt=(O*Rt-U*gt)/$e,Pt=(be*gt-V*Rt)/$e,We=(wt-g)*(wt-g)+(Pt-_)*(Pt-_),Ge=g+(wt-g)*T,qe=_+(Pt-_)*T,yt=g-(wt-g)*C,Tt=_-(Pt-_)*C,Ys=Math.min(O*O+V*V,U*U+be*be),wv=Ne?T:C,SS=Ys+wv*wv*m,IS=We<=SS,bu=o.join;if(bu===bt.MITER&&We/m>y&&(bu=bt.BEVEL),IS)switch(bu){case bt.MITER:{c.push(Ge,qe,yt,Tt);break}case bt.BEVEL:{Ne?c.push(Ge,qe,g+P*C,_+R*C,Ge,qe,g+k*C,_+$*C):c.push(g-P*T,_-R*T,yt,Tt,g-k*T,_-$*T,yt,Tt),d+=2;break}case bt.ROUND:{Ne?(c.push(Ge,qe,g+P*C,_+R*C),d+=io(g,_,g+P*C,_+R*C,g+k*C,_+$*C,c,!0)+4,c.push(Ge,qe,g+k*C,_+$*C)):(c.push(g-P*T,_-R*T,yt,Tt),d+=io(g,_,g-P*T,_-R*T,g-k*T,_-$*T,c,!1)+4,c.push(g-k*T,_-$*T,yt,Tt));break}}else{switch(c.push(g-P*T,_-R*T,g+P*C,_+R*C),bu){case bt.MITER:{Ne?c.push(yt,Tt,yt,Tt):c.push(Ge,qe,Ge,qe),d+=2;break}case bt.ROUND:{Ne?d+=io(g,_,g+P*C,_+R*C,g+k*C,_+$*C,c,!0)+2:d+=io(g,_,g-P*T,_-R*T,g-k*T,_-$*T,c,!1)+2;break}}c.push(g-k*T,_-$*T,g+k*C,_+$*C),d+=2}}v=n[(h-2)*2],x=n[(h-2)*2+1],g=n[(h-1)*2],_=n[(h-1)*2+1],P=-(x-_),R=v-g,F=Math.sqrt(P*P+R*R),P/=F,R/=F,P*=p,R*=p,c.push(g-P*T,_-R*T,g+P*C,_+R*C),l||(o.cap===mr.ROUND?d+=io(g-P*(T-C)*.5,_-R*(T-C)*.5,g-P*T,_-R*T,g+P*C,_+R*C,c,!1)+2:o.cap===mr.SQUARE&&(d+=GD(g,_,P,R,T,C,!1,c)));let K=e.indices,ue=gr.epsilon*gr.epsilon;for(let j=f;j<d+f-2;++j)v=c[j*2],x=c[j*2+1],g=c[(j+1)*2],_=c[(j+1)*2+1],D=c[(j+2)*2],N=c[(j+2)*2+1],!(Math.abs(v*(_-N)+g*(N-x)+D*(x-_))<ue)&&K.push(j,j+1,j+2)}function p2(r,e){let t=0,n=r.shape,i=r.points||n.points,o=n.type!==Se.POLY||n.closeStroke;if(i.length===0)return;let s=e.points,a=e.indices,l=i.length/2,u=s.length/2,c=u;for(s.push(i[0],i[1]),t=1;t<l;t++)s.push(i[t*2],i[t*2+1]),a.push(c,c+1),c++;o&&a.push(c,u)}function au(r,e){r.lineStyle.native?p2(r,e):f2(r,e)}var Vs=class r{static curveLength(e,t,n,i,o,s){let a=e-2*n+o,l=t-2*i+s,u=2*n-2*e,c=2*i-2*t,h=4*(a*a+l*l),d=4*(a*u+l*c),f=u*u+c*c,p=2*Math.sqrt(h+d+f),m=Math.sqrt(h),y=2*h*m,v=2*Math.sqrt(f),x=d/m;return(y*p+m*d*(p-v)+(4*f*h-d*d)*Math.log((2*m+x+p)/(x+v)))/(4*y)}static curveTo(e,t,n,i,o){let s=o[o.length-2],a=o[o.length-1],l=gr._segmentsCount(r.curveLength(s,a,e,t,n,i)),u=0,c=0;for(let h=1;h<=l;++h){let d=h/l;u=s+(e-s)*d,c=a+(t-a)*d,o.push(u+(e+(n-e)*d-u)*d,c+(t+(i-t)*d-c)*d)}}};var lu={[Se.POLY]:su,[Se.CIRC]:ro,[Se.ELIP]:ro,[Se.RECT]:av,[Se.RREC]:lv},yd=[],$s=[];var Gs=class r{constructor(e,t=null,n=null,i=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=n,this.fillStyle=t,this.matrix=i,this.type=e.type}clone(){return new r(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}};var zs=new Z,zD=class WD extends Hi{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new tn,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),$s.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){let t=this.batches[e];t.reset(),yd.push(t)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,t=null,n=null,i=null){let o=new Gs(e,t,n,i);return this.graphicsData.push(o),this.dirty++,this}drawHole(e,t=null){if(!this.graphicsData.length)return null;let n=new Gs(e,null,null,t),i=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=i.lineStyle,i.holes.push(n),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){let t=this.graphicsData;for(let n=0;n<t.length;++n){let i=t[n];if(i.fillStyle.visible&&i.shape&&(i.matrix?i.matrix.applyInverse(e,zs):zs.copyFrom(e),i.shape.contains(zs.x,zs.y))){let o=!1;if(i.holes){for(let s=0;s<i.holes.length;s++)if(i.holes[s].shape.contains(zs.x,zs.y)){o=!0;break}}if(!o)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;let e=this.uvs,t=this.graphicsData,n=null,i=null;this.batches.length>0&&(n=this.batches[this.batches.length-1],i=n.style);for(let l=this.shapeIndex;l<t.length;l++){this.shapeIndex++;let u=t[l],c=u.fillStyle,h=u.lineStyle;lu[u.type].build(u),u.matrix&&this.transformPoints(u.points,u.matrix),(c.visible||h.visible)&&this.processHoles(u.holes);for(let d=0;d<2;d++){let f=d===0?c:h;if(!f.visible)continue;let p=f.texture.baseTexture,m=this.indices.length,y=this.points.length/2;p.wrapMode=Zt.REPEAT,d===0?this.processFill(u):this.processLine(u);let v=this.points.length/2-y;v!==0&&(n&&!this._compareStyles(i,f)&&(n.end(m,y),n=null),n||(n=yd.pop()||new js,n.begin(f,m,y),this.batches.push(n),i=f),this.addUvs(this.points,e,f.texture,y,v,f.matrix))}}let o=this.indices.length,s=this.points.length/2;if(n&&n.end(o,s),this.batches.length===0){this.batchable=!0;return}let a=s>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&a===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=a?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,t){return!(!e||!t||e.texture.baseTexture!==t.texture.baseTexture||e.color+e.alpha!==t.color+t.alpha||!!e.native!=!!t.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,t=this.graphicsData.length;e<t;e++){let n=this.graphicsData[e],i=n.fillStyle,o=n.lineStyle;if(i&&!i.texture.baseTexture.valid||o&&!o.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);let e=this.batches;for(let t=0,n=e.length;t<n;t++){let i=e[t];for(let o=0;o<i.size;o++){let s=i.start+o;this.indicesUint16[s]=this.indicesUint16[s]-i.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;let e=this.batches;for(let t=0;t<e.length;t++)if(e[t].style.native)return!1;return this.points.length<WD.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++G._globalBatch;for(let h=0;h<this.drawCalls.length;h++)this.drawCalls[h].texArray.clear(),$s.push(this.drawCalls[h]);this.drawCalls.length=0;let t=this.colors,n=this.textureIds,i=$s.pop();i||(i=new Qn,i.texArray=new ei),i.texArray.count=0,i.start=0,i.size=0,i.type=kt.TRIANGLES;let o=0,s=null,a=0,l=!1,u=kt.TRIANGLES,c=0;this.drawCalls.push(i);for(let h=0;h<this.batches.length;h++){let d=this.batches[h],f=8,p=d.style,m=p.texture.baseTexture;l!==!!p.native&&(l=!!p.native,u=l?kt.LINES:kt.TRIANGLES,s=null,o=f,e++),s!==m&&(s=m,m._batchEnabled!==e&&(o===f&&(e++,o=0,i.size>0&&(i=$s.pop(),i||(i=new Qn,i.texArray=new ei),this.drawCalls.push(i)),i.start=c,i.size=0,i.texArray.count=0,i.type=u),m.touched=1,m._batchEnabled=e,m._batchLocation=o,m.wrapMode=Zt.REPEAT,i.texArray.elements[i.texArray.count++]=m,o++)),i.size+=d.size,c+=d.size,a=m._batchLocation,this.addColors(t,p.color,p.alpha,d.attribSize,d.attribStart),this.addTextureIds(n,a,d.attribSize,d.attribStart)}G._globalBatch=e,this.packAttributes()}packAttributes(){let e=this.points,t=this.uvs,n=this.colors,i=this.textureIds,o=new ArrayBuffer(e.length*3*4),s=new Float32Array(o),a=new Uint32Array(o),l=0;for(let u=0;u<e.length/2;u++)s[l++]=e[u*2],s[l++]=e[u*2+1],s[l++]=t[u*2],s[l++]=t[u*2+1],a[l++]=n[u],s[l++]=i[u];this._buffer.update(o),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?su.triangulate(e,this):lu[e.type].triangulate(e,this)}processLine(e){au(e,this);for(let t=0;t<e.holes.length;t++)au(e.holes[t],this)}processHoles(e){for(let t=0;t<e.length;t++){let n=e[t];lu[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}}calculateBounds(){let e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,t){for(let n=0;n<e.length/2;n++){let i=e[n*2],o=e[n*2+1];e[n*2]=t.a*i+t.c*o+t.tx,e[n*2+1]=t.b*i+t.d*o+t.ty}}addColors(e,t,n,i,o=0){let s=te.shared.setValue(t).toLittleEndianNumber(),a=te.shared.setValue(s).toPremultiplied(n);e.length=Math.max(e.length,o+i);for(let l=0;l<i;l++)e[o+l]=a}addTextureIds(e,t,n,i=0){e.length=Math.max(e.length,i+n);for(let o=0;o<n;o++)e[i+o]=t}addUvs(e,t,n,i,o,s=null){let a=0,l=t.length,u=n.frame;for(;a<o;){let h=e[(i+a)*2],d=e[(i+a)*2+1];if(s){let f=s.a*h+s.c*d+s.tx;d=s.b*h+s.d*d+s.ty,h=f}a++,t.push(h/u.width,d/u.height)}let c=n.baseTexture;(u.width<c.width||u.height<c.height)&&this.adjustUvs(t,n,l,o)}adjustUvs(e,t,n,i){let o=t.baseTexture,s=1e-6,a=n+i*2,l=t.frame,u=l.width/o.width,c=l.height/o.height,h=l.x/l.width,d=l.y/l.height,f=Math.floor(e[n]+s),p=Math.floor(e[n+1]+s);for(let m=n+2;m<a;m+=2)f=Math.min(f,Math.floor(e[m]+s)),p=Math.min(p,Math.floor(e[m+1]+s));h-=f,d-=p;for(let m=n;m<a;m+=2)e[m]=(e[m]+h)*u,e[m+1]=(e[m+1]+d)*c}};zD.BATCHABLE_SIZE=100;var uv=zD;var oo=class r{constructor(){this.color=16777215,this.alpha=1,this.texture=q.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){let e=new r;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=q.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}};var uu=class r extends oo{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=mr.BUTT,this.join=bt.MITER,this.miterLimit=10}clone(){let e=new r;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=mr.BUTT,this.join=bt.MITER,this.miterLimit=10}};var cv={},hv=class vd extends Ve{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new oo,this._lineStyle=new uu,this._matrix=null,this._holeMode=!1,this.state=st.for2d(),this._geometry=e||new uv,this._geometry.refCount++,this._transformID=-1,this._tintColor=new te(16777215),this.blendMode=Y.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new vd(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,t=0,n,i=.5,o=!1){return typeof e=="number"&&(e={width:e,color:t,alpha:n,alignment:i,native:o}),this.lineTextureStyle(e)}lineTextureStyle(e){let t={width:0,texture:q.WHITE,color:e?.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:mr.BUTT,join:bt.MITER,miterLimit:10};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();let n=e.width>0&&e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:n},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){let e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new Qr,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new Qr,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this}lineTo(e,t){this.currentPath||this.moveTo(0,0);let n=this.currentPath.points,i=n[n.length-2],o=n[n.length-1];return(i!==e||o!==t)&&n.push(e,t),this}_initCurve(e=0,t=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,t]):this.moveTo(e,t)}quadraticCurveTo(e,t,n,i){this._initCurve();let o=this.currentPath.points;return o.length===0&&this.moveTo(0,0),Vs.curveTo(e,t,n,i,o),this}bezierCurveTo(e,t,n,i,o,s){return this._initCurve(),Hs.curveTo(e,t,n,i,o,s,this.currentPath.points),this}arcTo(e,t,n,i,o){this._initCurve(e,t);let s=this.currentPath.points,a=no.curveTo(e,t,n,i,o,s);if(a){let{cx:l,cy:u,radius:c,startAngle:h,endAngle:d,anticlockwise:f}=a;this.arc(l,u,c,h,d,f)}return this}arc(e,t,n,i,o,s=!1){if(i===o)return this;if(!s&&o<=i?o+=Jn:s&&i<=o&&(i+=Jn),o-i===0)return this;let a=e+Math.cos(i)*n,l=t+Math.sin(i)*n,u=this._geometry.closePointEps,c=this.currentPath?this.currentPath.points:null;if(c){let h=Math.abs(c[c.length-2]-a),d=Math.abs(c[c.length-1]-l);h<u&&d<u||c.push(a,l)}else this.moveTo(a,l),c=this.currentPath.points;return no.arc(a,l,e,t,n,i,o,s,c),this}beginFill(e=0,t){return this.beginTextureFill({texture:q.WHITE,color:e,alpha:t})}normalizeColor(e){let t=te.shared.setValue(e.color??0);e.color=t.toNumber(),e.alpha??(e.alpha=t.alpha)}beginTextureFill(e){let t={texture:q.WHITE,color:16777215,matrix:null};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();let n=e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:n},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,t,n,i){return this.drawShape(new W(e,t,n,i))}drawRoundedRect(e,t,n,i,o){return this.drawShape(new gs(e,t,n,i,o))}drawCircle(e,t,n){return this.drawShape(new ps(e,t,n))}drawEllipse(e,t,n,i){return this.drawShape(new ms(e,t,n,i))}drawPolygon(...e){let t,n=!0,i=e[0];i.points?(n=i.closeStroke,t=i.points):Array.isArray(e[0])?t=e[0]:t=e;let o=new Qr(t);return o.closeStroke=n,this.drawShape(o),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){let e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===Se.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();let t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){let e=this._geometry,t=this.blendMode,n=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(e.points);for(let i=0;i<n;i++){let o=e.batches[i],s=o.style.color,a=new Float32Array(this.vertexData.buffer,o.attribStart*4*2,o.attribSize*2),l=new Float32Array(e.uvsFloat32.buffer,o.attribStart*4*2,o.attribSize*2),u=new Uint16Array(e.indicesUint16.buffer,o.start*2,o.size),c={vertexData:a,blendMode:t,indices:u,uvs:l,_batchRGB:te.shared.setValue(s).toRgbArray(),_tintRGB:s,_texture:o.style.texture,alpha:o.style.alpha,worldAlpha:1};this.batches[i]=c}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let t=0,n=this.batches.length;t<n;t++){let i=this.batches[t];i.worldAlpha=this.worldAlpha*i.alpha,e.plugins[this.pluginName].render(i)}}}_renderDirect(e){let t=this._resolveDirectShader(e),n=this._geometry,i=this.worldAlpha,o=t.uniforms,s=n.drawCalls;o.translationMatrix=this.transform.worldTransform,te.shared.setValue(this._tintColor).premultiply(i).toArray(o.tint),e.shader.bind(t),e.geometry.bind(n,t),e.state.set(this.state);for(let a=0,l=s.length;a<l;a++)this._renderDrawCallDirect(e,n.drawCalls[a])}_renderDrawCallDirect(e,t){let{texArray:n,type:i,size:o,start:s}=t,a=n.count;for(let l=0;l<a;l++)e.texture.bind(n.elements[l],l);e.geometry.draw(i,o,s)}_resolveDirectShader(e){let t=this.shader,n=this.pluginName;if(!t){if(!cv[n]){let{maxTextures:i}=e.plugins[n],o=new Int32Array(i);for(let l=0;l<i;l++)o[l]=l;let s={tint:new Float32Array([1,1,1,1]),translationMatrix:new le,default:Mt.from({uSamplers:o},!0)},a=e.plugins[n]._shader.program;cv[n]=new pt(a,s)}t=cv[n]}return t}_calculateBounds(){this.finishPoly();let e=this._geometry;if(!e.graphicsData.length)return;let{minX:t,minY:n,maxX:i,maxY:o}=e.bounds;this._bounds.addFrame(this.transform,t,n,i,o)}containsPoint(e){return this.worldTransform.applyInverse(e,vd._TEMP_POINT),this._geometry.containsPoint(vd._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){let t=this.batches[e];t._tintRGB=te.shared.setValue(this._tintColor).multiply(t._batchRGB).toLittleEndianNumber()}}}calculateVertices(){let e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;let t=this.transform.worldTransform,n=t.a,i=t.b,o=t.c,s=t.d,a=t.tx,l=t.ty,u=this._geometry.points,c=this.vertexData,h=0;for(let d=0;d<u.length;d+=2){let f=u[d],p=u[d+1];c[h++]=n*f+o*p+a,c[h++]=s*p+i*f+l}}closePath(){let e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};hv.curves=gr,hv._TEMP_POINT=new Z;var _d=hv;var cu=class{constructor(e,t){this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;let t=this.uvBuffer.data;(!this.data||this.data.length!==t.length)&&(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}};var dv=new Z,qD=new Qr,XD=class YD extends Ve{constructor(e,t,n,i=kt.TRIANGLES){super(),this.geometry=e,this.shader=t,this.state=n||st.for2d(),this.drawMode=i,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=b.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){let t=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===kt.TRIANGLES&&t.length<YD.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){let t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){let t=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;let i=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[i]),e.plugins[i].render(this)}calculateVertices(){let e=this.geometry.buffers[0],t=e.data,n=e._updateID;if(n===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==t.length&&(this.vertexData=new Float32Array(t.length));let i=this.transform.worldTransform,o=i.a,s=i.b,a=i.c,l=i.d,u=i.tx,c=i.ty,h=this.vertexData;for(let d=0;d<h.length/2;d++){let f=t[d*2],p=t[d*2+1];h[d*2]=o*f+a*p+u,h[d*2+1]=s*f+l*p+c}if(this._roundPixels){let d=b.RESOLUTION;for(let f=0;f<h.length;++f)h[f]=Math.round(h[f]*d)/d}this.vertexDirty=n}calculateUvs(){let e=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new cu(e,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,dv);let t=this.geometry.getBuffer("aVertexPosition").data,n=qD.points,i=this.geometry.getIndex().data,o=i.length,s=this.drawMode===4?3:1;for(let a=0;a+2<o;a+=s){let l=i[a]*2,u=i[a+1]*2,c=i[a+2]*2;if(n[0]=t[l],n[1]=t[l+1],n[2]=t[u],n[3]=t[u+1],n[4]=t[c],n[5]=t[c+1],qD.contains(dv.x,dv.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};XD.BATCHABLE_SIZE=100;var so=XD;var si=class extends Jt{constructor(e,t,n){super();let i=new Ce(e),o=new Ce(t,!0),s=new Ce(n,!0,!0);this.addAttribute("aVertexPosition",i,2,!1,H.FLOAT).addAttribute("aTextureCoord",o,2,!1,H.FLOAT).addIndex(s),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}};var ZD=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`;var KD=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;var Pn=class extends pt{constructor(e,t){let n={uSampler:e,alpha:1,uTextureMatrix:le.IDENTITY,uColor:new Float32Array([1,1,1,1])};t=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},t),t.uniforms&&Object.assign(n,t.uniforms),super(t.program||xt.from(KD,ZD),n),this._colorDirty=!1,this.uvMatrix=new ri(e),this.batchable=t.program===void 0,this.pluginName=t.pluginName,this._tintColor=new te(t.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=t.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;let e=this.texture.baseTexture.alphaMode;te.shared.setValue(this._tintColor).premultiply(this._alpha,e).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}};var hu=class{constructor(e,t,n){this.geometry=new Jt,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(let i=0;i<e.length;++i){let o=e[i];o={attributeName:o.attributeName,size:o.size,uploadFunction:o.uploadFunction,type:o.type||H.FLOAT,offset:o.offset},t[i]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){let e=this.geometry,t=0;this.indexBuffer=new Ce(A.createIndicesForQuads(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let s=0;s<this.dynamicProperties.length;++s){let a=this.dynamicProperties[s];a.offset=t,t+=a.size,this.dynamicStride+=a.size}let n=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(n),this.dynamicDataUint32=new Uint32Array(n),this.dynamicBuffer=new Ce(this.dynamicData,!1,!1);let i=0;this.staticStride=0;for(let s=0;s<this.staticProperties.length;++s){let a=this.staticProperties[s];a.offset=i,i+=a.size,this.staticStride+=a.size}let o=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(o),this.staticDataUint32=new Uint32Array(o),this.staticBuffer=new Ce(this.staticData,!0,!1);for(let s=0;s<this.dynamicProperties.length;++s){let a=this.dynamicProperties[s];e.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===H.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let s=0;s<this.staticProperties.length;++s){let a=this.staticProperties[s];e.addAttribute(a.attributeName,this.staticBuffer,0,a.type===H.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(e,t,n){for(let i=0;i<this.dynamicProperties.length;i++){let o=this.dynamicProperties[i];o.uploadFunction(e,t,n,o.type===H.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,o.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,t,n){for(let i=0;i<this.staticProperties.length;i++){let o=this.staticProperties[i];o.uploadFunction(e,t,n,o.type===H.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,o.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}};var QD=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`;var JD=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;var du=class extends Rr{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new le,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:H.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=pt.from(JD,QD,{}),this.state=st.for2d()}render(e){let t=e.children,n=e._maxSize,i=e._batchSize,o=this.renderer,s=t.length;if(s===0)return;s>n&&!e.autoResize&&(s=n);let a=e._buffers;a||(a=e._buffers=this.generateBuffers(e));let l=t[0]._texture.baseTexture,u=l.alphaMode>0;this.state.blendMode=A.correctBlendMode(e.blendMode,u),o.state.set(this.state);let c=o.gl,h=e.worldTransform.copyTo(this.tempMatrix);h.prepend(o.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=h.toArray(!0),this.shader.uniforms.uColor=te.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,u).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let d=!1;for(let f=0,p=0;f<s;f+=i,p+=1){let m=s-f;m>i&&(m=i),p>=a.length&&a.push(this._generateOneMoreBuffer(e));let y=a[p];y.uploadDynamic(t,f,m);let v=e._bufferUpdateIDs[p]||0;d=d||y._updateID<v,d&&(y._updateID=e._updateID,y.uploadStatic(t,f,m)),o.geometry.bind(y.geometry),c.drawElements(c.TRIANGLES,m*6,c.UNSIGNED_SHORT,0)}}generateBuffers(e){let t=[],n=e._maxSize,i=e._batchSize,o=e._properties;for(let s=0;s<n;s+=i)t.push(new hu(this.properties,o,i));return t}_generateOneMoreBuffer(e){let t=e._batchSize,n=e._properties;return new hu(this.properties,n,t)}uploadVertices(e,t,n,i,o,s){let a=0,l=0,u=0,c=0;for(let h=0;h<n;++h){let d=e[t+h],f=d._texture,p=d.scale.x,m=d.scale.y,y=f.trim,v=f.orig;y?(l=y.x-d.anchor.x*v.width,a=l+y.width,c=y.y-d.anchor.y*v.height,u=c+y.height):(a=v.width*(1-d.anchor.x),l=v.width*-d.anchor.x,u=v.height*(1-d.anchor.y),c=v.height*-d.anchor.y),i[s]=l*p,i[s+1]=c*m,i[s+o]=a*p,i[s+o+1]=c*m,i[s+o*2]=a*p,i[s+o*2+1]=u*m,i[s+o*3]=l*p,i[s+o*3+1]=u*m,s+=o*4}}uploadPosition(e,t,n,i,o,s){for(let a=0;a<n;a++){let l=e[t+a].position;i[s]=l.x,i[s+1]=l.y,i[s+o]=l.x,i[s+o+1]=l.y,i[s+o*2]=l.x,i[s+o*2+1]=l.y,i[s+o*3]=l.x,i[s+o*3+1]=l.y,s+=o*4}}uploadRotation(e,t,n,i,o,s){for(let a=0;a<n;a++){let l=e[t+a].rotation;i[s]=l,i[s+o]=l,i[s+o*2]=l,i[s+o*3]=l,s+=o*4}}uploadUvs(e,t,n,i,o,s){for(let a=0;a<n;++a){let l=e[t+a]._texture._uvs;l?(i[s]=l.x0,i[s+1]=l.y0,i[s+o]=l.x1,i[s+o+1]=l.y1,i[s+o*2]=l.x2,i[s+o*2+1]=l.y2,i[s+o*3]=l.x3,i[s+o*3+1]=l.y3,s+=o*4):(i[s]=0,i[s+1]=0,i[s+o]=0,i[s+o+1]=0,i[s+o*2]=0,i[s+o*2+1]=0,i[s+o*3]=0,i[s+o*3+1]=0,s+=o*4)}}uploadTint(e,t,n,i,o,s){for(let a=0;a<n;++a){let l=e[t+a],u=te.shared.setValue(l._tintRGB).toPremultiplied(l.alpha,l.texture.baseTexture.alphaMode>0);i[s]=u,i[s+o]=u,i[s+o*2]=u,i[s+o*3]=u,s+=o*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}};du.extension={name:"particle",type:E.RendererPlugin};w.add(du);var ai=(r=>(r[r.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",r[r.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",r))(ai||{});var xd={willReadFrequently:!0},sn=class X{static get experimentalLetterSpacingSupported(){let e=X._experimentalLetterSpacingSupported;if(e!==void 0){let t=b.ADAPTER.getCanvasRenderingContext2D().prototype;e=X._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,n,i,o,s,a,l,u){this.text=e,this.style=t,this.width=n,this.height=i,this.lines=o,this.lineWidths=s,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=u}static measureText(e,t,n,i=X._canvas){n=n??t.wordWrap;let o=t.toFontString(),s=X.measureFont(o);s.fontSize===0&&(s.fontSize=t.fontSize,s.ascent=t.fontSize);let a=i.getContext("2d",xd);a.font=o;let l=(n?X.wordWrap(e,t,i):e).split(/(?:\r\n|\r|\n)/),u=new Array(l.length),c=0;for(let p=0;p<l.length;p++){let m=X._measureText(l[p],t.letterSpacing,a);u[p]=m,c=Math.max(c,m)}let h=c+t.strokeThickness;t.dropShadow&&(h+=t.dropShadowDistance);let d=t.lineHeight||s.fontSize+t.strokeThickness,f=Math.max(d,s.fontSize+t.strokeThickness*2)+t.leading+(l.length-1)*(d+t.leading);return t.dropShadow&&(f+=t.dropShadowDistance),new X(e,t,h,f,l,u,d+t.leading,c,s)}static _measureText(e,t,n){let i=!1;X.experimentalLetterSpacingSupported&&(X.experimentalLetterSpacing?(n.letterSpacing=`${t}px`,n.textLetterSpacing=`${t}px`,i=!0):(n.letterSpacing="0px",n.textLetterSpacing="0px"));let o=n.measureText(e).width;return o>0&&(i?o-=t:o+=(X.graphemeSegmenter(e).length-1)*t),o}static wordWrap(e,t,n=X._canvas){let i=n.getContext("2d",xd),o=0,s="",a="",l=Object.create(null),{letterSpacing:u,whiteSpace:c}=t,h=X.collapseSpaces(c),d=X.collapseNewlines(c),f=!h,p=t.wordWrapWidth+u,m=X.tokenize(e);for(let y=0;y<m.length;y++){let v=m[y];if(X.isNewline(v)){if(!d){a+=X.addLine(s),f=!h,s="",o=0;continue}v=" "}if(h){let g=X.isBreakingSpace(v),_=X.isBreakingSpace(s[s.length-1]);if(g&&_)continue}let x=X.getFromCache(v,u,l,i);if(x>p)if(s!==""&&(a+=X.addLine(s),s="",o=0),X.canBreakWords(v,t.breakWords)){let g=X.wordWrapSplit(v);for(let _=0;_<g.length;_++){let D=g[_],N=D,P=1;for(;g[_+P];){let k=g[_+P];if(!X.canBreakChars(N,k,v,_,t.breakWords))D+=k;else break;N=k,P++}_+=P-1;let R=X.getFromCache(D,u,l,i);R+o>p&&(a+=X.addLine(s),f=!1,s="",o=0),s+=D,o+=R}}else{s.length>0&&(a+=X.addLine(s),s="",o=0);let g=y===m.length-1;a+=X.addLine(v,!g),f=!1,s="",o=0}else x+o>p&&(f=!1,a+=X.addLine(s),s="",o=0),(s.length>0||!X.isBreakingSpace(v)||f)&&(s+=v,o+=x)}return a+=X.addLine(s,!1),a}static addLine(e,t=!0){return e=X.trimRight(e),e=t?`${e}
`:e,e}static getFromCache(e,t,n,i){let o=n[e];return typeof o!="number"&&(o=X._measureText(e,t,i)+t,n[e]=o),o}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){let n=e[t];if(!X.isBreakingSpace(n))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:X._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:X._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){let t=[],n="";if(typeof e!="string")return t;for(let i=0;i<e.length;i++){let o=e[i],s=e[i+1];if(X.isBreakingSpace(o,s)||X.isNewline(o)){n!==""&&(t.push(n),n=""),t.push(o);continue}n+=o}return n!==""&&t.push(n),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,n,i,o){return!0}static wordWrapSplit(e){return X.graphemeSegmenter(e)}static measureFont(e){if(X._fonts[e])return X._fonts[e];let t={ascent:0,descent:0,fontSize:0},n=X._canvas,i=X._context;i.font=e;let o=X.METRICS_STRING+X.BASELINE_SYMBOL,s=Math.ceil(i.measureText(o).width),a=Math.ceil(i.measureText(X.BASELINE_SYMBOL).width),l=Math.ceil(X.HEIGHT_MULTIPLIER*a);if(a=a*X.BASELINE_MULTIPLIER|0,s===0||l===0)return X._fonts[e]=t,t;n.width=s,n.height=l,i.fillStyle="#f00",i.fillRect(0,0,s,l),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(o,0,a);let u=i.getImageData(0,0,s,l).data,c=u.length,h=s*4,d=0,f=0,p=!1;for(d=0;d<a;++d){for(let m=0;m<h;m+=4)if(u[f+m]!==255){p=!0;break}if(!p)f+=h;else break}for(t.ascent=a-d,f=c-h,p=!1,d=l;d>a;--d){for(let m=0;m<h;m+=4)if(u[f+m]!==255){p=!0;break}if(!p)f-=h;else break}return t.descent=d-a,t.fontSize=t.ascent+t.descent,X._fonts[e]=t,t}static clearMetrics(e=""){e?delete X._fonts[e]:X._fonts={}}static get _canvas(){if(!X.__canvas){let e;try{let t=new OffscreenCanvas(0,0);if(t.getContext("2d",xd)?.measureText)return X.__canvas=t,t;e=b.ADAPTER.createCanvas()}catch{e=b.ADAPTER.createCanvas()}e.width=e.height=10,X.__canvas=e}return X.__canvas}static get _context(){return X.__context||(X.__context=X._canvas.getContext("2d",xd)),X.__context}};sn.METRICS_STRING="|\xC9q\xC5",sn.BASELINE_SYMBOL="M",sn.BASELINE_MULTIPLIER=1.4,sn.HEIGHT_MULTIPLIER=2,sn.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){let r=new Intl.Segmenter;return e=>[...r.segment(e)].map(t=>t.segment)}return r=>[...r]})(),sn.experimentalLetterSpacing=!1,sn._fonts={},sn._newlines=[10,13],sn._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var yr=sn;var v2=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],eS=class fu{constructor(e){this.styleID=0,this.reset(),pv(this,e,e)}clone(){let e={};return pv(e,this,fu.defaultStyle),new fu(e)}reset(){pv(this,fu.defaultStyle,fu.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){let t=fv(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){let t=fv(e);this._fill!==t&&(this._fill=t,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){_2(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){let t=fv(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){let e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize,t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(let n=t.length-1;n>=0;n--){let i=t[n].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&!v2.includes(i)&&(i=`"${i}"`),t[n]=i}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${t.join(",")}`}};eS.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:ai.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};var Ht=eS;function fv(r){let e=te.shared,t=n=>{let i=e.setValue(n);return i.alpha===1?i.toHex():i.toRgbaString()};return Array.isArray(r)?r.map(t):t(r)}function _2(r,e){if(!Array.isArray(r)||!Array.isArray(e)||r.length!==e.length)return!1;for(let t=0;t<r.length;++t)if(r[t]!==e[t])return!1;return!0}function pv(r,e,t){for(let n in t)Array.isArray(e[n])?r[n]=e[n].slice():r[n]=e[n]}var x2={texture:!0,children:!1,baseTexture:!0},tS=class mv extends rr{constructor(e,t,n){let i=!1;n||(n=b.ADAPTER.createCanvas(),i=!0),n.width=3,n.height=3;let o=q.from(n);o.orig=new W,o.trim=new W,super(o),this._ownCanvas=i,this.canvas=n,this.context=n.getContext("2d",{willReadFrequently:!0}),this._resolution=mv.defaultResolution??b.RESOLUTION,this._autoResolution=mv.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=t,this.localStyleID=-1}static get experimentalLetterSpacing(){return yr.experimentalLetterSpacing}static set experimentalLetterSpacing(e){A.deprecation("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),yr.experimentalLetterSpacing=e}updateText(e){let t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();let n=this.context,i=yr.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),o=i.width,s=i.height,a=i.lines,l=i.lineHeight,u=i.lineWidths,c=i.maxLineWidth,h=i.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,o)+t.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,s)+t.padding*2)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=t.strokeThickness,n.textBaseline=t.textBaseline,n.lineJoin=t.lineJoin,n.miterLimit=t.miterLimit;let d,f,p=t.dropShadow?2:1;for(let m=0;m<p;++m){let y=t.dropShadow&&m===0,v=y?Math.ceil(Math.max(1,s)+t.padding*2):0,x=v*this._resolution;if(y){n.fillStyle="black",n.strokeStyle="black";let _=t.dropShadowColor,D=t.dropShadowBlur*this._resolution,N=t.dropShadowDistance*this._resolution;n.shadowColor=te.shared.setValue(_).setAlpha(t.dropShadowAlpha).toRgbaString(),n.shadowBlur=D,n.shadowOffsetX=Math.cos(t.dropShadowAngle)*N,n.shadowOffsetY=Math.sin(t.dropShadowAngle)*N+x}else n.fillStyle=this._generateFillStyle(t,a,i),n.strokeStyle=t.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;let g=(l-h.fontSize)/2;l-h.fontSize<0&&(g=0);for(let _=0;_<a.length;_++)d=t.strokeThickness/2,f=t.strokeThickness/2+_*l+h.ascent+g,t.align==="right"?d+=c-u[_]:t.align==="center"&&(d+=(c-u[_])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(a[_],d+t.padding,f+t.padding-v,!0),t.fill&&this.drawLetterSpacing(a[_],d+t.padding,f+t.padding-v)}this.updateTexture()}drawLetterSpacing(e,t,n,i=!1){let o=this._style.letterSpacing,s=!1;if(yr.experimentalLetterSpacingSupported&&(yr.experimentalLetterSpacing?(this.context.letterSpacing=`${o}px`,this.context.textLetterSpacing=`${o}px`,s=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),o===0||s){i?this.context.strokeText(e,t,n):this.context.fillText(e,t,n);return}let a=t,l=yr.graphemeSegmenter(e),u=this.context.measureText(e).width,c=0;for(let h=0;h<l.length;++h){let d=l[h];i?this.context.strokeText(d,a,n):this.context.fillText(d,a,n);let f="";for(let p=h+1;p<l.length;++p)f+=l[p];c=this.context.measureText(f).width,a+=u-c+o,u=c}}updateTexture(){let e=this.canvas;if(this._style.trim){let s=A.trimCanvas(e);s.data&&(e.width=s.width,e.height=s.height,this.context.putImageData(s.data,0,0))}let t=this._texture,n=this._style,i=n.trim?0:n.padding,o=t.baseTexture;t.trim.width=t._frame.width=e.width/this._resolution,t.trim.height=t._frame.height=e.height/this._resolution,t.trim.x=-i,t.trim.y=-i,t.orig.width=t._frame.width-i*2,t.orig.height=t._frame.height-i*2,this._onTextureUpdate(),o.setRealSize(e.width,e.height,this._resolution),t.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,t){return this.updateText(!0),this._textureID===-1&&(e=!1),super.getBounds(e,t)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,t,n){let i=e.fill;if(Array.isArray(i)){if(i.length===1)return i[0]}else return i;let o,s=e.dropShadow?e.dropShadowDistance:0,a=e.padding||0,l=this.canvas.width/this._resolution-s-a*2,u=this.canvas.height/this._resolution-s-a*2,c=i.slice(),h=e.fillGradientStops.slice();if(!h.length){let d=c.length+1;for(let f=1;f<d;++f)h.push(f/d)}if(c.unshift(i[0]),h.unshift(0),c.push(i[i.length-1]),h.push(1),e.fillGradientType===ai.LINEAR_VERTICAL){o=this.context.createLinearGradient(l/2,a,l/2,u+a);let d=n.fontProperties.fontSize+e.strokeThickness;for(let f=0;f<t.length;f++){let p=n.lineHeight*(f-1)+d,m=n.lineHeight*f,y=m;f>0&&p>m&&(y=(m+p)/2);let v=m+d,x=n.lineHeight*(f+1),g=v;f+1<t.length&&x<v&&(g=(v+x)/2);let _=(g-y)/u;for(let D=0;D<c.length;D++){let N=0;typeof h[D]=="number"?N=h[D]:N=D/c.length;let P=Math.min(1,Math.max(0,y/u+N*_));P=Number(P.toFixed(5)),o.addColorStop(P,c[D])}}}else{o=this.context.createLinearGradient(a,u/2,l+a,u/2);let d=c.length+1,f=1;for(let p=0;p<c.length;p++){let m;typeof h[p]=="number"?m=h[p]:m=f/d,o.addColorStop(m,c[p]),f++}}return o}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},x2,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);let t=A.sign(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);let t=A.sign(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},e instanceof Ht?this._style=e:this._style=new Ht(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};tS.defaultAutoResolution=!0;var Ed=tS;var pu=class{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}};function E2(r,e){let t=!1;if(r?._textures?.length){for(let n=0;n<r._textures.length;n++)if(r._textures[n]instanceof q){let i=r._textures[n].baseTexture;e.includes(i)||(e.push(i),t=!0)}}return t}function b2(r,e){if(r.baseTexture instanceof G){let t=r.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function w2(r,e){if(r._texture&&r._texture instanceof q){let t=r._texture.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function T2(r,e){return e instanceof Ed?(e.updateText(!0),!0):!1}function C2(r,e){if(e instanceof Ht){let t=e.toFontString();return yr.measureFont(t),!0}return!1}function D2(r,e){if(r instanceof Ed){e.includes(r.style)||e.push(r.style),e.includes(r)||e.push(r);let t=r._texture.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function S2(r,e){return r instanceof Ht?(e.includes(r)||e.push(r),!0):!1}var rS=class nS{constructor(e){this.limiter=new pu(nS.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(D2),this.registerFindHook(S2),this.registerFindHook(E2),this.registerFindHook(b2),this.registerFindHook(w2),this.registerUploadHook(T2),this.registerUploadHook(C2)}upload(e){return new Promise(t=>{e&&this.add(e),this.queue.length?(this.completes.push(t),this.ticking||(this.ticking=!0,Pe.system.addOnce(this.tick,this,Ut.UTILITY))):t()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){let e=this.queue[0],t=!1;if(e&&!e._destroyed){for(let n=0,i=this.uploadHooks.length;n<i;n++)if(this.uploadHooks[n](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)Pe.system.addOnce(this.tick,this,Ut.UTILITY);else{this.ticking=!1;let e=this.completes.slice(0);this.completes.length=0;for(let t=0,n=e.length;t<n;t++)e[t]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let t=0,n=this.addHooks.length;t<n&&!this.addHooks[t](e,this.queue);t++);if(e instanceof Ve)for(let t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this}destroy(){this.ticking&&Pe.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};rS.uploadsPerFrame=4;var Ws=rS;Object.defineProperties(b,{UPLOADS_PER_FRAME:{get(){return Ws.uploadsPerFrame},set(r){A.deprecation("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),Ws.uploadsPerFrame=r}}});function iS(r,e){return e instanceof G?(e._glTextures[r.CONTEXT_UID]||r.texture.bind(e),!0):!1}function I2(r,e){if(!(e instanceof _d))return!1;let{geometry:t}=e;e.finishPoly(),t.updateBatches();let{batches:n}=t;for(let i=0;i<n.length;i++){let{texture:o}=n[i].style;o&&iS(r,o.baseTexture)}return t.batchable||r.geometry.bind(t,e._resolveDirectShader(r)),!0}function A2(r,e){return r instanceof _d?(e.push(r),!0):!1}var mu=class extends Ws{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(A2),this.registerUploadHook(iS),this.registerUploadHook(I2)}};mu.extension={name:"prepare",type:E.RendererSystem};w.add(mu);var gu=class r extends rr{constructor(e,t=!0){super(e[0]instanceof q?e[0]:e[0].texture),this._textures=null,this._durations=null,this._autoUpdate=t,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=e}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Pe.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Pe.shared.add(this.update,this,Ut.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(e){this.stop(),this.currentFrame=e}gotoAndPlay(e){this.currentFrame=e,this.play()}update(e){if(!this._playing)return;let t=this.animationSpeed*e,n=this.currentFrame;if(this._durations!==null){let i=this._currentTime%1*this._durations[this.currentFrame];for(i+=t/60*1e3;i<0;)this._currentTime--,i+=this._durations[this.currentFrame];let o=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);i>=this._durations[this.currentFrame];)i-=this._durations[this.currentFrame]*o,this._currentTime+=o;this._currentTime+=i/this._durations[this.currentFrame]}else this._currentTime+=t;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n||this.animationSpeed<0&&this.currentFrame>n)&&this.onLoop(),this.updateTexture())}updateTexture(){let e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this._texture=this._textures[e],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(e){this.stop(),super.destroy(e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(e){let t=[];for(let n=0;n<e.length;++n)t.push(q.from(e[n]));return new r(t)}static fromImages(e){let t=[];for(let n=0;n<e.length;++n)t.push(q.from(e[n]));return new r(t)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(e){if(e[0]instanceof q)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(let t=0;t<e.length;t++)this._textures.push(e[t].texture),this._durations.push(e[t].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}set currentFrame(e){if(e<0||e>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${e}, expected to be between 0 and totalFrames ${this.totalFrames}.`);let t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Pe.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Pe.shared.add(this.update,this),this._isConnectedToTicker=!0))}};var Ele=new Z;var oS=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`;var sS=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`;var aS=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`;var gv=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`;var lS=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;var bd=new le,yu=class extends Rr{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new Zi,this.state=st.for2d()}contextChange(){let e=this.renderer,t={globals:e.globalUniforms};this.simpleShader=pt.from(gv,lS,t),this.shader=e.context.webGLVersion>1?pt.from(sS,oS,t):pt.from(gv,aS,t)}render(e){let t=this.renderer,n=this.quad,i=n.vertices;i[0]=i[6]=e._width*-e.anchor.x,i[1]=i[3]=e._height*-e.anchor.y,i[2]=i[4]=e._width*(1-e.anchor.x),i[5]=i[7]=e._height*(1-e.anchor.y);let o=e.uvRespectAnchor?e.anchor.x:0,s=e.uvRespectAnchor?e.anchor.y:0;i=n.uvs,i[0]=i[6]=-o,i[1]=i[3]=-s,i[2]=i[4]=1-o,i[5]=i[7]=1-s,n.invalidate();let a=e._texture,l=a.baseTexture,u=l.alphaMode>0,c=e.tileTransform.localTransform,h=e.uvMatrix,d=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;d&&(l._glTextures[t.CONTEXT_UID]?d=l.wrapMode!==Zt.CLAMP:l.wrapMode===Zt.CLAMP&&(l.wrapMode=Zt.REPEAT));let f=d?this.simpleShader:this.shader,p=a.width,m=a.height,y=e._width,v=e._height;bd.set(c.a*p/y,c.b*p/v,c.c*m/y,c.d*m/v,c.tx/y,c.ty/v),bd.invert(),d?bd.prepend(h.mapCoord):(f.uniforms.uMapCoord=h.mapCoord.toArray(!0),f.uniforms.uClampFrame=h.uClampFrame,f.uniforms.uClampOffset=h.uClampOffset),f.uniforms.uTransform=bd.toArray(!0),f.uniforms.uColor=te.shared.setValue(e.tint).premultiply(e.worldAlpha,u).toArray(f.uniforms.uColor),f.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),f.uniforms.uSampler=a,t.shader.bind(f),t.geometry.bind(n),this.state.blendMode=A.correctBlendMode(e.blendMode,u),t.state.set(this.state),t.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}};yu.extension={name:"tilingSprite",type:E.RendererPlugin};w.add(yu);var uS=class vu{constructor(e,t,n){this.linkedSheets=[],(e instanceof G||e instanceof q)&&(e={texture:e,data:t,resolutionFilename:n});let{texture:i,data:o,resolutionFilename:s=null,cachePrefix:a=""}=e;this.cachePrefix=a,this._texture=i instanceof q?i:null,this.baseTexture=i instanceof G?i:this._texture.baseTexture,this.textures={},this.animations={},this.data=o;let l=this.baseTexture.resource;this.resolution=this._updateResolution(s||(l?l.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){let{scale:t}=this.data.meta,n=A.getResolutionOfUrl(e,null);return n===null&&(n=typeof t=="number"?t:parseFloat(t??"1")),n!==1&&this.baseTexture.setResolution(n),n}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=vu.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e,n=vu.BATCH_SIZE;for(;t-e<n&&t<this._frameKeys.length;){let i=this._frameKeys[t],o=this._frames[i],s=o.frame;if(s){let a=null,l=null,u=o.trimmed!==!1&&o.sourceSize?o.sourceSize:o.frame,c=new W(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);o.rotated?a=new W(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):a=new W(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),o.trimmed!==!1&&o.spriteSourceSize&&(l=new W(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[i]=new q(this.baseTexture,a,c,l,o.rotated?2:0,o.anchor,o.borders),q.addToCache(this.textures[i],this.cachePrefix+i.toString())}t++}}_processAnimations(){let e=this.data.animations||{};for(let t in e){this.animations[t]=[];for(let n=0;n<e[t].length;n++){let i=e[t][n];this.animations[t].push(this.textures[i])}}}_parseComplete(){let e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*vu.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*vu.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){for(let t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(this._texture?.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};uS.BATCH_SIZE=1e3;var wd=uS;var M2=["jpg","png","jpeg","avif","webp","s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"];function cS(r,e,t){let n={};if(r.forEach(i=>{n[i]=e}),Object.keys(e.textures).forEach(i=>{n[`${e.cachePrefix}${i}`]=e.textures[i]}),!t){let i=A.path.dirname(r[0]);e.linkedSheets.forEach((o,s)=>{Object.assign(n,cS([`${i}/${e.data.meta.related_multi_packs[s]}`],o,!0))})}return n}var hS={extension:E.Asset,cache:{test:r=>r instanceof wd,getCacheableAssets:(r,e)=>cS(r,e,!1)},resolver:{test:r=>{let e=r.split("?")[0].split("."),t=e.pop(),n=e.pop();return t==="json"&&M2.includes(n)},parse:r=>{let e=r.split(".");return{resolution:parseFloat(b.RETINA_PREFIX.exec(r)?.[1]??"1"),format:e[e.length-2],src:r}}},loader:{name:"spritesheetLoader",extension:{type:E.LoadParser,priority:Le.Normal},testParse(r,e){return I(this,null,function*(){return A.path.extname(e.src).toLowerCase()===".json"&&!!r.frames})},parse(r,e,t){return I(this,null,function*(){let{texture:n,imageFilename:i,cachePrefix:o}=e?.data??{},s=A.path.dirname(e.src);s&&s.lastIndexOf("/")!==s.length-1&&(s+="/");let a;if(n&&n.baseTexture)a=n;else{let c=eo(s+(i??r.meta.image),e.src);a=(yield t.load([c]))[c]}let l=new wd({texture:a.baseTexture,data:r,resolutionFilename:e.src,cachePrefix:o});yield l.parse();let u=r?.meta?.related_multi_packs;if(Array.isArray(u)){let c=[];for(let d of u){if(typeof d!="string")continue;let f=s+d;e.data?.ignoreMultiPack||(f=eo(f,e.src),c.push(t.load({src:f,data:{ignoreMultiPack:!0}})))}let h=yield Promise.all(c);l.linkedSheets=h,h.forEach(d=>{d.linkedSheets=[l].concat(l.linkedSheets.filter(f=>f!==d))})}return l})},unload(r){r.destroy(!0)}}};w.add(hS);var an=class{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}};var Nn=class{static test(e){return typeof e=="string"&&e.startsWith("info face=")}static parse(e){let t=e.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(let o in t){let s=t[o].match(/^[a-z]+/gm)[0],a=t[o].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(let u in a){let c=a[u].split("="),h=c[0],d=c[1].replace(/"/gm,""),f=parseFloat(d),p=isNaN(f)?d:f;l[h]=p}n[s].push(l)}let i=new an;return n.info.forEach(o=>i.info.push({face:o.face,size:parseInt(o.size,10)})),n.common.forEach(o=>i.common.push({lineHeight:parseInt(o.lineHeight,10)})),n.page.forEach(o=>i.page.push({id:parseInt(o.id,10),file:o.file})),n.char.forEach(o=>i.char.push({id:parseInt(o.id,10),page:parseInt(o.page,10),x:parseInt(o.x,10),y:parseInt(o.y,10),width:parseInt(o.width,10),height:parseInt(o.height,10),xoffset:parseInt(o.xoffset,10),yoffset:parseInt(o.yoffset,10),xadvance:parseInt(o.xadvance,10)})),n.kerning.forEach(o=>i.kerning.push({first:parseInt(o.first,10),second:parseInt(o.second,10),amount:parseInt(o.amount,10)})),n.distanceField.forEach(o=>i.distanceField.push({distanceRange:parseInt(o.distanceRange,10),fieldType:o.fieldType})),i}};var li=class{static test(e){let t=e;return typeof e!="string"&&"getElementsByTagName"in e&&t.getElementsByTagName("page").length&&t.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(e){let t=new an,n=e.getElementsByTagName("info"),i=e.getElementsByTagName("common"),o=e.getElementsByTagName("page"),s=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),l=e.getElementsByTagName("distanceField");for(let u=0;u<n.length;u++)t.info.push({face:n[u].getAttribute("face"),size:parseInt(n[u].getAttribute("size"),10)});for(let u=0;u<i.length;u++)t.common.push({lineHeight:parseInt(i[u].getAttribute("lineHeight"),10)});for(let u=0;u<o.length;u++)t.page.push({id:parseInt(o[u].getAttribute("id"),10)||0,file:o[u].getAttribute("file")});for(let u=0;u<s.length;u++){let c=s[u];t.char.push({id:parseInt(c.getAttribute("id"),10),page:parseInt(c.getAttribute("page"),10)||0,x:parseInt(c.getAttribute("x"),10),y:parseInt(c.getAttribute("y"),10),width:parseInt(c.getAttribute("width"),10),height:parseInt(c.getAttribute("height"),10),xoffset:parseInt(c.getAttribute("xoffset"),10),yoffset:parseInt(c.getAttribute("yoffset"),10),xadvance:parseInt(c.getAttribute("xadvance"),10)})}for(let u=0;u<a.length;u++)t.kerning.push({first:parseInt(a[u].getAttribute("first"),10),second:parseInt(a[u].getAttribute("second"),10),amount:parseInt(a[u].getAttribute("amount"),10)});for(let u=0;u<l.length;u++)t.distanceField.push({fieldType:l[u].getAttribute("fieldType"),distanceRange:parseInt(l[u].getAttribute("distanceRange"),10)});return t}};var ui=class{static test(e){return typeof e=="string"&&e.includes("<font>")?li.test(b.ADAPTER.parseXML(e)):!1}static parse(e){return li.parse(b.ADAPTER.parseXML(e))}};var yv=[Nn,li,ui];function vv(r){for(let e=0;e<yv.length;e++)if(yv[e].test(r))return yv[e];return null}function _v(r,e,t,n,i,o){let s=t.fill;if(Array.isArray(s)){if(s.length===1)return s[0]}else return s;let a,l=t.dropShadow?t.dropShadowDistance:0,u=t.padding||0,c=r.width/n-l-u*2,h=r.height/n-l-u*2,d=s.slice(),f=t.fillGradientStops.slice();if(!f.length){let p=d.length+1;for(let m=1;m<p;++m)f.push(m/p)}if(d.unshift(s[0]),f.unshift(0),d.push(s[s.length-1]),f.push(1),t.fillGradientType===ai.LINEAR_VERTICAL){a=e.createLinearGradient(c/2,u,c/2,h+u);let p=0,m=(o.fontProperties.fontSize+t.strokeThickness)/h;for(let y=0;y<i.length;y++){let v=o.lineHeight*y;for(let x=0;x<d.length;x++){let g=0;typeof f[x]=="number"?g=f[x]:g=x/d.length;let _=v/h+g*m,D=Math.max(p,_);D=Math.min(D,1),a.addColorStop(D,d[x]),p=D}}}else{a=e.createLinearGradient(u,h/2,c+u,h/2);let p=d.length+1,m=1;for(let y=0;y<d.length;y++){let v;typeof f[y]=="number"?v=f[y]:v=m/p,a.addColorStop(v,d[y]),m++}}return a}function xv(r,e,t,n,i,o,s){let a=t.text,l=t.fontProperties;e.translate(n,i),e.scale(o,o);let u=s.strokeThickness/2,c=-(s.strokeThickness/2);if(e.font=s.toFontString(),e.lineWidth=s.strokeThickness,e.textBaseline=s.textBaseline,e.lineJoin=s.lineJoin,e.miterLimit=s.miterLimit,e.fillStyle=_v(r,e,s,o,[a],t),e.strokeStyle=s.stroke,s.dropShadow){let h=s.dropShadowColor,d=s.dropShadowBlur*o,f=s.dropShadowDistance*o;e.shadowColor=te.shared.setValue(h).setAlpha(s.dropShadowAlpha).toRgbaString(),e.shadowBlur=d,e.shadowOffsetX=Math.cos(s.dropShadowAngle)*f,e.shadowOffsetY=Math.sin(s.dropShadowAngle)*f}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;s.stroke&&s.strokeThickness&&e.strokeText(a,u,c+t.lineHeight-l.descent),s.fill&&e.fillText(a,u,c+t.lineHeight-l.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function ao(r){return r.codePointAt?r.codePointAt(0):r.charCodeAt(0)}function _u(r){return Array.from?Array.from(r):r.split("")}function Ev(r){typeof r=="string"&&(r=[r]);let e=[];for(let t=0,n=r.length;t<n;t++){let i=r[t];if(Array.isArray(i)){if(i.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${i.length}.`);let o=i[0].charCodeAt(0),s=i[1].charCodeAt(0);if(s<o)throw new Error("[BitmapFont]: Invalid character range.");for(let a=o,l=s;a<=l;a++)e.push(String.fromCharCode(a))}else e.push(..._u(i))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}var ci=class ln{constructor(e,t,n){let[i]=e.info,[o]=e.common,[s]=e.page,[a]=e.distanceField,l=A.getResolutionOfUrl(s.file),u={};this._ownsTextures=n,this.font=i.face,this.size=i.size,this.lineHeight=o.lineHeight/l,this.chars={},this.pageTextures=u;for(let c=0;c<e.page.length;c++){let{id:h,file:d}=e.page[c];u[h]=t instanceof Array?t[c]:t[d],a?.fieldType&&a.fieldType!=="none"&&(u[h].baseTexture.alphaMode=Oe.NO_PREMULTIPLIED_ALPHA,u[h].baseTexture.mipmap=ft.OFF)}for(let c=0;c<e.char.length;c++){let{id:h,page:d}=e.char[c],{x:f,y:p,width:m,height:y,xoffset:v,yoffset:x,xadvance:g}=e.char[c];f/=l,p/=l,m/=l,y/=l,v/=l,x/=l,g/=l;let _=new W(f+u[d].frame.x/l,p+u[d].frame.y/l,m,y);this.chars[h]={xOffset:v,yOffset:x,xAdvance:g,kerning:{},texture:new q(u[d].baseTexture,_),page:d}}for(let c=0;c<e.kerning.length;c++){let{first:h,second:d,amount:f}=e.kerning[c];h/=l,d/=l,f/=l,this.chars[d]&&(this.chars[d].kerning[h]=f)}this.distanceFieldRange=a?.distanceRange,this.distanceFieldType=a?.fieldType?.toLowerCase()??"none"}destroy(){for(let e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(let e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,t,n){let i;if(e instanceof an)i=e;else{let s=vv(e);if(!s)throw new Error("Unrecognized data format for font.");i=s.parse(e)}t instanceof q&&(t=[t]);let o=new ln(i,t,n);return ln.available[o.font]=o,o}static uninstall(e){let t=ln.available[e];if(!t)throw new Error(`No font found named '${e}'`);t.destroy(),delete ln.available[e]}static from(e,t,n){if(!e)throw new Error("[BitmapFont] Property `name` is required.");let P=Object.assign({},ln.defaultOptions,n),{chars:i,padding:o,resolution:s,textureWidth:a,textureHeight:l}=P,u=Cu(P,["chars","padding","resolution","textureWidth","textureHeight"]),c=Ev(i),h=t instanceof Ht?t:new Ht(t),d=a,f=new an;f.info[0]={face:h.fontFamily,size:h.fontSize},f.common[0]={lineHeight:h.fontSize};let p=0,m=0,y,v,x,g=0,_=[],D=[];for(let R=0;R<c.length;R++){y||(y=b.ADAPTER.createCanvas(),y.width=a,y.height=l,v=y.getContext("2d"),x=new G(y,S({resolution:s},u)),_.push(x),D.push(new q(x)),f.page.push({id:D.length-1,file:""}));let k=c[R],$=yr.measureText(k,h,!1,y),F=$.width,L=Math.ceil($.height),T=Math.ceil((h.fontStyle==="italic"?2:1)*F);if(m>=l-L*s){if(m===0)throw new Error(`[BitmapFont] textureHeight ${l}px is too small (fontFamily: '${h.fontFamily}', fontSize: ${h.fontSize}px, char: '${k}')`);--R,y=null,v=null,x=null,m=0,p=0,g=0;continue}if(g=Math.max(L+$.fontProperties.descent,g),T*s+p>=d){if(p===0)throw new Error(`[BitmapFont] textureWidth ${a}px is too small (fontFamily: '${h.fontFamily}', fontSize: ${h.fontSize}px, char: '${k}')`);--R,m+=g*s,m=Math.ceil(m),p=0,g=0;continue}xv(y,v,$,p,m,s,h);let C=ao($.text);f.char.push({id:C,page:D.length-1,x:p/s,y:m/s,width:T,height:L,xoffset:0,yoffset:0,xadvance:F-(h.dropShadow?h.dropShadowDistance:0)-(h.stroke?h.strokeThickness:0)}),p+=(T+2*o)*s,p=Math.ceil(p)}if(!n?.skipKerning)for(let R=0,k=c.length;R<k;R++){let $=c[R];for(let F=0;F<k;F++){let L=c[F],T=v.measureText($).width,C=v.measureText(L).width,K=v.measureText($+L).width-(T+C);K&&f.kerning.push({first:ao($),second:ao(L),amount:K})}}let N=new ln(f,D,!0);return ln.available[e]!==void 0&&ln.uninstall(e),ln.available[e]=N,N}};ci.ALPHA=[["a","z"],["A","Z"]," "],ci.NUMERIC=[["0","9"]],ci.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],ci.ASCII=[[" ","~"]],ci.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:ci.ALPHANUMERIC},ci.available={};var Lr=ci;var dS=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`;var fS=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;var pS=[],mS=[],gS=[],R2=class yS extends Ve{constructor(e,t={}){super();let{align:n,tint:i,maxWidth:o,letterSpacing:s,fontName:a,fontSize:l}=Object.assign({},yS.styleDefaults,t);if(!Lr.available[a])throw new Error(`Missing BitmapFont "${a}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=n,this._tintColor=new te(i),this._font=void 0,this._fontName=a,this._fontSize=l,this.text=e,this._maxWidth=o,this._maxLineHeight=0,this._letterSpacing=s,this._anchor=new er(()=>{this.dirty=!0},this,0,0),this._roundPixels=b.ROUND_PIXELS,this.dirty=!0,this._resolution=b.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){let e=Lr.available[this._fontName],t=this.fontSize,n=t/e.size,i=new Z,o=[],s=[],a=[],l=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",u=_u(l),c=this._maxWidth*e.size/t,h=e.distanceFieldType==="none"?pS:mS,d=null,f=0,p=0,m=0,y=-1,v=0,x=0,g=0,_=0;for(let F=0;F<u.length;F++){let L=u[F],T=ao(L);if(/(?:\s)/.test(L)&&(y=F,v=f,_++),L==="\r"||L===`
`){s.push(f),a.push(-1),p=Math.max(p,f),++m,++x,i.x=0,i.y+=e.lineHeight,d=null,_=0;continue}let C=e.chars[T];if(!C)continue;d&&C.kerning[d]&&(i.x+=C.kerning[d]);let K=gS.pop()||{texture:q.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Z};K.texture=C.texture,K.line=m,K.charCode=T,K.position.x=Math.round(i.x+C.xOffset+this._letterSpacing/2),K.position.y=Math.round(i.y+C.yOffset),K.prevSpaces=_,o.push(K),f=K.position.x+Math.max(C.xAdvance-C.xOffset,C.texture.orig.width),i.x+=C.xAdvance+this._letterSpacing,g=Math.max(g,C.yOffset+C.texture.height),d=T,y!==-1&&c>0&&i.x>c&&(++x,A.removeItems(o,1+y-x,1+F-y),F=y,y=-1,s.push(v),a.push(o.length>0?o[o.length-1].prevSpaces:0),p=Math.max(p,v),m++,i.x=0,i.y+=e.lineHeight,d=null,_=0)}let D=u[u.length-1];D!=="\r"&&D!==`
`&&(/(?:\s)/.test(D)&&(f=v),s.push(f),p=Math.max(p,f),a.push(-1));let N=[];for(let F=0;F<=m;F++){let L=0;this._align==="right"?L=p-s[F]:this._align==="center"?L=(p-s[F])/2:this._align==="justify"&&(L=a[F]<0?0:(p-s[F])/a[F]),N.push(L)}let P=o.length,R={},k=[],$=this._activePagesMeshData;h.push(...$);for(let F=0;F<P;F++){let L=o[F].texture,T=L.baseTexture.uid;if(!R[T]){let C=h.pop();if(!C){let ue=new si,j,O;e.distanceFieldType==="none"?(j=new Pn(q.EMPTY),O=Y.NORMAL):(j=new Pn(q.EMPTY,{program:xt.from(fS,dS),uniforms:{uFWidth:0}}),O=Y.NORMAL_NPM);let V=new so(ue,j);V.blendMode=O,C={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:V,vertices:null,uvs:null,indices:null}}C.index=0,C.indexCount=0,C.vertexCount=0,C.uvsCount=0,C.total=0;let{_textureCache:K}=this;K[T]=K[T]||new q(L.baseTexture),C.mesh.texture=K[T],C.mesh.tint=this._tintColor.value,k.push(C),R[T]=C}R[T].total++}for(let F=0;F<$.length;F++)k.includes($[F])||this.removeChild($[F].mesh);for(let F=0;F<k.length;F++)k[F].mesh.parent!==this&&this.addChild(k[F].mesh);this._activePagesMeshData=k;for(let F in R){let L=R[F],T=L.total;if(!(L.indices?.length>6*T)||L.vertices.length<so.BATCHABLE_SIZE*2)L.vertices=new Float32Array(4*2*T),L.uvs=new Float32Array(4*2*T),L.indices=new Uint16Array(6*T);else{let C=L.total,K=L.vertices;for(let ue=C*4*2;ue<K.length;ue++)K[ue]=0}L.mesh.size=6*T}for(let F=0;F<P;F++){let L=o[F],T=L.position.x+N[L.line]*(this._align==="justify"?L.prevSpaces:1);this._roundPixels&&(T=Math.round(T));let C=T*n,K=L.position.y*n,ue=L.texture,j=R[ue.baseTexture.uid],O=ue.frame,V=ue._uvs,U=j.index++;j.indices[U*6+0]=0+U*4,j.indices[U*6+1]=1+U*4,j.indices[U*6+2]=2+U*4,j.indices[U*6+3]=0+U*4,j.indices[U*6+4]=2+U*4,j.indices[U*6+5]=3+U*4,j.vertices[U*8+0]=C,j.vertices[U*8+1]=K,j.vertices[U*8+2]=C+O.width*n,j.vertices[U*8+3]=K,j.vertices[U*8+4]=C+O.width*n,j.vertices[U*8+5]=K+O.height*n,j.vertices[U*8+6]=C,j.vertices[U*8+7]=K+O.height*n,j.uvs[U*8+0]=V.x0,j.uvs[U*8+1]=V.y0,j.uvs[U*8+2]=V.x1,j.uvs[U*8+3]=V.y1,j.uvs[U*8+4]=V.x2,j.uvs[U*8+5]=V.y2,j.uvs[U*8+6]=V.x3,j.uvs[U*8+7]=V.y3}this._textWidth=p*n,this._textHeight=(i.y+e.lineHeight)*n;for(let F in R){let L=R[F];if(this.anchor.x!==0||this.anchor.y!==0){let ue=0,j=this._textWidth*this.anchor.x,O=this._textHeight*this.anchor.y;for(let V=0;V<L.total;V++)L.vertices[ue++]-=j,L.vertices[ue++]-=O,L.vertices[ue++]-=j,L.vertices[ue++]-=O,L.vertices[ue++]-=j,L.vertices[ue++]-=O,L.vertices[ue++]-=j,L.vertices[ue++]-=O}this._maxLineHeight=g*n;let T=L.mesh.geometry.getBuffer("aVertexPosition"),C=L.mesh.geometry.getBuffer("aTextureCoord"),K=L.mesh.geometry.getIndex();T.data=L.vertices,C.data=L.uvs,K.data=L.indices,T.update(),C.update(),K.update()}for(let F=0;F<o.length;F++)gS.push(o[F]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);let{distanceFieldRange:t,distanceFieldType:n,size:i}=Lr.available[this._fontName];if(n!=="none"){let{a:o,b:s,c:a,d:l}=this.worldTransform,u=Math.sqrt(o*o+s*s),c=Math.sqrt(a*a+l*l),h=(Math.abs(u)+Math.abs(c))/2,d=this.fontSize/i,f=e._view.resolution;for(let p of this._activePagesMeshData)p.mesh.shader.uniforms.uFWidth=h*t*d*f}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){let e=Lr.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!Lr.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??Lr.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){let{_textureCache:t}=this,n=Lr.available[this._fontName].distanceFieldType==="none"?pS:mS;n.push(...this._activePagesMeshData);for(let i of this._activePagesMeshData)this.removeChild(i.mesh);this._activePagesMeshData=[],n.filter(i=>t[i.mesh.texture.baseTexture.uid]).forEach(i=>{i.mesh.texture=q.EMPTY});for(let i in t)t[i].destroy(),delete t[i];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};R2.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};var P2=[".xml",".fnt"],vS={extension:{type:E.LoadParser,priority:Le.Normal},name:"loadBitmapFont",test(r){return P2.includes(A.path.extname(r).toLowerCase())},testParse(r){return I(this,null,function*(){return Nn.test(r)||ui.test(r)})},parse(r,e,t){return I(this,null,function*(){let n=Nn.test(r)?Nn.parse(r):ui.parse(r),{src:i}=e,{page:o}=n,s=[];for(let u=0;u<o.length;++u){let c=o[u].file,h=A.path.join(A.path.dirname(i),c);h=eo(h,i),s.push(h)}let a=yield t.load(s),l=s.map(u=>a[u]);return Lr.install(n,l,!0)})},load(r,e){return I(this,null,function*(){return(yield b.ADAPTER.fetch(r)).text()})},unload(r){r.destroy()}};w.add(vS);var bv=class qs extends Ht{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(e){return new qs(Object.keys(qs.defaultOptions).reduce((t,n)=>fe(S({},t),{[n]:e[n]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(e=>{URL.revokeObjectURL(e.src),e.refs--,e.refs===0&&(e.fontFace&&document.fonts.delete(e.fontFace),delete qs.availableFonts[e.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(e,t={}){let{availableFonts:n}=qs;if(n[e]){let i=n[e];return this._fonts.push(i),i.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return b.ADAPTER.fetch(e).then(i=>i.blob()).then(i=>I(this,null,function*(){return new Promise((o,s)=>{let a=URL.createObjectURL(i),l=new FileReader;l.onload=()=>o([a,l.result]),l.onerror=s,l.readAsDataURL(i)})})).then(s=>I(this,[s],function*([i,o]){let a=Object.assign({family:A.path.basename(e,A.path.extname(e)),weight:"normal",style:"normal",display:"auto",src:i,dataSrc:o,refs:1,originalUrl:e,fontFace:null},t);n[e]=a,this._fonts.push(a),this.styleID++;let l=new FontFace(a.family,`url(${a.src})`,{weight:a.weight,style:a.style,display:a.display});a.fontFace=l,yield l.load(),document.fonts.add(l),yield document.fonts.ready,this.styleID++,this.fontsDirty=!0}))}addOverride(...e){let t=e.filter(n=>!this._overrides.includes(n));t.length>0&&(this._overrides.push(...t),this.styleID++)}removeOverride(...e){let t=e.filter(n=>this._overrides.includes(n));t.length>0&&(this._overrides=this._overrides.filter(n=>!t.includes(n)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,t)=>`${e}
            @font-face {
                font-family: "${t.family}";
                src: url('${t.dataSrc}');
                font-weight: ${t.weight};
                font-style: ${t.style};
                font-display: ${t.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(e=A.rgb2hex(e)),typeof e=="number"?A.hex2string(e):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor),t=this.dropShadowAlpha,n=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),i=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&t<1&&(e+=(t*255|0).toString(16).padStart(2,"0"));let o=`${n}px ${i}px`;return this.dropShadowBlur>0?`text-shadow: ${o} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${o} ${e}`}reset(){Object.assign(this,qs.defaultOptions)}onBeforeDraw(){let{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(t=>setTimeout(t,100)):Promise.resolve()}get isSafari(){let{userAgent:e}=b.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};bv.availableFonts={},bv.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};var xu=bv;var Td=class Xs extends rr{constructor(e="",t={}){super(q.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;let n=new Image,i=q.from(n,{scaleMode:b.SCALE_MODE,resourceOptions:{autoLoad:!1}});i.orig=new W,i.trim=new W,this.texture=i;let o="http://www.w3.org/2000/svg",s="http://www.w3.org/1999/xhtml",a=document.createElementNS(o,"svg"),l=document.createElementNS(o,"foreignObject"),u=document.createElementNS(s,"div"),c=document.createElementNS(s,"style");l.setAttribute("width","10000"),l.setAttribute("height","10000"),l.style.overflow="hidden",a.appendChild(l),this.maxWidth=Xs.defaultMaxWidth,this.maxHeight=Xs.defaultMaxHeight,this._domElement=u,this._styleElement=c,this._svgRoot=a,this._foreignObject=l,this._foreignObject.appendChild(c),this._foreignObject.appendChild(u),this._image=n,this._loadImage=new Image,this._autoResolution=Xs.defaultAutoResolution,this._resolution=Xs.defaultResolution??b.RESOLUTION,this.text=e,this.style=t}measureText(e){let{text:t,style:n,resolution:i}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:t,style:n.toCSS(i)}),this._styleElement.textContent=n.toGlobalCSS(),document.body.appendChild(this._svgRoot);let o=this._domElement.getBoundingClientRect();this._svgRoot.remove();let{width:s,height:a}=o;(s>this.maxWidth||a>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");let l=Math.min(this.maxWidth,Math.ceil(s)),u=Math.min(this.maxHeight,Math.ceil(a));return this._svgRoot.setAttribute("width",l.toString()),this._svgRoot.setAttribute("height",u.toString()),t!==this._text&&(this._domElement.innerHTML=this._text),n!==this._style&&(Object.assign(this._domElement,{style:this._style?.toCSS(i)}),this._styleElement.textContent=this._style?.toGlobalCSS()),{width:l+n.padding*2,height:u+n.padding*2}}updateText(e=!0){return I(this,null,function*(){let{style:t,_image:n,_loadImage:i}=this;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;let{width:o,height:s}=this.measureText();n.width=i.width=Math.ceil(Math.max(1,o)),n.height=i.height=Math.ceil(Math.max(1,s)),this._updateID++;let a=this._updateID;yield new Promise(l=>{i.onload=()=>I(this,null,function*(){if(a<this._updateID){l();return}yield t.onBeforeDraw(),n.src=i.src,i.onload=null,i.src="",this.updateTexture(),l()});let u=new XMLSerializer().serializeToString(this._svgRoot);i.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(u)}`})})}get source(){return this._image}updateTexture(){let{style:e,texture:t,_image:n,resolution:i}=this,{padding:o}=e,{baseTexture:s}=t;t.trim.width=t._frame.width=n.width/i,t.trim.height=t._frame.height=n.height/i,t.trim.x=-o,t.trim.y=-o,t.orig.width=t._frame.width-o*2,t.orig.height=t._frame.height-o*2,this._onTextureUpdate(),s.setRealSize(n.width,n.height,i),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},Xs.defaultDestroyOptions,e),super.destroy(e);let t=null;this.ownsStyle&&this._style?.cleanFonts(),this._style=t,this._svgRoot?.remove(),this._svgRoot=t,this._domElement?.remove(),this._domElement=t,this._foreignObject?.remove(),this._foreignObject=t,this._styleElement?.remove(),this._styleElement=t,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=t,this._image.src="",this._image=t}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);let t=A.sign(this.scale.x)||1;this.scale.x=t*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);let t=A.sign(this.scale.y)||1;this.scale.y=t*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&(e=e||{},e instanceof xu?(this.ownsStyle=!1,this._style=e):e instanceof Ht?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=xu.from(e)):(this.ownsStyle=!0,this._style=new xu(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(e===""||e===null||e===void 0?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};Td.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},Td.defaultMaxWidth=2024,Td.defaultMaxHeight=2024,Td.defaultAutoResolution=!0;var Cd=class{stats;animationConfig;constructor(e,t){this.stats=e,this.animationConfig=t}getStats(){return this.stats}getAnimationConfig(){return this.animationConfig}takeDamage(e=1){this.stats.currentLife=Math.max(0,this.stats.currentLife-e),this.onDamage()}heal(e=1){this.stats.currentLife=Math.min(this.stats.maxLife,this.stats.currentLife+e),this.onHeal()}isDead(){return this.stats.currentLife<=0}};var Dd=(()=>{class r{healthStats=Vn(null);updateStats(t){this.healthStats.set(t)}getStats(){return this.healthStats()}isLowHealth(){let t=this.healthStats();return t?t.currentLife<=t.maxLife/2:!1}static \u0275fac=function(n){return new(n||r)};static \u0275prov=Q({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var un=(()=>{class r{healthService;config=Vn(null);currentStateSignal=Vn("");isAutoPlayingSignal=Vn(!1);animationTimeouts=[];autoPlayInterval;isPlayingSequence=!1;currentState=Ai(()=>this.currentStateSignal());isAutoPlaying=Ai(()=>this.isAutoPlayingSignal());constructor(t){this.healthService=t}setConfig(t){this.config.set(t),t.autoPlayEnabled&&this.startAutoPlay()}getConfig(){return this.config()}setState(t){this.isPlayingSequence&&t==="running"||this.currentStateSignal.set(t)}clearAllAnimations(){this.animationTimeouts.forEach(t=>clearTimeout(t)),this.animationTimeouts=[],this.stopAutoPlay(),this.isPlayingSequence=!1}addAnimationTimeout(t,n){let i=window.setTimeout(()=>{t(),this.animationTimeouts=this.animationTimeouts.filter(o=>o!==i)},n);return this.animationTimeouts.push(i),i}startAutoPlay(){this.isPlayingSequence||(this.stopAutoPlay(),this.isAutoPlayingSignal.set(!0),this.scheduleNextRandomAnimation())}stopAutoPlay(){this.autoPlayInterval&&(clearTimeout(this.autoPlayInterval),this.autoPlayInterval=null),this.isAutoPlayingSignal.set(!1)}toggleAutoPlay(){this.isAutoPlaying()?this.stopAutoPlay():this.startAutoPlay()}shouldShowAlert(){return this.healthService.isLowHealth()}scheduleNextRandomAnimation(){let t=()=>{if(!this.isPlayingSequence){if(this.shouldShowAlert())this.setState("alert");else{let n=this.getRandomState();n!==this.currentState()&&this.setState(n)}if(this.isAutoPlaying()){let n=this.getRandomDuration(this.currentState());this.autoPlayInterval=this.addAnimationTimeout(t,n)}}};this.addAnimationTimeout(t,0)}getRandomState(t){let n=this.config();if(!n||!n.states.length)return"";let i=n.states.map(s=>s.name).filter(s=>s!==t&&s!=="stopped"&&s!=="alert"),o=Math.floor(Math.random()*i.length);return i[o]}getRandomDuration(t){let n=this.config();if(!n||!n.autoPlayDurations)return 5e3;if(t==="sleeping")return n.autoPlayDurations.sleeping||3e5;if(t==="alert")return n.autoPlayDurations.alert||3e3;let i=n.autoPlayDurations.min||5e3,o=n.autoPlayDurations.max||2e4;return Math.floor(Math.random()*(o-i+1))+i}playEatingSequence(){this.clearAllAnimations(),this.isPlayingSequence=!0;let t=this.isAutoPlaying(),n=Math.random()<.5?"scratching":"wallScratching";this.setState(n),this.addAnimationTimeout(()=>{let i=this.getRandomState(n);this.setState(i),this.addAnimationTimeout(()=>{this.isPlayingSequence=!1,t&&this.startAutoPlay()},2e3)},2e3)}static \u0275fac=function(n){return new(n||r)(ie(Dd))};static \u0275prov=Q({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var xS=(()=>{class r extends Cd{animationService;alertTimeout;constructor(t,n={maxLife:4,currentLife:4},i){super(n,i),this.animationService=t}onDamage(){this.alertTimeout&&clearTimeout(this.alertTimeout),this.animationService.setState("alert"),this.alertTimeout=setTimeout(()=>{this.animationService.setState(this.animationConfig.defaultState)},1e3)}onHeal(){this.animationService.setState(this.animationConfig.defaultState)}takeDamage(t=1){super.takeDamage(t),this.onDamage()}static \u0275fac=function(n){return new(n||r)(ie(un),ie("CHARACTER_STATS"),ie("ANIMATION_CONFIG"))};static \u0275prov=Q({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var Sd={states:[{name:"running",frames:[{width:138,height:100,path:"assets/cat/resized/running/frame1.png"},{width:138,height:100,path:"assets/cat/resized/running/frame2.png"}],speed:.1},{name:"scratching",frames:[{width:194,height:200,path:"assets/cat/resized/scratching/frame1.png"},{width:194,height:200,path:"assets/cat/resized/scratching/frame2.png"}],speed:.15},{name:"wallScratching",frames:[{width:300,height:330,path:"assets/cat/resized/wall-scratching/frame1.png"},{width:300,height:330,path:"assets/cat/resized/wall-scratching/frame2.png"}],speed:.075,scale:.8},{name:"sleeping",frames:[{width:300,height:200,path:"assets/cat/resized/sleeping/frame1.png"},{width:300,height:200,path:"assets/cat/resized/sleeping/frame2.png"}],speed:.025},{name:"stopped",frames:[{width:200,height:240,path:"assets/cat/resized/stop.png"}],speed:0},{name:"alert",frames:[{width:198,height:220,path:"assets/cat/resized/cat-alert.png"}],speed:0}],defaultState:"running",autoPlayEnabled:!0,autoPlayDurations:{min:5e3,max:2e4,sleeping:3e5}};var hi=(()=>{class r{animationService;healthService;destroyRef;currentCharacter=Vn(null);hungerTimer;HUNGER_INTERVAL=3e4;constructor(t,n,i){this.animationService=t,this.healthService=n,this.destroyRef=i,this.initializeCat(),Mi(()=>{let o=this.healthService.getStats();o&&console.log("Character life updated:",o.currentLife)}),this.destroyRef.onDestroy(()=>{this.stopHungerTimer()})}initializeCat(){let t={maxLife:4,currentLife:4},n=new xS(this.animationService,t,Sd);this.currentCharacter.set(n),this.healthService.updateStats(t),this.startHungerTimer()}startHungerTimer(){console.log("Starting hunger timer..."),this.stopHungerTimer(),this.hungerTimer=setInterval(()=>{let t=this.currentCharacter();t&&!t.isDead()&&(console.log("Taking damage from hunger..."),this.takeDamage(1),t.isDead()&&(console.log("Character died from hunger!"),this.stopHungerTimer()))},this.HUNGER_INTERVAL)}stopHungerTimer(){this.hungerTimer&&(clearInterval(this.hungerTimer),this.hungerTimer=null)}updateStats(){let t=this.currentCharacter();if(t){let n=t.getStats();console.log("Updating health stats:",n),this.healthService.updateStats(S({},n))}}getCurrentCharacter(){return this.currentCharacter()}takeDamage(t=1){let n=this.currentCharacter();if(n){n.takeDamage(t),this.updateStats();let i=n.getStats();console.log("Character took damage. Current life:",i.currentLife,"Stats updated:",this.healthService.getStats())}}feed(){let t=this.currentCharacter();if(!t||t.isDead())return!1;let n=t.getStats();return n.currentLife>=n.maxLife?!1:(t.heal(1),this.updateStats(),console.log("Character was fed. Current life:",t.getStats().currentLife),this.startHungerTimer(),this.animationService.playEatingSequence(),!0)}heal(t=1){let n=this.currentCharacter();n&&(n.heal(t),this.updateStats(),console.log("Character was healed. Current life:",n.getStats().currentLife))}getStats(){return this.healthService.getStats()}canFeed(){let t=this.healthService.getStats();return!t||t.currentLife<=0?!1:t.currentLife<t.maxLife}static \u0275fac=function(n){return new(n||r)(ie(un),ie(Dd),ie(Ta))};static \u0275prov=Q({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var ES=(()=>{class r{characterService;animationService;dragStyle;dragCleanupTimeout;constructor(t,n){this.characterService=t,this.animationService=n}canFeed=Ai(()=>this.characterService.canFeed());onDragStart(t){if(!this.canFeed()){t.preventDefault();return}if(this.animationService.setState("stopped"),t.dataTransfer){t.dataTransfer.setData("text/plain","food"),t.dataTransfer.effectAllowed="move";let n=document.createElement("div");n.textContent="\u{1F357}",n.style.fontSize="48px",n.style.opacity="0.9",n.style.transform="scale(1.2)",n.style.filter="drop-shadow(0 0 5px rgba(0,0,0,0.3))",n.style.cursor="grab",document.body.appendChild(n),t.dataTransfer.setDragImage(n,24,24),setTimeout(()=>document.body.removeChild(n),0)}this.dragStyle=document.createElement("style"),this.dragStyle.textContent="* { cursor: grab !important; }",document.head.appendChild(this.dragStyle),document.addEventListener("dragend",this.onDragEnd)}onDragEnd=()=>{this.cleanup(),this.dragCleanupTimeout=window.setTimeout(()=>{let t=this.animationService.getConfig();t&&this.animationService.setState(t.defaultState)},100)};cleanup(){this.dragStyle&&document.head.contains(this.dragStyle)&&(document.head.removeChild(this.dragStyle),this.dragStyle=void 0),document.removeEventListener("dragend",this.onDragEnd),this.dragCleanupTimeout&&(clearTimeout(this.dragCleanupTimeout),this.dragCleanupTimeout=void 0)}ngOnDestroy(){this.cleanup()}static \u0275fac=function(n){return new(n||r)(Ke(hi),Ke(un))};static \u0275cmp=Ft({type:r,selectors:[["app-food"]],standalone:!0,features:[Lt],decls:2,vars:2,consts:[["draggable","true",1,"food",3,"dragstart"]],template:function(n,i){n&1&&(ke(0,"div",0),ht("dragstart",function(s){return i.onDragStart(s)}),sr(1,` \u{1F357}
`),je()),n&2&&Ii("disabled",!i.canFeed())},dependencies:[vn],styles:[".food[_ngcontent-%COMP%]{font-size:32px;-webkit-user-select:none;user-select:none;transition:all .3s ease;position:absolute;top:20px;left:20px;padding:10px;border-radius:50%;background:#ffffff1a}.food.disabled[_ngcontent-%COMP%]{opacity:.5;cursor:not-allowed;background:#ff00001a}.food[_ngcontent-%COMP%]:not(.disabled){cursor:grab}.food[_ngcontent-%COMP%]:not(.disabled):hover{transform:scale(1.1);background:#fff3}.food[_ngcontent-%COMP%]:not(.disabled):active{transform:scale(.9);cursor:grabbing;background:#ffffff4d}"]})}return r})();function N2(r,e){if(r&1&&Sr(0,"div",2),r&2){let t=e.$implicit;Ii("filled",t.filled)("green",t.color==="green")("yellow",t.color==="yellow")("red",t.color==="red")}}var bS=(()=>{class r{characterService;constructor(t){this.characterService=t,Mi(()=>{let n=this.hearts();console.log("Hearts updated:",n)})}hearts=Ai(()=>{let t=this.characterService.getStats();if(console.log("Computing hearts with stats:",t),!t)return[];let n=t.currentLife,i=t.maxLife,o=i/2,s="";return n===i?s="green":n<=1?s="red":s="yellow",Array(t.maxLife).fill(0).map((a,l)=>({filled:l<t.currentLife,color:l<t.currentLife?s:""}))});static \u0275fac=function(n){return new(n||r)(Ke(hi))};static \u0275cmp=Ft({type:r,selectors:[["app-life"]],standalone:!0,features:[Lt],decls:2,vars:1,consts:[[1,"life-container"],["class","heart",3,"filled","green","yellow","red",4,"ngFor","ngForOf"],[1,"heart"]],template:function(n,i){n&1&&(ke(0,"div",0),Ia(1,N2,1,8,"div",1),je()),n&2&&(Bo(),Si("ngForOf",i.hearts()))},dependencies:[vn,wE],styles:[".life-container[_ngcontent-%COMP%]{position:fixed;display:flex;gap:8px;padding:10px;background:#0003;border-radius:8px;top:2%;right:2%;z-index:1000}.heart[_ngcontent-%COMP%]{width:24px;height:24px;background:#333;border-radius:4px;transition:all .3s ease;transform-origin:center}.heart.filled[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 1s ease-in-out}.heart.filled.green[_ngcontent-%COMP%]{background:#4f4;box-shadow:0 0 10px #44ff4480}.heart.filled.yellow[_ngcontent-%COMP%]{background:#ff4;box-shadow:0 0 10px #ffff4480}.heart.filled.red[_ngcontent-%COMP%]{background:#f44;box-shadow:0 0 10px #ff444480}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1)}50%{transform:scale(1.2)}to{transform:scale(1)}}"]})}return r})();var O2=["container"],F2=["*"];function L2(r,e){r&1&&(ke(0,"div",3),nE(1),je())}var wS=(()=>{class r{animationService;characterService;container;showControls=!0;set config(t){this.animationService.setConfig(t)}spriteClick=new Ot;app;sprite;textures={};currentState="";dropPending=!1;constructor(t,n){this.animationService=t,this.characterService=n,Mi(()=>{let i=this.animationService.currentState();i&&i!==this.currentState&&(this.currentState=i,this.playAnimation(i))})}ngOnDestroy(){this.app&&this.app.destroy(!0)}onDragOver(t){this.characterService.canFeed()&&(t.preventDefault(),t.dataTransfer&&(t.dataTransfer.dropEffect="move"),this.dropPending=!0)}onDrop(t){t.preventDefault(),t.dataTransfer?.getData("text/plain")==="food"&&this.dropPending&&(this.characterService.feed(),this.dropPending=!1)}ngAfterViewInit(){return I(this,null,function*(){yield this.initPixi(),yield this.loadTextures(),this.createSprite()})}initPixi(){return I(this,null,function*(){this.app=new nd({width:window.innerWidth,height:window.innerHeight-100,background:"#3494c4"}),this.container.nativeElement.appendChild(this.app.view),window.addEventListener("resize",this.onResize.bind(this))})}loadTextures(){return I(this,null,function*(){let t=this.animationService.getConfig();if(t)try{for(let n of t.states){this.textures[n.name]=[];for(let i of n.frames){let o=yield to.load(i.path);this.textures[n.name].push(o)}}}catch(n){console.error("Error loading textures:",n)}})}createSprite(){let t=this.animationService.getConfig();if(!t)return;let n=t.states.find(i=>i.name===t.defaultState);!n||!this.textures[n.name].length||(this.sprite=new gu(this.textures[n.name]),this.sprite.anchor.set(.5),this.sprite.eventMode="static",this.sprite.cursor="url('/assets/cursor-pointer.png') 0 0, pointer",this.sprite.on("pointerdown",()=>{this.spriteClick.emit(this.currentState)}),this.app.stage.addChild(this.sprite),this.onResize())}playAnimation(t){if(!this.sprite)return;let n=this.animationService.getConfig();if(!n)return;let i=n.states.find(o=>o.name===t);!i||!this.textures[i.name]||(this.sprite.textures=this.textures[i.name],this.sprite.animationSpeed=i.speed,i.scale!==void 0&&this.sprite.scale.set(i.scale),this.sprite.play())}onResize(){!this.sprite||!this.app||this.sprite.position.set(this.app.screen.width/2,this.app.screen.height/2)}static \u0275fac=function(n){return new(n||r)(Ke(un),Ke(hi))};static \u0275cmp=Ft({type:r,selectors:[["app-base-animation"]],viewQuery:function(n,i){if(n&1&&iE(O2,5),n&2){let o;Wp(o=qp())&&(i.container=o.first)}},inputs:{showControls:"showControls",config:"config"},outputs:{spriteClick:"spriteClick"},standalone:!0,features:[Lt],ngContentSelectors:F2,decls:6,vars:3,consts:[["container",""],[1,"container",3,"dragover","drop"],["class","controls",4,"ngIf"],[1,"controls"]],template:function(n,i){if(n&1){let o=tE();rE(),ke(0,"div",1),ht("dragover",function(a){return vp(o),_p(i.onDragOver(a))})("drop",function(a){return vp(o),_p(i.onDrop(a))}),Sr(1,"div",null,0)(3,"app-life")(4,"app-food"),Ia(5,L2,2,0,"div",2),je()}n&2&&(Ii("can-drop",i.characterService.canFeed()),Bo(5),Si("ngIf",i.showControls))},dependencies:[vn,TE,ES,bS],styles:['.container[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;overflow:hidden;cursor:url(/assets/cursor-default.png) 0 0,auto}.container.can-drop[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background:#44ff441a;border:2px dashed #44ff44;pointer-events:none;animation:_ngcontent-%COMP%_pulse 1s ease-in-out infinite}.controls[_ngcontent-%COMP%]{position:absolute;bottom:20px;left:50%;transform:translate(-50%);display:flex;gap:10px;z-index:1000}.actions[_ngcontent-%COMP%]{position:fixed;bottom:20px;left:20px;z-index:1000}[_nghost-%COMP%]     button{cursor:url(/assets/cursor-default.png) 0 0,auto}[_nghost-%COMP%]     button:hover{cursor:url(/assets/cursor-pointer.png) 0 0,pointer}@keyframes _ngcontent-%COMP%_pulse{0%{opacity:.3}50%{opacity:.6}to{opacity:.3}}']})}return r})();var TS=(()=>{class r{animationService;characterService;catConfig=Sd;constructor(t,n){this.animationService=t,this.characterService=n}get isAutoPlaying(){return this.animationService.isAutoPlaying}onSpriteClick(t){t!=="running"&&this.characterService.takeDamage()}takeDamage(){this.characterService.takeDamage(1)}playRunning(){this.animationService.setState("running")}playScratch(){this.animationService.setState("scratching")}playWallScratch(){this.animationService.setState("wallScratching")}playStop(){this.animationService.setState("stopped")}playSleep(){this.animationService.setState("sleeping")}playAlert(){this.animationService.setState("alert")}toggleAutoPlay(){this.animationService.toggleAutoPlay()}heal(){this.characterService.heal()}static \u0275fac=function(n){return new(n||r)(Ke(un),Ke(hi))};static \u0275cmp=Ft({type:r,selectors:[["app-cat-animation"]],standalone:!0,features:[Lt],decls:19,vars:2,consts:[[3,"spriteClick","config"],["button","cat-action",3,"click"]],template:function(n,i){n&1&&(ke(0,"app-base-animation",0),ht("spriteClick",function(s){return i.onSpriteClick(s)}),ke(1,"button",1),ht("click",function(){return i.takeDamage()}),sr(2,"\u{1F4A5} Causar Dano"),je(),ke(3,"button",1),ht("click",function(){return i.playRunning()}),sr(4,"Run"),je(),ke(5,"button",1),ht("click",function(){return i.playScratch()}),sr(6,"Scratch"),je(),ke(7,"button",1),ht("click",function(){return i.playWallScratch()}),sr(8,"Wall Scratch"),je(),ke(9,"button",1),ht("click",function(){return i.playStop()}),sr(10,"Stop"),je(),ke(11,"button",1),ht("click",function(){return i.playSleep()}),sr(12,"Sleep"),je(),ke(13,"button",1),ht("click",function(){return i.playAlert()}),sr(14,"Alert"),je(),ke(15,"button",1),ht("click",function(){return i.heal()}),sr(16,"Heal"),je(),ke(17,"button",1),ht("click",function(){return i.toggleAutoPlay()}),sr(18),je()()),n&2&&(Si("config",i.catConfig),Bo(18),Xp(" ",i.isAutoPlaying()?"Stop Auto":"Start Auto"," "))},dependencies:[vn,wS],styles:["button[button=cat-action][_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:4px;background:#4a4a4a;color:#fff;cursor:pointer;transition:background .2s}button[button=cat-action][_ngcontent-%COMP%]:hover{background:#666}"]})}return r})();var CS=(()=>{class r{static \u0275fac=function(n){return new(n||r)};static \u0275cmp=Ft({type:r,selectors:[["app-room"]],standalone:!0,features:[Lt],decls:3,vars:0,consts:[[1,"room-container"]],template:function(n,i){n&1&&(ke(0,"section")(1,"div",0),Sr(2,"app-cat-animation"),je()())},dependencies:[TS]})}return r})();var DS=(()=>{class r{title="pixel-pet";static \u0275fac=function(n){return new(n||r)};static \u0275cmp=Ft({type:r,selectors:[["app-root"]],standalone:!0,features:[Lt],decls:1,vars:0,template:function(n,i){n&1&&Sr(0,"app-room")},dependencies:[CS]})}return r})();OE(DS,vb).catch(r=>console.error(r));
